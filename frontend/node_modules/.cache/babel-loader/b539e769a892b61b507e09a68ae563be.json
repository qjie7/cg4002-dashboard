{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nimport _every from \"lodash/every\";\nimport _find from \"lodash/find\";\nimport _isFunction from \"lodash/isFunction\";\nimport _throttle from \"lodash/throttle\";\nimport _sortBy from \"lodash/sortBy\";\nimport _get from \"lodash/get\";\nimport _range from \"lodash/range\";\nimport _isNil from \"lodash/isNil\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component, cloneElement, isValidElement, createElement } from 'react';\nimport classNames from 'classnames';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Tooltip } from '../component/Tooltip';\nimport { Legend } from '../component/Legend';\nimport { Curve } from '../shape/Curve';\nimport { Cross } from '../shape/Cross';\nimport { Sector } from '../shape/Sector';\nimport { Dot } from '../shape/Dot';\nimport { Rectangle } from '../shape/Rectangle';\nimport { findAllByType, findChildByType, getDisplayName, parseChildIndex, validateWidthHeight, isChildrenEqual, renderByOrder, getReactEventByType } from '../util/ReactUtils';\nimport { CartesianAxis } from '../cartesian/CartesianAxis';\nimport { Brush } from '../cartesian/Brush';\nimport { getOffset, calculateChartCoordinate } from '../util/DOMUtils';\nimport { getAnyElementOfObject, hasDuplicate, uniqueId, isNumber, findEntryInArray } from '../util/DataUtils';\nimport { calculateActiveTickIndex, getMainColorOfGraphicItem, getBarSizeList, getBarPosition, appendOffsetOfLegend, getLegendProps, combineEventHandlers, getTicksOfAxis, getCoordinatesOfGrid, getStackedDataOfItem, parseErrorBarsOfAxis, getBandSizeOfAxis, getStackGroupsByAxisId, getValueByDataKey, isCategoricalAxis, getDomainOfItemsWithSameAxis, getDomainOfStackGroups, getDomainOfDataByKey, parseSpecifiedDomain, parseDomainOfCategoryAxis } from '../util/ChartUtils';\nimport { detectReferenceElementsDomain } from '../util/DetectReferenceElementsDomain';\nimport { inRangeOfSector, polarToCartesian } from '../util/PolarUtils';\nimport { shallowEqual } from '../util/ShallowEqual';\nimport { eventCenter, SYNC_EVENT } from '../util/Events';\nimport { filterProps, adaptEventHandlers } from '../util/types';\nvar ORIENT_MAP = {\n  xAxis: ['bottom', 'top'],\n  yAxis: ['left', 'right']\n};\nvar originCoordinate = {\n  x: 0,\n  y: 0\n}; // use legacy isFinite only if there is a problem (aka IE)\n// eslint-disable-next-line no-restricted-globals\n\nvar isFinit = Number.isFinite ? Number.isFinite : isFinite;\nvar defer = // eslint-disable-next-line no-nested-ternary\ntypeof requestAnimationFrame === 'function' ? requestAnimationFrame : typeof setImmediate === 'function' ? setImmediate : setTimeout;\nvar deferClear = // eslint-disable-next-line no-nested-ternary\ntypeof cancelAnimationFrame === 'function' ? cancelAnimationFrame : typeof clearImmediate === 'function' ? clearImmediate : clearTimeout;\n\nvar calculateTooltipPos = function calculateTooltipPos(rangeObj, layout) {\n  if (layout === 'horizontal') {\n    return rangeObj.x;\n  }\n\n  if (layout === 'vertical') {\n    return rangeObj.y;\n  }\n\n  if (layout === 'centric') {\n    return rangeObj.angle;\n  }\n\n  return rangeObj.radius;\n};\n\nvar getActiveCoordinate = function getActiveCoordinate(layout, tooltipTicks, activeIndex, rangeObj) {\n  var entry = tooltipTicks.find(function (tick) {\n    return tick && tick.index === activeIndex;\n  });\n\n  if (entry) {\n    if (layout === 'horizontal') {\n      return {\n        x: entry.coordinate,\n        y: rangeObj.y\n      };\n    }\n\n    if (layout === 'vertical') {\n      return {\n        x: rangeObj.x,\n        y: entry.coordinate\n      };\n    }\n\n    if (layout === 'centric') {\n      var _angle = entry.coordinate;\n      var _radius = rangeObj.radius;\n      return _objectSpread(_objectSpread(_objectSpread({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, _radius, _angle)), {}, {\n        angle: _angle,\n        radius: _radius\n      });\n    }\n\n    var radius = entry.coordinate;\n    var angle = rangeObj.angle;\n    return _objectSpread(_objectSpread(_objectSpread({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, radius, angle)), {}, {\n      angle: angle,\n      radius: radius\n    });\n  }\n\n  return originCoordinate;\n};\n\nvar getDisplayedData = function getDisplayedData(data, _ref, item) {\n  var graphicalItems = _ref.graphicalItems,\n      dataStartIndex = _ref.dataStartIndex,\n      dataEndIndex = _ref.dataEndIndex;\n  var itemsData = (graphicalItems || []).reduce(function (result, child) {\n    var itemData = child.props.data;\n\n    if (itemData && itemData.length) {\n      return [].concat(_toConsumableArray(result), _toConsumableArray(itemData));\n    }\n\n    return result;\n  }, []);\n\n  if (itemsData && itemsData.length > 0) {\n    return itemsData;\n  }\n\n  if (item && item.props && item.props.data && item.props.data.length > 0) {\n    return item.props.data;\n  }\n\n  if (data && data.length && isNumber(dataStartIndex) && isNumber(dataEndIndex)) {\n    return data.slice(dataStartIndex, dataEndIndex + 1);\n  }\n\n  return [];\n};\n/**\n * Get the content to be displayed in the tooltip\n * @param  {Object} state          Current state\n * @param  {Array}  chartData      The data defined in chart\n * @param  {Number} activeIndex    Active index of data\n * @param  {String} activeLabel    Active label of data\n * @return {Array}                 The content of tooltip\n */\n\n\nvar getTooltipContent = function getTooltipContent(state, chartData, activeIndex, activeLabel) {\n  var graphicalItems = state.graphicalItems,\n      tooltipAxis = state.tooltipAxis;\n  var displayedData = getDisplayedData(chartData, state);\n\n  if (activeIndex < 0 || !graphicalItems || !graphicalItems.length || activeIndex >= displayedData.length) {\n    return null;\n  } // get data by activeIndex when the axis don't allow duplicated category\n\n\n  return graphicalItems.reduce(function (result, child) {\n    var hide = child.props.hide;\n\n    if (hide) {\n      return result;\n    }\n\n    var _child$props = child.props,\n        dataKey = _child$props.dataKey,\n        name = _child$props.name,\n        unit = _child$props.unit,\n        formatter = _child$props.formatter,\n        data = _child$props.data,\n        tooltipType = _child$props.tooltipType;\n    var payload;\n\n    if (tooltipAxis.dataKey && !tooltipAxis.allowDuplicatedCategory) {\n      // graphic child has data props\n      var entries = data === undefined ? displayedData : data;\n      payload = findEntryInArray(entries, tooltipAxis.dataKey, activeLabel);\n    } else {\n      payload = data && data[activeIndex] || displayedData[activeIndex];\n    }\n\n    if (!payload) {\n      return result;\n    }\n\n    return [].concat(_toConsumableArray(result), [_objectSpread(_objectSpread({}, filterProps(child)), {}, {\n      dataKey: dataKey,\n      unit: unit,\n      formatter: formatter,\n      name: name || dataKey,\n      color: getMainColorOfGraphicItem(child),\n      value: getValueByDataKey(payload, dataKey),\n      type: tooltipType,\n      payload: payload\n    })]);\n  }, []);\n};\n/**\n * Returns tooltip data based on a mouse position (as a parameter or in state)\n * @param  {Object} state     current state\n * @param  {Array}  chartData the data defined in chart\n * @param  {String} layout     The layout type of chart\n * @param  {Object} rangeObj  { x, y } coordinates\n * @return {Object}           Tooltip data data\n */\n\n\nvar getTooltipData = function getTooltipData(state, chartData, layout, rangeObj) {\n  var rangeData = rangeObj || {\n    x: state.chartX,\n    y: state.chartY\n  };\n  var pos = calculateTooltipPos(rangeData, layout);\n  var ticks = state.orderedTooltipTicks,\n      axis = state.tooltipAxis,\n      tooltipTicks = state.tooltipTicks;\n  var activeIndex = calculateActiveTickIndex(pos, ticks, tooltipTicks, axis);\n\n  if (activeIndex >= 0 && tooltipTicks) {\n    var activeLabel = tooltipTicks[activeIndex] && tooltipTicks[activeIndex].value;\n    var activePayload = getTooltipContent(state, chartData, activeIndex, activeLabel);\n    var activeCoordinate = getActiveCoordinate(layout, ticks, activeIndex, rangeData);\n    return {\n      activeTooltipIndex: activeIndex,\n      activeLabel: activeLabel,\n      activePayload: activePayload,\n      activeCoordinate: activeCoordinate\n    };\n  }\n\n  return null;\n};\n/**\n * Get the configuration of axis by the options of axis instance\n * @param  {Object} props         Latest props\n * @param {Array}  axes           The instance of axes\n * @param  {Array} graphicalItems The instances of item\n * @param  {String} axisType      The type of axis, xAxis - x-axis, yAxis - y-axis\n * @param  {String} axisIdKey     The unique id of an axis\n * @param  {Object} stackGroups   The items grouped by axisId and stackId\n * @param {Number} dataStartIndex The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex   The end index of the data series when a brush is applied\n * @return {Object}      Configuration\n */\n\n\nvar getAxisMapByAxes = function getAxisMapByAxes(props, _ref2) {\n  var axes = _ref2.axes,\n      graphicalItems = _ref2.graphicalItems,\n      axisType = _ref2.axisType,\n      axisIdKey = _ref2.axisIdKey,\n      stackGroups = _ref2.stackGroups,\n      dataStartIndex = _ref2.dataStartIndex,\n      dataEndIndex = _ref2.dataEndIndex;\n  var layout = props.layout,\n      children = props.children,\n      stackOffset = props.stackOffset;\n  var isCategorical = isCategoricalAxis(layout, axisType); // Eliminate duplicated axes\n\n  var axisMap = axes.reduce(function (result, child) {\n    var _child$props2 = child.props,\n        type = _child$props2.type,\n        dataKey = _child$props2.dataKey,\n        allowDataOverflow = _child$props2.allowDataOverflow,\n        allowDuplicatedCategory = _child$props2.allowDuplicatedCategory,\n        scale = _child$props2.scale,\n        ticks = _child$props2.ticks;\n    var axisId = child.props[axisIdKey];\n    var displayedData = getDisplayedData(props.data, {\n      graphicalItems: graphicalItems.filter(function (item) {\n        return item.props[axisIdKey] === axisId;\n      }),\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n    var len = displayedData.length;\n\n    if (!result[axisId]) {\n      var domain, duplicateDomain, categoricalDomain;\n\n      if (dataKey) {\n        // has dataKey in <Axis />\n        domain = getDomainOfDataByKey(displayedData, dataKey, type);\n\n        if (type === 'category' && isCategorical) {\n          // the field type is category data and this axis is catrgorical axis\n          var duplicate = hasDuplicate(domain);\n\n          if (allowDuplicatedCategory && duplicate) {\n            duplicateDomain = domain; // When category axis has duplicated text, serial numbers are used to generate scale\n\n            domain = _range(0, len);\n          } else if (!allowDuplicatedCategory) {\n            // remove duplicated category\n            domain = parseDomainOfCategoryAxis(child.props.domain, domain, child).reduce(function (finalDomain, entry) {\n              return finalDomain.indexOf(entry) >= 0 ? finalDomain : [].concat(_toConsumableArray(finalDomain), [entry]);\n            }, []);\n          }\n        } else if (type === 'category') {\n          // the field type is category data and this axis is numerical axis\n          if (!allowDuplicatedCategory) {\n            domain = parseDomainOfCategoryAxis(child.props.domain, domain, child).reduce(function (finalDomain, entry) {\n              return finalDomain.indexOf(entry) >= 0 || entry === '' || _isNil(entry) ? finalDomain : [].concat(_toConsumableArray(finalDomain), [entry]);\n            }, []);\n          } else {\n            // eliminate undefined or null or empty string\n            domain = domain.filter(function (entry) {\n              return entry !== '' && !_isNil(entry);\n            });\n          }\n        } else if (type === 'number') {\n          // the field type is numerical\n          var errorBarsDomain = parseErrorBarsOfAxis(displayedData, graphicalItems.filter(function (item) {\n            return item.props[axisIdKey] === axisId && !item.props.hide;\n          }), dataKey, axisType);\n\n          if (errorBarsDomain) {\n            domain = errorBarsDomain;\n          }\n        }\n\n        if (isCategorical && (type === 'number' || scale !== 'auto')) {\n          categoricalDomain = getDomainOfDataByKey(displayedData, dataKey, 'category');\n        }\n      } else if (isCategorical) {\n        // the axis is a categorical axis\n        domain = _range(0, len);\n      } else if (stackGroups && stackGroups[axisId] && stackGroups[axisId].hasStack && type === 'number') {\n        // when stackOffset is 'expand', the domain may be calculated as [0, 1.000000000002]\n        domain = stackOffset === 'expand' ? [0, 1] : getDomainOfStackGroups(stackGroups[axisId].stackGroups, dataStartIndex, dataEndIndex);\n      } else {\n        domain = getDomainOfItemsWithSameAxis(displayedData, graphicalItems.filter(function (item) {\n          return item.props[axisIdKey] === axisId && !item.props.hide;\n        }), type, true);\n      }\n\n      if (type === 'number') {\n        // To detect wether there is any reference lines whose props alwaysShow is true\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType, ticks);\n\n        if (child.props.domain) {\n          domain = parseSpecifiedDomain(child.props.domain, domain, allowDataOverflow);\n        }\n      } else if (type === 'category' && child.props.domain) {\n        var axisDomain = child.props.domain;\n        var isDomainValidate = domain.every(function (entry) {\n          return axisDomain.indexOf(entry) >= 0;\n        });\n\n        if (isDomainValidate) {\n          domain = axisDomain;\n        }\n      }\n\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, axisId, _objectSpread(_objectSpread({}, child.props), {}, {\n        axisType: axisType,\n        domain: domain,\n        categoricalDomain: categoricalDomain,\n        duplicateDomain: duplicateDomain,\n        originalDomain: child.props.domain,\n        isCategorical: isCategorical,\n        layout: layout\n      })));\n    }\n\n    return result;\n  }, {});\n  return axisMap;\n};\n/**\n * Get the configuration of axis by the options of item,\n * this kind of axis does not display in chart\n * @param  {Object} props         Latest props\n * @param  {Array} graphicalItems The instances of item\n * @param  {ReactElement} Axis    Axis Component\n * @param  {String} axisType      The type of axis, xAxis - x-axis, yAxis - y-axis\n * @param  {String} axisIdKey     The unique id of an axis\n * @param  {Object} stackGroups   The items grouped by axisId and stackId\n * @param {Number} dataStartIndex The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex   The end index of the data series when a brush is applied\n * @return {Object}               Configuration\n */\n\n\nvar getAxisMapByItems = function getAxisMapByItems(props, _ref3) {\n  var graphicalItems = _ref3.graphicalItems,\n      Axis = _ref3.Axis,\n      axisType = _ref3.axisType,\n      axisIdKey = _ref3.axisIdKey,\n      stackGroups = _ref3.stackGroups,\n      dataStartIndex = _ref3.dataStartIndex,\n      dataEndIndex = _ref3.dataEndIndex;\n  var layout = props.layout,\n      children = props.children;\n  var displayedData = getDisplayedData(props.data, {\n    graphicalItems: graphicalItems,\n    dataStartIndex: dataStartIndex,\n    dataEndIndex: dataEndIndex\n  });\n  var len = displayedData.length;\n  var isCategorical = isCategoricalAxis(layout, axisType);\n  var index = -1; // The default type of x-axis is category axis,\n  // The default contents of x-axis is the serial numbers of data\n  // The default type of y-axis is number axis\n  // The default contents of y-axis is the domain of data\n\n  var axisMap = graphicalItems.reduce(function (result, child) {\n    var axisId = child.props[axisIdKey];\n\n    if (!result[axisId]) {\n      index++;\n      var domain;\n\n      if (isCategorical) {\n        domain = _range(0, len);\n      } else if (stackGroups && stackGroups[axisId] && stackGroups[axisId].hasStack) {\n        domain = getDomainOfStackGroups(stackGroups[axisId].stackGroups, dataStartIndex, dataEndIndex);\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType);\n      } else {\n        domain = parseSpecifiedDomain(Axis.defaultProps.domain, getDomainOfItemsWithSameAxis(displayedData, graphicalItems.filter(function (item) {\n          return item.props[axisIdKey] === axisId && !item.props.hide;\n        }), 'number'), Axis.defaultProps.allowDataOverflow);\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType);\n      }\n\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, axisId, _objectSpread(_objectSpread({\n        axisType: axisType\n      }, Axis.defaultProps), {}, {\n        hide: true,\n        orientation: _get(ORIENT_MAP, \"\".concat(axisType, \".\").concat(index % 2), null),\n        domain: domain,\n        originalDomain: Axis.defaultProps.domain,\n        isCategorical: isCategorical,\n        layout: layout // specify scale when no Axis\n        // scale: isCategorical ? 'band' : 'linear',\n\n      })));\n    }\n\n    return result;\n  }, {});\n  return axisMap;\n};\n/**\n * Get the configuration of all x-axis or y-axis\n * @param  {Object} props          Latest props\n * @param  {String} axisType       The type of axis\n * @param  {Array}  graphicalItems The instances of item\n * @param  {Object} stackGroups    The items grouped by axisId and stackId\n * @param {Number} dataStartIndex  The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex    The end index of the data series when a brush is applied\n * @return {Object}          Configuration\n */\n\n\nvar getAxisMap = function getAxisMap(props, _ref4) {\n  var _ref4$axisType = _ref4.axisType,\n      axisType = _ref4$axisType === void 0 ? 'xAxis' : _ref4$axisType,\n      AxisComp = _ref4.AxisComp,\n      graphicalItems = _ref4.graphicalItems,\n      stackGroups = _ref4.stackGroups,\n      dataStartIndex = _ref4.dataStartIndex,\n      dataEndIndex = _ref4.dataEndIndex;\n  var children = props.children;\n  var axisIdKey = \"\".concat(axisType, \"Id\"); // Get all the instance of Axis\n\n  var axes = findAllByType(children, AxisComp);\n  var axisMap = {};\n\n  if (axes && axes.length) {\n    axisMap = getAxisMapByAxes(props, {\n      axes: axes,\n      graphicalItems: graphicalItems,\n      axisType: axisType,\n      axisIdKey: axisIdKey,\n      stackGroups: stackGroups,\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n  } else if (graphicalItems && graphicalItems.length) {\n    axisMap = getAxisMapByItems(props, {\n      Axis: AxisComp,\n      graphicalItems: graphicalItems,\n      axisType: axisType,\n      axisIdKey: axisIdKey,\n      stackGroups: stackGroups,\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n  }\n\n  return axisMap;\n};\n\nvar tooltipTicksGenerator = function tooltipTicksGenerator(axisMap) {\n  var axis = getAnyElementOfObject(axisMap);\n  var tooltipTicks = getTicksOfAxis(axis, false, true);\n  return {\n    tooltipTicks: tooltipTicks,\n    orderedTooltipTicks: _sortBy(tooltipTicks, function (o) {\n      return o.coordinate;\n    }),\n    tooltipAxis: axis,\n    tooltipAxisBandSize: getBandSizeOfAxis(axis)\n  };\n};\n/**\n * Returns default, reset state for the categorical chart.\n * @param {Object} props Props object to use when creating the default state\n * @return {Object} Whole new state\n */\n\n\nvar createDefaultState = function createDefaultState(props) {\n  var children = props.children,\n      defaultShowTooltip = props.defaultShowTooltip;\n  var brushItem = findChildByType(children, Brush.displayName);\n  var startIndex = brushItem && brushItem.props && brushItem.props.startIndex || 0;\n  var endIndex = brushItem && brushItem.props && brushItem.props.endIndex || props.data && props.data.length - 1 || 0;\n  return {\n    chartX: 0,\n    chartY: 0,\n    dataStartIndex: startIndex,\n    dataEndIndex: endIndex,\n    activeTooltipIndex: -1,\n    isTooltipActive: !_isNil(defaultShowTooltip) ? defaultShowTooltip : false\n  };\n};\n\nvar hasGraphicalBarItem = function hasGraphicalBarItem(graphicalItems) {\n  if (!graphicalItems || !graphicalItems.length) {\n    return false;\n  }\n\n  return graphicalItems.some(function (item) {\n    var name = getDisplayName(item && item.type);\n    return name && name.indexOf('Bar') >= 0;\n  });\n};\n\nvar getAxisNameByLayout = function getAxisNameByLayout(layout) {\n  if (layout === 'horizontal') {\n    return {\n      numericAxisName: 'yAxis',\n      cateAxisName: 'xAxis'\n    };\n  }\n\n  if (layout === 'vertical') {\n    return {\n      numericAxisName: 'xAxis',\n      cateAxisName: 'yAxis'\n    };\n  }\n\n  if (layout === 'centric') {\n    return {\n      numericAxisName: 'radiusAxis',\n      cateAxisName: 'angleAxis'\n    };\n  }\n\n  return {\n    numericAxisName: 'angleAxis',\n    cateAxisName: 'radiusAxis'\n  };\n};\n/**\n * Calculate the offset of main part in the svg element\n * @param  {Object} props          Latest props\n * graphicalItems The instances of item\n * xAxisMap       The configuration of x-axis\n * yAxisMap       The configuration of y-axis\n * @param  {Object} prevLegendBBox          the boundary box of legend\n * @return {Object} The offset of main part in the svg element\n */\n\n\nvar calculateOffset = function calculateOffset(_ref5, prevLegendBBox) {\n  var props = _ref5.props,\n      graphicalItems = _ref5.graphicalItems,\n      _ref5$xAxisMap = _ref5.xAxisMap,\n      xAxisMap = _ref5$xAxisMap === void 0 ? {} : _ref5$xAxisMap,\n      _ref5$yAxisMap = _ref5.yAxisMap,\n      yAxisMap = _ref5$yAxisMap === void 0 ? {} : _ref5$yAxisMap;\n  var width = props.width,\n      height = props.height,\n      children = props.children;\n  var margin = props.margin || {};\n  var brushItem = findChildByType(children, Brush.displayName);\n  var legendItem = findChildByType(children, Legend.displayName);\n  var offsetH = Object.keys(yAxisMap).reduce(function (result, id) {\n    var entry = yAxisMap[id];\n    var orientation = entry.orientation;\n\n    if (!entry.mirror && !entry.hide) {\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, orientation, result[orientation] + entry.width));\n    }\n\n    return result;\n  }, {\n    left: margin.left || 0,\n    right: margin.right || 0\n  });\n  var offsetV = Object.keys(xAxisMap).reduce(function (result, id) {\n    var entry = xAxisMap[id];\n    var orientation = entry.orientation;\n\n    if (!entry.mirror && !entry.hide) {\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, orientation, _get(result, \"\".concat(orientation)) + entry.height));\n    }\n\n    return result;\n  }, {\n    top: margin.top || 0,\n    bottom: margin.bottom || 0\n  });\n\n  var offset = _objectSpread(_objectSpread({}, offsetV), offsetH);\n\n  var brushBottom = offset.bottom;\n\n  if (brushItem) {\n    offset.bottom += brushItem.props.height || Brush.defaultProps.height;\n  }\n\n  if (legendItem && prevLegendBBox) {\n    offset = appendOffsetOfLegend(offset, graphicalItems, props, prevLegendBBox);\n  }\n\n  return _objectSpread(_objectSpread({\n    brushBottom: brushBottom\n  }, offset), {}, {\n    width: width - offset.left - offset.right,\n    height: height - offset.top - offset.bottom\n  });\n};\n\nexport var generateCategoricalChart = function generateCategoricalChart(_ref6) {\n  var _class, _temp;\n\n  var chartName = _ref6.chartName,\n      GraphicalChild = _ref6.GraphicalChild,\n      _ref6$eventType = _ref6.eventType,\n      eventType = _ref6$eventType === void 0 ? 'axis' : _ref6$eventType,\n      axisComponents = _ref6.axisComponents,\n      legendContent = _ref6.legendContent,\n      formatAxisMap = _ref6.formatAxisMap,\n      defaultProps = _ref6.defaultProps;\n\n  var getFormatItems = function getFormatItems(props, currentState) {\n    var graphicalItems = currentState.graphicalItems,\n        stackGroups = currentState.stackGroups,\n        offset = currentState.offset,\n        updateId = currentState.updateId,\n        dataStartIndex = currentState.dataStartIndex,\n        dataEndIndex = currentState.dataEndIndex;\n    var barSize = props.barSize,\n        layout = props.layout,\n        barGap = props.barGap,\n        barCategoryGap = props.barCategoryGap,\n        globalMaxBarSize = props.maxBarSize;\n\n    var _getAxisNameByLayout = getAxisNameByLayout(layout),\n        numericAxisName = _getAxisNameByLayout.numericAxisName,\n        cateAxisName = _getAxisNameByLayout.cateAxisName;\n\n    var hasBar = hasGraphicalBarItem(graphicalItems);\n    var sizeList = hasBar && getBarSizeList({\n      barSize: barSize,\n      stackGroups: stackGroups\n    });\n    var formatedItems = [];\n    graphicalItems.forEach(function (item, index) {\n      var displayedData = getDisplayedData(props.data, {\n        dataStartIndex: dataStartIndex,\n        dataEndIndex: dataEndIndex\n      }, item);\n      var _item$props = item.props,\n          dataKey = _item$props.dataKey,\n          childMaxBarSize = _item$props.maxBarSize;\n      var numericAxisId = item.props[\"\".concat(numericAxisName, \"Id\")];\n      var cateAxisId = item.props[\"\".concat(cateAxisName, \"Id\")];\n      var axisObj = axisComponents.reduce(function (result, entry) {\n        var _objectSpread6;\n\n        var axisMap = currentState[\"\".concat(entry.axisType, \"Map\")];\n        var id = item.props[\"\".concat(entry.axisType, \"Id\")];\n        var axis = axisMap && axisMap[id];\n        return _objectSpread(_objectSpread({}, result), {}, (_objectSpread6 = {}, _defineProperty(_objectSpread6, entry.axisType, axis), _defineProperty(_objectSpread6, \"\".concat(entry.axisType, \"Ticks\"), getTicksOfAxis(axis)), _objectSpread6));\n      }, {});\n      var cateAxis = axisObj[cateAxisName];\n      var cateTicks = axisObj[\"\".concat(cateAxisName, \"Ticks\")];\n      var stackedData = stackGroups && stackGroups[numericAxisId] && stackGroups[numericAxisId].hasStack && getStackedDataOfItem(item, stackGroups[numericAxisId].stackGroups);\n      var itemIsBar = getDisplayName(item.type).indexOf('Bar') >= 0;\n      var bandSize = getBandSizeOfAxis(cateAxis, cateTicks);\n      var barPosition = [];\n\n      if (itemIsBar) {\n        var barBandSize = getBandSizeOfAxis(cateAxis, cateTicks, true); // 如果是bar，计算bar的位置\n\n        var maxBarSize = _isNil(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;\n        barPosition = getBarPosition({\n          barGap: barGap,\n          barCategoryGap: barCategoryGap,\n          bandSize: barBandSize !== bandSize ? barBandSize : bandSize,\n          sizeList: sizeList[cateAxisId],\n          maxBarSize: maxBarSize\n        });\n\n        if (barBandSize !== bandSize) {\n          barPosition = barPosition.map(function (pos) {\n            return _objectSpread(_objectSpread({}, pos), {}, {\n              position: _objectSpread(_objectSpread({}, pos.position), {}, {\n                offset: pos.position.offset - barBandSize / 2\n              })\n            });\n          });\n        }\n      }\n\n      var componsedFn = item && item.type && item.type.getComposedData;\n\n      if (componsedFn) {\n        var _objectSpread7;\n\n        formatedItems.push({\n          props: _objectSpread(_objectSpread({}, componsedFn(_objectSpread(_objectSpread({}, axisObj), {}, {\n            displayedData: displayedData,\n            props: props,\n            dataKey: dataKey,\n            item: item,\n            bandSize: bandSize,\n            barPosition: barPosition,\n            offset: offset,\n            stackedData: stackedData,\n            layout: layout,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex\n          }))), {}, (_objectSpread7 = {\n            key: item.key || \"item-\".concat(index)\n          }, _defineProperty(_objectSpread7, numericAxisName, axisObj[numericAxisName]), _defineProperty(_objectSpread7, cateAxisName, axisObj[cateAxisName]), _defineProperty(_objectSpread7, \"animationId\", updateId), _objectSpread7)),\n          childIndex: parseChildIndex(item, props.children),\n          item: item\n        });\n      }\n    });\n    return formatedItems;\n  };\n  /**\n   * The AxisMaps are expensive to render on large data sets\n   * so provide the ability to store them in state and only update them when necessary\n   * they are dependent upon the start and end index of\n   * the brush so it's important that this method is called _after_\n   * the state is updated with any new start/end indices\n   *\n   * @param {Object} props          The props object to be used for updating the axismaps\n   * dataStartIndex: The start index of the data series when a brush is applied\n   * dataEndIndex: The end index of the data series when a brush is applied\n   * updateId: The update id\n   * @param {Object} prevState      Prev state\n   * @return {Object} state New state to set\n   */\n\n\n  var updateStateOfAxisMapsOffsetAndStackGroups = function updateStateOfAxisMapsOffsetAndStackGroups(_ref7, prevState) {\n    var props = _ref7.props,\n        dataStartIndex = _ref7.dataStartIndex,\n        dataEndIndex = _ref7.dataEndIndex,\n        updateId = _ref7.updateId;\n\n    if (!validateWidthHeight({\n      props: props\n    })) {\n      return null;\n    }\n\n    var children = props.children,\n        layout = props.layout,\n        stackOffset = props.stackOffset,\n        data = props.data,\n        reverseStackOrder = props.reverseStackOrder;\n\n    var _getAxisNameByLayout2 = getAxisNameByLayout(layout),\n        numericAxisName = _getAxisNameByLayout2.numericAxisName,\n        cateAxisName = _getAxisNameByLayout2.cateAxisName;\n\n    var graphicalItems = findAllByType(children, GraphicalChild);\n    var stackGroups = getStackGroupsByAxisId(data, graphicalItems, \"\".concat(numericAxisName, \"Id\"), \"\".concat(cateAxisName, \"Id\"), stackOffset, reverseStackOrder);\n    var axisObj = axisComponents.reduce(function (result, entry) {\n      var name = \"\".concat(entry.axisType, \"Map\");\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, name, getAxisMap(props, _objectSpread(_objectSpread({}, entry), {}, {\n        graphicalItems: graphicalItems,\n        stackGroups: entry.axisType === numericAxisName && stackGroups,\n        dataStartIndex: dataStartIndex,\n        dataEndIndex: dataEndIndex\n      }))));\n    }, {});\n    var offset = calculateOffset(_objectSpread(_objectSpread({}, axisObj), {}, {\n      props: props,\n      graphicalItems: graphicalItems\n    }), prevState === null || prevState === void 0 ? void 0 : prevState.legendBBox);\n    Object.keys(axisObj).forEach(function (key) {\n      axisObj[key] = formatAxisMap(props, axisObj[key], offset, key.replace('Map', ''), chartName);\n    });\n    var cateAxisMap = axisObj[\"\".concat(cateAxisName, \"Map\")];\n    var ticksObj = tooltipTicksGenerator(cateAxisMap);\n    var formatedGraphicalItems = getFormatItems(props, _objectSpread(_objectSpread({}, axisObj), {}, {\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex,\n      updateId: updateId,\n      graphicalItems: graphicalItems,\n      stackGroups: stackGroups,\n      offset: offset\n    }));\n    return _objectSpread(_objectSpread({\n      formatedGraphicalItems: formatedGraphicalItems,\n      graphicalItems: graphicalItems,\n      offset: offset,\n      stackGroups: stackGroups\n    }, ticksObj), axisObj);\n  };\n\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inherits(CategoricalChartWrapper, _Component);\n\n    var _super = _createSuper(CategoricalChartWrapper); // todo join specific chart propTypes\n\n\n    function CategoricalChartWrapper(_props) {\n      var _this;\n\n      _classCallCheck(this, CategoricalChartWrapper);\n\n      _this = _super.call(this, _props);\n      _this.uniqueChartId = void 0;\n      _this.clipPathId = void 0;\n      _this.legendInstance = void 0;\n      _this.deferId = void 0;\n      _this.container = void 0;\n\n      _this.clearDeferId = function () {\n        if (!_isNil(_this.deferId) && deferClear) {\n          deferClear(_this.deferId);\n        }\n\n        _this.deferId = null;\n      };\n\n      _this.handleLegendBBoxUpdate = function (box) {\n        if (box && _this.legendInstance) {\n          var _this$state = _this.state,\n              dataStartIndex = _this$state.dataStartIndex,\n              dataEndIndex = _this$state.dataEndIndex,\n              updateId = _this$state.updateId;\n\n          _this.setState(_objectSpread({\n            legendBBox: box\n          }, updateStateOfAxisMapsOffsetAndStackGroups({\n            props: _this.props,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex,\n            updateId: updateId\n          }, _objectSpread(_objectSpread({}, _this.state), {}, {\n            legendBBox: box\n          }))));\n        }\n      };\n\n      _this.handleReceiveSyncEvent = function (cId, chartId, data) {\n        var syncId = _this.props.syncId;\n\n        if (syncId === cId && chartId !== _this.uniqueChartId) {\n          _this.clearDeferId();\n\n          _this.deferId = defer && defer(_this.applySyncEvent.bind(_assertThisInitialized(_this), data));\n        }\n      };\n\n      _this.handleBrushChange = function (_ref8) {\n        var startIndex = _ref8.startIndex,\n            endIndex = _ref8.endIndex; // Only trigger changes if the extents of the brush have actually changed\n\n        if (startIndex !== _this.state.dataStartIndex || endIndex !== _this.state.dataEndIndex) {\n          var updateId = _this.state.updateId;\n\n          _this.setState(function () {\n            return _objectSpread({\n              dataStartIndex: startIndex,\n              dataEndIndex: endIndex\n            }, updateStateOfAxisMapsOffsetAndStackGroups({\n              props: _this.props,\n              dataStartIndex: startIndex,\n              dataEndIndex: endIndex,\n              updateId: updateId\n            }, _this.state));\n          });\n\n          _this.triggerSyncEvent({\n            dataStartIndex: startIndex,\n            dataEndIndex: endIndex\n          });\n        }\n      };\n\n      _this.handleMouseEnter = function (e) {\n        var onMouseEnter = _this.props.onMouseEnter;\n\n        var mouse = _this.getMouseInfo(e);\n\n        if (mouse) {\n          var nextState = _objectSpread(_objectSpread({}, mouse), {}, {\n            isTooltipActive: true\n          });\n\n          _this.setState(nextState);\n\n          _this.triggerSyncEvent(nextState);\n\n          if (_isFunction(onMouseEnter)) {\n            onMouseEnter(nextState, e);\n          }\n        }\n      };\n\n      _this.triggeredAfterMouseMove = function (e) {\n        var onMouseMove = _this.props.onMouseMove;\n\n        var mouse = _this.getMouseInfo(e);\n\n        var nextState = mouse ? _objectSpread(_objectSpread({}, mouse), {}, {\n          isTooltipActive: true\n        }) : {\n          isTooltipActive: false\n        };\n\n        _this.setState(nextState);\n\n        _this.triggerSyncEvent(nextState);\n\n        if (_isFunction(onMouseMove)) {\n          onMouseMove(nextState, e);\n        }\n      };\n\n      _this.handleItemMouseEnter = function (el) {\n        _this.setState(function () {\n          return {\n            isTooltipActive: true,\n            activeItem: el,\n            activePayload: el.tooltipPayload,\n            activeCoordinate: el.tooltipPosition || {\n              x: el.cx,\n              y: el.cy\n            }\n          };\n        });\n      };\n\n      _this.handleItemMouseLeave = function () {\n        _this.setState(function () {\n          return {\n            isTooltipActive: false\n          };\n        });\n      };\n\n      _this.handleMouseMove = function (e) {\n        if (e && _isFunction(e.persist)) {\n          e.persist();\n        }\n\n        _this.triggeredAfterMouseMove(e);\n      };\n\n      _this.handleMouseLeave = function (e) {\n        var onMouseLeave = _this.props.onMouseLeave;\n        var nextState = {\n          isTooltipActive: false\n        };\n\n        _this.setState(nextState);\n\n        _this.triggerSyncEvent(nextState);\n\n        if (_isFunction(onMouseLeave)) {\n          onMouseLeave(nextState, e);\n        }\n\n        _this.cancelThrottledTriggerAfterMouseMove();\n      };\n\n      _this.handleOuterEvent = function (e) {\n        var eventName = getReactEventByType(e);\n\n        var event = _get(_this.props, \"\".concat(eventName));\n\n        if (eventName && _isFunction(event)) {\n          var mouse;\n\n          if (/.*touch.*/i.test(eventName)) {\n            mouse = _this.getMouseInfo(e.changedTouches[0]);\n          } else {\n            mouse = _this.getMouseInfo(e);\n          }\n\n          var handler = event;\n          handler(mouse, e);\n        }\n      };\n\n      _this.handleClick = function (e) {\n        var onClick = _this.props.onClick;\n\n        var mouse = _this.getMouseInfo(e);\n\n        if (mouse) {\n          var nextState = _objectSpread(_objectSpread({}, mouse), {}, {\n            isTooltipActive: true\n          });\n\n          _this.setState(nextState);\n\n          _this.triggerSyncEvent(nextState);\n\n          if (_isFunction(onClick)) {\n            onClick(nextState, e);\n          }\n        }\n      };\n\n      _this.handleMouseDown = function (e) {\n        var onMouseDown = _this.props.onMouseDown;\n\n        if (_isFunction(onMouseDown)) {\n          var mouse = _this.getMouseInfo(e);\n\n          onMouseDown(mouse, e);\n        }\n      };\n\n      _this.handleMouseUp = function (e) {\n        var onMouseUp = _this.props.onMouseUp;\n\n        if (_isFunction(onMouseUp)) {\n          var mouse = _this.getMouseInfo(e);\n\n          onMouseUp(mouse, e);\n        }\n      };\n\n      _this.handleTouchMove = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseMove(e.changedTouches[0]);\n        }\n      };\n\n      _this.handleTouchStart = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseDown(e.changedTouches[0]);\n        }\n      };\n\n      _this.handleTouchEnd = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseUp(e.changedTouches[0]);\n        }\n      };\n\n      _this.verticalCoordinatesGenerator = function (_ref9) {\n        var xAxis = _ref9.xAxis,\n            width = _ref9.width,\n            height = _ref9.height,\n            offset = _ref9.offset;\n        return getCoordinatesOfGrid(CartesianAxis.getTicks(_objectSpread(_objectSpread(_objectSpread({}, CartesianAxis.defaultProps), xAxis), {}, {\n          ticks: getTicksOfAxis(xAxis, true),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          }\n        })), offset.left, offset.left + offset.width);\n      };\n\n      _this.horizontalCoordinatesGenerator = function (_ref10) {\n        var yAxis = _ref10.yAxis,\n            width = _ref10.width,\n            height = _ref10.height,\n            offset = _ref10.offset;\n        return getCoordinatesOfGrid(CartesianAxis.getTicks(_objectSpread(_objectSpread(_objectSpread({}, CartesianAxis.defaultProps), yAxis), {}, {\n          ticks: getTicksOfAxis(yAxis, true),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          }\n        })), offset.top, offset.top + offset.height);\n      };\n\n      _this.axesTicksGenerator = function (axis) {\n        return getTicksOfAxis(axis, true);\n      };\n\n      _this.renderCursor = function (element) {\n        var _this$state2 = _this.state,\n            isTooltipActive = _this$state2.isTooltipActive,\n            activeCoordinate = _this$state2.activeCoordinate,\n            activePayload = _this$state2.activePayload,\n            offset = _this$state2.offset,\n            activeTooltipIndex = _this$state2.activeTooltipIndex;\n\n        if (!element || !element.props.cursor || !isTooltipActive || !activeCoordinate) {\n          return null;\n        }\n\n        var layout = _this.props.layout;\n        var restProps;\n        var cursorComp = Curve;\n\n        if (chartName === 'ScatterChart') {\n          restProps = activeCoordinate;\n          cursorComp = Cross;\n        } else if (chartName === 'BarChart') {\n          restProps = _this.getCursorRectangle();\n          cursorComp = Rectangle;\n        } else if (layout === 'radial') {\n          var _this$getCursorPoints = _this.getCursorPoints(),\n              cx = _this$getCursorPoints.cx,\n              cy = _this$getCursorPoints.cy,\n              radius = _this$getCursorPoints.radius,\n              startAngle = _this$getCursorPoints.startAngle,\n              endAngle = _this$getCursorPoints.endAngle;\n\n          restProps = {\n            cx: cx,\n            cy: cy,\n            startAngle: startAngle,\n            endAngle: endAngle,\n            innerRadius: radius,\n            outerRadius: radius\n          };\n          cursorComp = Sector;\n        } else {\n          restProps = {\n            points: _this.getCursorPoints()\n          };\n          cursorComp = Curve;\n        }\n\n        var key = element.key || '_recharts-cursor';\n\n        var cursorProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n          stroke: '#ccc',\n          pointerEvents: 'none'\n        }, offset), restProps), filterProps(element.props.cursor)), {}, {\n          payload: activePayload,\n          payloadIndex: activeTooltipIndex,\n          key: key,\n          className: 'recharts-tooltip-cursor'\n        });\n\n        return /*#__PURE__*/isValidElement(element.props.cursor) ? /*#__PURE__*/cloneElement(element.props.cursor, cursorProps) : /*#__PURE__*/createElement(cursorComp, cursorProps);\n      };\n\n      _this.renderPolarAxis = function (element, displayName, index) {\n        var axisType = _get(element, 'type.axisType');\n\n        var axisMap = _get(_this.state, \"\".concat(axisType, \"Map\"));\n\n        var axisOption = axisMap[element.props[\"\".concat(axisType, \"Id\")]];\n        return /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, axisOption), {}, {\n          className: axisType,\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          ticks: getTicksOfAxis(axisOption, true)\n        }));\n      };\n\n      _this.renderXAxis = function (element, displayName, index) {\n        var xAxisMap = _this.state.xAxisMap;\n        var axisObj = xAxisMap[element.props.xAxisId];\n        return _this.renderAxis(axisObj, element, displayName, index);\n      };\n\n      _this.renderYAxis = function (element, displayName, index) {\n        var yAxisMap = _this.state.yAxisMap;\n        var axisObj = yAxisMap[element.props.yAxisId];\n        return _this.renderAxis(axisObj, element, displayName, index);\n      };\n\n      _this.renderGrid = function (element) {\n        var _this$state3 = _this.state,\n            xAxisMap = _this$state3.xAxisMap,\n            yAxisMap = _this$state3.yAxisMap,\n            offset = _this$state3.offset;\n        var _this$props = _this.props,\n            width = _this$props.width,\n            height = _this$props.height;\n        var xAxis = getAnyElementOfObject(xAxisMap);\n\n        var yAxisWithFiniteDomain = _find(yAxisMap, function (axis) {\n          return _every(axis.domain, isFinit);\n        });\n\n        var yAxis = yAxisWithFiniteDomain || getAnyElementOfObject(yAxisMap);\n        var props = element.props || {};\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || 'grid',\n          x: isNumber(props.x) ? props.x : offset.left,\n          y: isNumber(props.y) ? props.y : offset.top,\n          width: isNumber(props.width) ? props.width : offset.width,\n          height: isNumber(props.height) ? props.height : offset.height,\n          xAxis: xAxis,\n          yAxis: yAxis,\n          offset: offset,\n          chartWidth: width,\n          chartHeight: height,\n          verticalCoordinatesGenerator: props.verticalCoordinatesGenerator || _this.verticalCoordinatesGenerator,\n          horizontalCoordinatesGenerator: props.horizontalCoordinatesGenerator || _this.horizontalCoordinatesGenerator\n        });\n      };\n\n      _this.renderPolarGrid = function (element) {\n        var radialLines = element.props.radialLines;\n        var _this$state4 = _this.state,\n            radiusAxisMap = _this$state4.radiusAxisMap,\n            angleAxisMap = _this$state4.angleAxisMap;\n        var radiusAxis = getAnyElementOfObject(radiusAxisMap);\n        var angleAxis = getAnyElementOfObject(angleAxisMap);\n        var cx = angleAxis.cx,\n            cy = angleAxis.cy,\n            innerRadius = angleAxis.innerRadius,\n            outerRadius = angleAxis.outerRadius;\n        return /*#__PURE__*/cloneElement(element, {\n          polarAngles: getTicksOfAxis(angleAxis, true).map(function (entry) {\n            return entry.coordinate;\n          }),\n          polarRadius: getTicksOfAxis(radiusAxis, true).map(function (entry) {\n            return entry.coordinate;\n          }),\n          cx: cx,\n          cy: cy,\n          innerRadius: innerRadius,\n          outerRadius: outerRadius,\n          key: element.key || 'polar-grid',\n          radialLines: radialLines\n        });\n      };\n\n      _this.renderLegend = function () {\n        var formatedGraphicalItems = _this.state.formatedGraphicalItems;\n        var _this$props2 = _this.props,\n            children = _this$props2.children,\n            width = _this$props2.width,\n            height = _this$props2.height;\n        var margin = _this.props.margin || {};\n        var legendWidth = width - (margin.left || 0) - (margin.right || 0);\n        var props = getLegendProps({\n          children: children,\n          formatedGraphicalItems: formatedGraphicalItems,\n          legendWidth: legendWidth,\n          legendContent: legendContent\n        });\n\n        if (!props) {\n          return null;\n        }\n\n        var item = props.item,\n            otherProps = _objectWithoutProperties(props, [\"item\"]);\n\n        return /*#__PURE__*/cloneElement(item, _objectSpread(_objectSpread({}, otherProps), {}, {\n          chartWidth: width,\n          chartHeight: height,\n          margin: margin,\n          ref: function ref(legend) {\n            _this.legendInstance = legend;\n          },\n          onBBoxUpdate: _this.handleLegendBBoxUpdate\n        }));\n      };\n\n      _this.renderTooltip = function () {\n        var children = _this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n\n        if (!tooltipItem) {\n          return null;\n        }\n\n        var _this$state5 = _this.state,\n            isTooltipActive = _this$state5.isTooltipActive,\n            activeCoordinate = _this$state5.activeCoordinate,\n            activePayload = _this$state5.activePayload,\n            activeLabel = _this$state5.activeLabel,\n            offset = _this$state5.offset;\n        return /*#__PURE__*/cloneElement(tooltipItem, {\n          viewBox: _objectSpread(_objectSpread({}, offset), {}, {\n            x: offset.left,\n            y: offset.top\n          }),\n          active: isTooltipActive,\n          label: activeLabel,\n          payload: isTooltipActive ? activePayload : [],\n          coordinate: activeCoordinate\n        });\n      };\n\n      _this.renderBrush = function (element) {\n        var _this$props3 = _this.props,\n            margin = _this$props3.margin,\n            data = _this$props3.data;\n        var _this$state6 = _this.state,\n            offset = _this$state6.offset,\n            dataStartIndex = _this$state6.dataStartIndex,\n            dataEndIndex = _this$state6.dataEndIndex,\n            updateId = _this$state6.updateId; // TODO: update brush when children update\n\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || '_recharts-brush',\n          onChange: combineEventHandlers(_this.handleBrushChange, null, element.props.onChange),\n          data: data,\n          x: isNumber(element.props.x) ? element.props.x : offset.left,\n          y: isNumber(element.props.y) ? element.props.y : offset.top + offset.height + offset.brushBottom - (margin.bottom || 0),\n          width: isNumber(element.props.width) ? element.props.width : offset.width,\n          startIndex: dataStartIndex,\n          endIndex: dataEndIndex,\n          updateId: \"brush-\".concat(updateId)\n        });\n      };\n\n      _this.renderReferenceElement = function (element, displayName, index) {\n        if (!element) {\n          return null;\n        }\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            clipPathId = _assertThisInitialize.clipPathId;\n\n        var _this$state7 = _this.state,\n            xAxisMap = _this$state7.xAxisMap,\n            yAxisMap = _this$state7.yAxisMap,\n            offset = _this$state7.offset;\n        var _element$props = element.props,\n            xAxisId = _element$props.xAxisId,\n            yAxisId = _element$props.yAxisId;\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          xAxis: xAxisMap[xAxisId],\n          yAxis: yAxisMap[yAxisId],\n          viewBox: {\n            x: offset.left,\n            y: offset.top,\n            width: offset.width,\n            height: offset.height\n          },\n          clipPathId: clipPathId\n        });\n      };\n\n      _this.renderActivePoints = function (_ref11) {\n        var item = _ref11.item,\n            activePoint = _ref11.activePoint,\n            basePoint = _ref11.basePoint,\n            childIndex = _ref11.childIndex,\n            isRange = _ref11.isRange;\n        var result = [];\n        var key = item.props.key;\n        var _item$item$props = item.item.props,\n            activeDot = _item$item$props.activeDot,\n            dataKey = _item$item$props.dataKey;\n\n        var dotProps = _objectSpread(_objectSpread({\n          index: childIndex,\n          dataKey: dataKey,\n          cx: activePoint.x,\n          cy: activePoint.y,\n          r: 4,\n          fill: getMainColorOfGraphicItem(item.item),\n          strokeWidth: 2,\n          stroke: '#fff',\n          payload: activePoint.payload,\n          value: activePoint.value,\n          key: \"\".concat(key, \"-activePoint-\").concat(childIndex)\n        }, filterProps(activeDot)), adaptEventHandlers(activeDot));\n\n        result.push(CategoricalChartWrapper.renderActiveDot(activeDot, dotProps));\n\n        if (basePoint) {\n          result.push(CategoricalChartWrapper.renderActiveDot(activeDot, _objectSpread(_objectSpread({}, dotProps), {}, {\n            cx: basePoint.x,\n            cy: basePoint.y,\n            key: \"\".concat(key, \"-basePoint-\").concat(childIndex)\n          })));\n        } else if (isRange) {\n          result.push(null);\n        }\n\n        return result;\n      };\n\n      _this.renderGraphicChild = function (element, displayName, index) {\n        var item = _this.filterFormatItem(element, displayName, index);\n\n        if (!item) {\n          return null;\n        }\n\n        var _this$state8 = _this.state,\n            isTooltipActive = _this$state8.isTooltipActive,\n            tooltipAxis = _this$state8.tooltipAxis,\n            activeTooltipIndex = _this$state8.activeTooltipIndex,\n            activeLabel = _this$state8.activeLabel;\n        var children = _this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n        var _item$props2 = item.props,\n            points = _item$props2.points,\n            isRange = _item$props2.isRange,\n            baseLine = _item$props2.baseLine;\n        var _item$item$props2 = item.item.props,\n            activeDot = _item$item$props2.activeDot,\n            hide = _item$item$props2.hide;\n        var hasActive = !hide && isTooltipActive && tooltipItem && activeDot && activeTooltipIndex >= 0;\n        var isTooltipTriggerByClick = tooltipItem && tooltipItem.props.trigger === 'click';\n        var itemEvents = isTooltipTriggerByClick ? {\n          onClick: combineEventHandlers(_this.handleItemMouseEnter, null, element.props.onCLick)\n        } : {\n          onMouseLeave: combineEventHandlers(_this.handleItemMouseLeave, null, element.props.onMouseLeave),\n          onMouseEnter: combineEventHandlers(_this.handleItemMouseEnter, null, element.props.onMouseEnter)\n        };\n        var graphicalItem = /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, item.props), itemEvents));\n\n        function findWithPayload(entry) {\n          // TODO needs to verify dataKey is Function\n          return typeof tooltipAxis.dataKey === 'function' ? tooltipAxis.dataKey(entry.payload) : null;\n        }\n\n        if (hasActive) {\n          var activePoint, basePoint;\n\n          if (tooltipAxis.dataKey && !tooltipAxis.allowDuplicatedCategory) {\n            // number transform to string\n            var specifiedKey = typeof tooltipAxis.dataKey === 'function' ? findWithPayload : 'payload.'.concat(tooltipAxis.dataKey.toString());\n            activePoint = findEntryInArray(points, specifiedKey, activeLabel);\n            basePoint = isRange && baseLine && findEntryInArray(baseLine, specifiedKey, activeLabel);\n          } else {\n            activePoint = points[activeTooltipIndex];\n            basePoint = isRange && baseLine && baseLine[activeTooltipIndex];\n          }\n\n          if (!_isNil(activePoint)) {\n            return [graphicalItem].concat(_toConsumableArray(_this.renderActivePoints({\n              item: item,\n              activePoint: activePoint,\n              basePoint: basePoint,\n              childIndex: activeTooltipIndex,\n              isRange: isRange\n            })));\n          }\n        }\n\n        if (isRange) {\n          return [graphicalItem, null, null];\n        }\n\n        return [graphicalItem, null];\n      };\n\n      _this.renderCustomized = function (element) {\n        return /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, _this.props), _this.state));\n      };\n\n      _this.uniqueChartId = _isNil(_props.id) ? uniqueId('recharts') : _props.id;\n      _this.clipPathId = \"\".concat(_this.uniqueChartId, \"-clip\");\n\n      if (_props.throttleDelay) {\n        _this.triggeredAfterMouseMove = _throttle(_this.triggeredAfterMouseMove, _props.throttleDelay);\n      }\n\n      _this.state = {};\n      return _this;\n    }\n    /* eslint-disable  react/no-did-mount-set-state */\n\n\n    _createClass(CategoricalChartWrapper, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (!_isNil(this.props.syncId)) {\n          this.addListener();\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        // add syncId\n        if (_isNil(prevProps.syncId) && !_isNil(this.props.syncId)) {\n          this.addListener();\n        } // remove syncId\n\n\n        if (!_isNil(this.props.syncId) && _isNil(prevProps.syncId)) {\n          this.removeListener();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.clearDeferId();\n\n        if (!_isNil(this.props.syncId)) {\n          this.removeListener();\n        }\n\n        this.cancelThrottledTriggerAfterMouseMove();\n      }\n    }, {\n      key: \"cancelThrottledTriggerAfterMouseMove\",\n      value: function cancelThrottledTriggerAfterMouseMove() {\n        if (typeof this.triggeredAfterMouseMove.cancel === 'function') {\n          this.triggeredAfterMouseMove.cancel();\n        }\n      }\n      /**\n       * Get the information of mouse in chart, return null when the mouse is not in the chart\n       * @param  {Object} event    The event object\n       * @return {Object}          Mouse data\n       */\n\n    }, {\n      key: \"getMouseInfo\",\n      value: function getMouseInfo(event) {\n        if (!this.container) {\n          return null;\n        }\n\n        var containerOffset = getOffset(this.container);\n        var e = calculateChartCoordinate(event, containerOffset);\n        var rangeObj = this.inRange(e.chartX, e.chartY);\n\n        if (!rangeObj) {\n          return null;\n        }\n\n        var _this$state9 = this.state,\n            xAxisMap = _this$state9.xAxisMap,\n            yAxisMap = _this$state9.yAxisMap;\n\n        if (eventType !== 'axis' && xAxisMap && yAxisMap) {\n          var xScale = getAnyElementOfObject(xAxisMap).scale;\n          var yScale = getAnyElementOfObject(yAxisMap).scale;\n          var xValue = xScale && xScale.invert ? xScale.invert(e.chartX) : null;\n          var yValue = yScale && yScale.invert ? yScale.invert(e.chartY) : null;\n          return _objectSpread(_objectSpread({}, e), {}, {\n            xValue: xValue,\n            yValue: yValue\n          });\n        }\n\n        var toolTipData = getTooltipData(this.state, this.props.data, this.props.layout, rangeObj);\n\n        if (toolTipData) {\n          return _objectSpread(_objectSpread({}, e), toolTipData);\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getCursorRectangle\",\n      value: function getCursorRectangle() {\n        var layout = this.props.layout;\n        var _this$state10 = this.state,\n            activeCoordinate = _this$state10.activeCoordinate,\n            offset = _this$state10.offset,\n            tooltipAxisBandSize = _this$state10.tooltipAxisBandSize;\n        var halfSize = tooltipAxisBandSize / 2;\n        return {\n          stroke: 'none',\n          fill: '#ccc',\n          x: layout === 'horizontal' ? activeCoordinate.x - halfSize : offset.left + 0.5,\n          y: layout === 'horizontal' ? offset.top + 0.5 : activeCoordinate.y - halfSize,\n          width: layout === 'horizontal' ? tooltipAxisBandSize : offset.width - 1,\n          height: layout === 'horizontal' ? offset.height - 1 : tooltipAxisBandSize\n        };\n      }\n    }, {\n      key: \"getCursorPoints\",\n      value: function getCursorPoints() {\n        var layout = this.props.layout;\n        var _this$state11 = this.state,\n            activeCoordinate = _this$state11.activeCoordinate,\n            offset = _this$state11.offset;\n        var x1, y1, x2, y2;\n\n        if (layout === 'horizontal') {\n          x1 = activeCoordinate.x;\n          x2 = x1;\n          y1 = offset.top;\n          y2 = offset.top + offset.height;\n        } else if (layout === 'vertical') {\n          y1 = activeCoordinate.y;\n          y2 = y1;\n          x1 = offset.left;\n          x2 = offset.left + offset.width;\n        } else if (!_isNil(activeCoordinate.cx) || !_isNil(activeCoordinate.cy)) {\n          if (layout === 'centric') {\n            var cx = activeCoordinate.cx,\n                cy = activeCoordinate.cy,\n                innerRadius = activeCoordinate.innerRadius,\n                outerRadius = activeCoordinate.outerRadius,\n                angle = activeCoordinate.angle;\n            var innerPoint = polarToCartesian(cx, cy, innerRadius, angle);\n            var outerPoint = polarToCartesian(cx, cy, outerRadius, angle);\n            x1 = innerPoint.x;\n            y1 = innerPoint.y;\n            x2 = outerPoint.x;\n            y2 = outerPoint.y;\n          } else {\n            var _cx = activeCoordinate.cx,\n                _cy = activeCoordinate.cy,\n                radius = activeCoordinate.radius,\n                startAngle = activeCoordinate.startAngle,\n                endAngle = activeCoordinate.endAngle;\n            var startPoint = polarToCartesian(_cx, _cy, radius, startAngle);\n            var endPoint = polarToCartesian(_cx, _cy, radius, endAngle);\n            return {\n              points: [startPoint, endPoint],\n              cx: _cx,\n              cy: _cy,\n              radius: radius,\n              startAngle: startAngle,\n              endAngle: endAngle\n            };\n          }\n        }\n\n        return [{\n          x: x1,\n          y: y1\n        }, {\n          x: x2,\n          y: y2\n        }];\n      }\n    }, {\n      key: \"inRange\",\n      value: function inRange(x, y) {\n        var layout = this.props.layout;\n\n        if (layout === 'horizontal' || layout === 'vertical') {\n          var offset = this.state.offset;\n          var isInRange = x >= offset.left && x <= offset.left + offset.width && y >= offset.top && y <= offset.top + offset.height;\n          return isInRange ? {\n            x: x,\n            y: y\n          } : null;\n        }\n\n        var _this$state12 = this.state,\n            angleAxisMap = _this$state12.angleAxisMap,\n            radiusAxisMap = _this$state12.radiusAxisMap;\n\n        if (angleAxisMap && radiusAxisMap) {\n          var angleAxis = getAnyElementOfObject(angleAxisMap);\n          return inRangeOfSector({\n            x: x,\n            y: y\n          }, angleAxis);\n        }\n\n        return null;\n      }\n    }, {\n      key: \"parseEventsOfWrapper\",\n      value: function parseEventsOfWrapper() {\n        var children = this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n        var tooltipEvents = {};\n\n        if (tooltipItem && eventType === 'axis') {\n          if (tooltipItem.props.trigger === 'click') {\n            tooltipEvents = {\n              onClick: this.handleClick\n            };\n          } else {\n            tooltipEvents = {\n              onMouseEnter: this.handleMouseEnter,\n              onMouseMove: this.handleMouseMove,\n              onMouseLeave: this.handleMouseLeave,\n              onTouchMove: this.handleTouchMove,\n              onTouchStart: this.handleTouchStart,\n              onTouchEnd: this.handleTouchEnd\n            };\n          }\n        }\n\n        var outerEvents = adaptEventHandlers(this.props, this.handleOuterEvent);\n        return _objectSpread(_objectSpread({}, outerEvents), tooltipEvents);\n      }\n      /* eslint-disable  no-underscore-dangle */\n\n    }, {\n      key: \"addListener\",\n      value: function addListener() {\n        eventCenter.on(SYNC_EVENT, this.handleReceiveSyncEvent);\n\n        if (eventCenter.setMaxListeners && eventCenter._maxListeners) {\n          eventCenter.setMaxListeners(eventCenter._maxListeners + 1);\n        }\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener() {\n        eventCenter.removeListener(SYNC_EVENT, this.handleReceiveSyncEvent);\n\n        if (eventCenter.setMaxListeners && eventCenter._maxListeners) {\n          eventCenter.setMaxListeners(eventCenter._maxListeners - 1);\n        }\n      }\n    }, {\n      key: \"triggerSyncEvent\",\n      value: function triggerSyncEvent(data) {\n        var syncId = this.props.syncId;\n\n        if (!_isNil(syncId)) {\n          eventCenter.emit(SYNC_EVENT, syncId, this.uniqueChartId, data);\n        }\n      }\n    }, {\n      key: \"applySyncEvent\",\n      value: function applySyncEvent(data) {\n        var layout = this.props.layout;\n        var updateId = this.state.updateId;\n        var dataStartIndex = data.dataStartIndex,\n            dataEndIndex = data.dataEndIndex;\n\n        if (!_isNil(data.dataStartIndex) || !_isNil(data.dataEndIndex)) {\n          this.setState(_objectSpread({\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex\n          }, updateStateOfAxisMapsOffsetAndStackGroups({\n            props: this.props,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex,\n            updateId: updateId\n          }, this.state)));\n        } else if (!_isNil(data.activeTooltipIndex)) {\n          var chartX = data.chartX,\n              chartY = data.chartY,\n              activeTooltipIndex = data.activeTooltipIndex;\n          var _this$state13 = this.state,\n              offset = _this$state13.offset,\n              tooltipTicks = _this$state13.tooltipTicks;\n\n          if (!offset) {\n            return;\n          }\n\n          var viewBox = _objectSpread(_objectSpread({}, offset), {}, {\n            x: offset.left,\n            y: offset.top\n          }); // When a categotical chart is combined with another chart, the value of chartX\n          // and chartY may beyond the boundaries.\n\n\n          var validateChartX = Math.min(chartX, viewBox.x + viewBox.width);\n          var validateChartY = Math.min(chartY, viewBox.y + viewBox.height);\n          var activeLabel = tooltipTicks[activeTooltipIndex] && tooltipTicks[activeTooltipIndex].value;\n          var activePayload = getTooltipContent(this.state, this.props.data, activeTooltipIndex);\n          var activeCoordinate = tooltipTicks[activeTooltipIndex] ? {\n            x: layout === 'horizontal' ? tooltipTicks[activeTooltipIndex].coordinate : validateChartX,\n            y: layout === 'horizontal' ? validateChartY : tooltipTicks[activeTooltipIndex].coordinate\n          } : originCoordinate;\n          this.setState(_objectSpread(_objectSpread({}, data), {}, {\n            activeLabel: activeLabel,\n            activeCoordinate: activeCoordinate,\n            activePayload: activePayload\n          }));\n        } else {\n          this.setState(data);\n        }\n      }\n    }, {\n      key: \"filterFormatItem\",\n      value: function filterFormatItem(item, displayName, childIndex) {\n        var formatedGraphicalItems = this.state.formatedGraphicalItems;\n\n        for (var i = 0, len = formatedGraphicalItems.length; i < len; i++) {\n          var entry = formatedGraphicalItems[i];\n\n          if (entry.item === item || entry.props.key === item.key || displayName === getDisplayName(entry.item.type) && childIndex === entry.childIndex) {\n            return entry;\n          }\n        }\n\n        return null;\n      }\n    }, {\n      key: \"renderAxis\",\n\n      /**\n       * Draw axis\n       * @param {Object} axisOptions The options of axis\n       * @param {Object} element      The axis element\n       * @param {String} displayName  The display name of axis\n       * @param {Number} index        The index of element\n       * @return {ReactElement}       The instance of x-axes\n       */\n      value: function renderAxis(axisOptions, element, displayName, index) {\n        var _this$props4 = this.props,\n            width = _this$props4.width,\n            height = _this$props4.height;\n        return /*#__PURE__*/React.createElement(CartesianAxis, _extends({}, axisOptions, {\n          className: \"recharts-\".concat(axisOptions.axisType, \" \").concat(axisOptions.axisType),\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          },\n          ticksGenerator: this.axesTicksGenerator\n        }));\n      }\n      /**\n       * Draw grid\n       * @param  {ReactElement} element the grid item\n       * @return {ReactElement} The instance of grid\n       */\n\n    }, {\n      key: \"renderClipPath\",\n      value: function renderClipPath() {\n        var clipPathId = this.clipPathId;\n        var _this$state$offset = this.state.offset,\n            left = _this$state$offset.left,\n            top = _this$state$offset.top,\n            height = _this$state$offset.height,\n            width = _this$state$offset.width;\n        return /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n          id: clipPathId\n        }, /*#__PURE__*/React.createElement(\"rect\", {\n          x: left,\n          y: top,\n          height: height,\n          width: width\n        })));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        if (!validateWidthHeight(this)) {\n          return null;\n        }\n\n        var _this$props5 = this.props,\n            children = _this$props5.children,\n            className = _this$props5.className,\n            width = _this$props5.width,\n            height = _this$props5.height,\n            style = _this$props5.style,\n            compact = _this$props5.compact,\n            others = _objectWithoutProperties(_this$props5, [\"children\", \"className\", \"width\", \"height\", \"style\", \"compact\"]);\n\n        var attrs = filterProps(others);\n        var map = {\n          CartesianGrid: {\n            handler: this.renderGrid,\n            once: true\n          },\n          ReferenceArea: {\n            handler: this.renderReferenceElement\n          },\n          ReferenceLine: {\n            handler: this.renderReferenceElement\n          },\n          ReferenceDot: {\n            handler: this.renderReferenceElement\n          },\n          XAxis: {\n            handler: this.renderXAxis\n          },\n          YAxis: {\n            handler: this.renderYAxis\n          },\n          Brush: {\n            handler: this.renderBrush,\n            once: true\n          },\n          Bar: {\n            handler: this.renderGraphicChild\n          },\n          Line: {\n            handler: this.renderGraphicChild\n          },\n          Area: {\n            handler: this.renderGraphicChild\n          },\n          Radar: {\n            handler: this.renderGraphicChild\n          },\n          RadialBar: {\n            handler: this.renderGraphicChild\n          },\n          Scatter: {\n            handler: this.renderGraphicChild\n          },\n          Pie: {\n            handler: this.renderGraphicChild\n          },\n          Funnel: {\n            handler: this.renderGraphicChild\n          },\n          Tooltip: {\n            handler: this.renderCursor,\n            once: true\n          },\n          PolarGrid: {\n            handler: this.renderPolarGrid,\n            once: true\n          },\n          PolarAngleAxis: {\n            handler: this.renderPolarAxis\n          },\n          PolarRadiusAxis: {\n            handler: this.renderPolarAxis\n          },\n          Customized: {\n            handler: this.renderCustomized\n          }\n        }; // The \"compact\" mode is mainly used as the panorama within Brush\n\n        if (compact) {\n          return /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n            width: width,\n            height: height\n          }), this.renderClipPath(), renderByOrder(children, map));\n        }\n\n        var events = this.parseEventsOfWrapper();\n        return /*#__PURE__*/React.createElement(\"div\", _extends({\n          className: classNames('recharts-wrapper', className),\n          style: _objectSpread({\n            position: 'relative',\n            cursor: 'default',\n            width: width,\n            height: height\n          }, style)\n        }, events, {\n          ref: function ref(node) {\n            _this2.container = node;\n          }\n        }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n          width: width,\n          height: height\n        }), this.renderClipPath(), renderByOrder(children, map)), this.renderLegend(), this.renderTooltip());\n      }\n    }]);\n\n    return CategoricalChartWrapper;\n  }(Component), _class.displayName = chartName, _class.defaultProps = _objectSpread({\n    layout: 'horizontal',\n    stackOffset: 'none',\n    barCategoryGap: '10%',\n    barGap: 4,\n    margin: {\n      top: 5,\n      right: 5,\n      bottom: 5,\n      left: 5\n    },\n    reverseStackOrder: false\n  }, defaultProps), _class.getDerivedStateFromProps = function (nextProps, prevState) {\n    var data = nextProps.data,\n        children = nextProps.children,\n        width = nextProps.width,\n        height = nextProps.height,\n        layout = nextProps.layout,\n        stackOffset = nextProps.stackOffset,\n        margin = nextProps.margin;\n\n    if (_isNil(prevState.updateId)) {\n      var defaultState = createDefaultState(nextProps);\n      return _objectSpread(_objectSpread(_objectSpread({}, defaultState), {}, {\n        updateId: 0\n      }, updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread(_objectSpread({\n        props: nextProps\n      }, defaultState), {}, {\n        updateId: 0\n      }), prevState)), {}, {\n        prevData: data,\n        prevWidth: width,\n        prevHeight: height,\n        prevLayout: layout,\n        prevStackOffset: stackOffset,\n        prevMargin: margin,\n        prevChildren: children\n      });\n    }\n\n    if (data !== prevState.prevData || width !== prevState.prevWidth || height !== prevState.prevHeight || layout !== prevState.prevLayout || stackOffset !== prevState.prevStackOffset || !shallowEqual(margin, prevState.prevMargin)) {\n      var _defaultState = createDefaultState(nextProps); // Fixes https://github.com/recharts/recharts/issues/2143\n\n\n      var keepFromPrevState = {\n        // (chartX, chartY) are (0,0) in default state, but we want to keep the last mouse position to avoid\n        // any flickering\n        chartX: prevState.chartX,\n        chartY: prevState.chartY,\n        // The tooltip should stay active when it was active in the previous render. If this is not\n        // the case, the tooltip disappears and immediately re-appears, causing a flickering effect\n        isTooltipActive: prevState.isTooltipActive\n      };\n\n      var updatesToState = _objectSpread(_objectSpread({}, getTooltipData(prevState, data, layout)), {}, {\n        // Update the current tooltip data (in case it changes without mouse interaction)\n        updateId: prevState.updateId + 1\n      });\n\n      var newState = _objectSpread(_objectSpread(_objectSpread({}, _defaultState), keepFromPrevState), updatesToState);\n\n      return _objectSpread(_objectSpread(_objectSpread({}, newState), updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread({\n        props: nextProps\n      }, newState), prevState)), {}, {\n        prevData: data,\n        prevWidth: width,\n        prevHeight: height,\n        prevLayout: layout,\n        prevStackOffset: stackOffset,\n        prevMargin: margin,\n        prevChildren: children\n      });\n    }\n\n    if (!isChildrenEqual(children, prevState.prevChildren)) {\n      // update configuration in chilren\n      var hasGlobalData = !_isNil(data);\n      var newUpdateId = hasGlobalData ? prevState.updateId : prevState.updateId + 1;\n      return _objectSpread(_objectSpread({\n        updateId: newUpdateId\n      }, updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread(_objectSpread({\n        props: nextProps\n      }, prevState), {}, {\n        updateId: newUpdateId\n      }), prevState)), {}, {\n        prevChildren: children\n      });\n    }\n\n    return null;\n  }, _class.renderActiveDot = function (option, props) {\n    var dot;\n\n    if ( /*#__PURE__*/isValidElement(option)) {\n      dot = /*#__PURE__*/cloneElement(option, props);\n    } else if (_isFunction(option)) {\n      dot = option(props);\n    } else {\n      dot = /*#__PURE__*/React.createElement(Dot, props);\n    }\n\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: \"recharts-active-dot\",\n      key: props.key\n    }, dot);\n  }, _temp;\n};","map":{"version":3,"sources":["/Users/qianjie/Desktop/cg4002_dashboard/frontend/node_modules/recharts/es6/chart/generateCategoricalChart.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_every","_find","_isFunction","_throttle","_sortBy","_get","_range","_isNil","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","n","slice","name","Array","from","test","iter","isArray","len","arr2","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","React","Component","cloneElement","isValidElement","createElement","classNames","Surface","Layer","Tooltip","Legend","Curve","Cross","Sector","Dot","Rectangle","findAllByType","findChildByType","getDisplayName","parseChildIndex","validateWidthHeight","isChildrenEqual","renderByOrder","getReactEventByType","CartesianAxis","Brush","getOffset","calculateChartCoordinate","getAnyElementOfObject","hasDuplicate","uniqueId","isNumber","findEntryInArray","calculateActiveTickIndex","getMainColorOfGraphicItem","getBarSizeList","getBarPosition","appendOffsetOfLegend","getLegendProps","combineEventHandlers","getTicksOfAxis","getCoordinatesOfGrid","getStackedDataOfItem","parseErrorBarsOfAxis","getBandSizeOfAxis","getStackGroupsByAxisId","getValueByDataKey","isCategoricalAxis","getDomainOfItemsWithSameAxis","getDomainOfStackGroups","getDomainOfDataByKey","parseSpecifiedDomain","parseDomainOfCategoryAxis","detectReferenceElementsDomain","inRangeOfSector","polarToCartesian","shallowEqual","eventCenter","SYNC_EVENT","filterProps","adaptEventHandlers","ORIENT_MAP","xAxis","yAxis","originCoordinate","x","y","isFinit","Number","isFinite","defer","requestAnimationFrame","setImmediate","setTimeout","deferClear","cancelAnimationFrame","clearImmediate","clearTimeout","calculateTooltipPos","rangeObj","layout","angle","radius","getActiveCoordinate","tooltipTicks","activeIndex","entry","find","tick","index","coordinate","_angle","_radius","cx","cy","getDisplayedData","data","_ref","item","graphicalItems","dataStartIndex","dataEndIndex","itemsData","reduce","child","itemData","concat","getTooltipContent","state","chartData","activeLabel","tooltipAxis","displayedData","hide","_child$props","dataKey","unit","formatter","tooltipType","payload","allowDuplicatedCategory","entries","undefined","color","type","getTooltipData","rangeData","chartX","chartY","pos","ticks","orderedTooltipTicks","axis","activePayload","activeCoordinate","activeTooltipIndex","getAxisMapByAxes","_ref2","axes","axisType","axisIdKey","stackGroups","children","stackOffset","isCategorical","axisMap","_child$props2","allowDataOverflow","scale","axisId","domain","duplicateDomain","categoricalDomain","duplicate","finalDomain","errorBarsDomain","hasStack","axisDomain","isDomainValidate","every","originalDomain","getAxisMapByItems","_ref3","Axis","defaultProps","orientation","getAxisMap","_ref4","_ref4$axisType","AxisComp","tooltipTicksGenerator","tooltipAxisBandSize","createDefaultState","defaultShowTooltip","brushItem","displayName","startIndex","endIndex","isTooltipActive","hasGraphicalBarItem","some","getAxisNameByLayout","numericAxisName","cateAxisName","calculateOffset","_ref5","prevLegendBBox","_ref5$xAxisMap","xAxisMap","_ref5$yAxisMap","yAxisMap","width","height","margin","legendItem","offsetH","id","mirror","left","right","offsetV","top","bottom","offset","brushBottom","generateCategoricalChart","_ref6","_class","_temp","chartName","GraphicalChild","_ref6$eventType","eventType","axisComponents","legendContent","formatAxisMap","getFormatItems","currentState","updateId","barSize","barGap","barCategoryGap","globalMaxBarSize","maxBarSize","_getAxisNameByLayout","hasBar","sizeList","formatedItems","_item$props","childMaxBarSize","numericAxisId","cateAxisId","axisObj","_objectSpread6","cateAxis","cateTicks","stackedData","itemIsBar","bandSize","barPosition","barBandSize","map","position","componsedFn","getComposedData","_objectSpread7","childIndex","updateStateOfAxisMapsOffsetAndStackGroups","_ref7","prevState","reverseStackOrder","_getAxisNameByLayout2","legendBBox","replace","cateAxisMap","ticksObj","formatedGraphicalItems","_Component","CategoricalChartWrapper","_super","_props","_this","uniqueChartId","clipPathId","legendInstance","deferId","container","clearDeferId","handleLegendBBoxUpdate","box","_this$state","setState","handleReceiveSyncEvent","cId","chartId","syncId","applySyncEvent","bind","handleBrushChange","_ref8","triggerSyncEvent","handleMouseEnter","onMouseEnter","mouse","getMouseInfo","nextState","triggeredAfterMouseMove","onMouseMove","handleItemMouseEnter","el","activeItem","tooltipPayload","tooltipPosition","handleItemMouseLeave","handleMouseMove","persist","handleMouseLeave","onMouseLeave","cancelThrottledTriggerAfterMouseMove","handleOuterEvent","eventName","event","changedTouches","handler","handleClick","onClick","handleMouseDown","onMouseDown","handleMouseUp","onMouseUp","handleTouchMove","handleTouchStart","handleTouchEnd","verticalCoordinatesGenerator","_ref9","getTicks","viewBox","horizontalCoordinatesGenerator","_ref10","axesTicksGenerator","renderCursor","element","_this$state2","cursor","restProps","cursorComp","getCursorRectangle","_this$getCursorPoints","getCursorPoints","startAngle","endAngle","innerRadius","outerRadius","points","cursorProps","stroke","pointerEvents","payloadIndex","className","renderPolarAxis","axisOption","renderXAxis","xAxisId","renderAxis","renderYAxis","yAxisId","renderGrid","_this$state3","_this$props","yAxisWithFiniteDomain","chartWidth","chartHeight","renderPolarGrid","radialLines","_this$state4","radiusAxisMap","angleAxisMap","radiusAxis","angleAxis","polarAngles","polarRadius","renderLegend","_this$props2","legendWidth","otherProps","ref","legend","onBBoxUpdate","renderTooltip","tooltipItem","_this$state5","active","label","renderBrush","_this$props3","_this$state6","onChange","renderReferenceElement","_assertThisInitialize","_this$state7","_element$props","renderActivePoints","_ref11","activePoint","basePoint","isRange","_item$item$props","activeDot","dotProps","r","fill","strokeWidth","renderActiveDot","renderGraphicChild","filterFormatItem","_this$state8","_item$props2","baseLine","_item$item$props2","hasActive","isTooltipTriggerByClick","trigger","itemEvents","onCLick","graphicalItem","findWithPayload","specifiedKey","renderCustomized","throttleDelay","componentDidMount","addListener","componentDidUpdate","prevProps","removeListener","componentWillUnmount","cancel","containerOffset","inRange","_this$state9","xScale","yScale","xValue","invert","yValue","toolTipData","_this$state10","halfSize","_this$state11","x1","y1","x2","y2","innerPoint","outerPoint","_cx","_cy","startPoint","endPoint","isInRange","_this$state12","parseEventsOfWrapper","tooltipEvents","onTouchMove","onTouchStart","onTouchEnd","outerEvents","on","setMaxListeners","_maxListeners","emit","_this$state13","validateChartX","Math","min","validateChartY","axisOptions","_this$props4","ticksGenerator","renderClipPath","_this$state$offset","render","_this2","_this$props5","style","compact","others","attrs","CartesianGrid","once","ReferenceArea","ReferenceLine","ReferenceDot","XAxis","YAxis","Bar","Line","Area","Radar","RadialBar","Scatter","Pie","Funnel","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Customized","events","node","getDerivedStateFromProps","nextProps","defaultState","prevData","prevWidth","prevHeight","prevLayout","prevStackOffset","prevMargin","prevChildren","_defaultState","keepFromPrevState","updatesToState","newState","hasGlobalData","newUpdateId","option","dot"],"mappings":"AAAA,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE;;AAA2B,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA/D,EAAyE;AAAEH,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE,aAAO,OAAOA,GAAd;AAAoB,KAAtD;AAAyD,GAApI,MAA0I;AAAED,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAAE,aAAOA,GAAG,IAAI,OAAOC,MAAP,KAAkB,UAAzB,IAAuCD,GAAG,CAACG,WAAJ,KAAoBF,MAA3D,IAAqED,GAAG,KAAKC,MAAM,CAACG,SAApF,GAAgG,QAAhG,GAA2G,OAAOJ,GAAzH;AAA+H,KAAjK;AAAoK;;AAAC,SAAOD,OAAO,CAACC,GAAD,CAAd;AAAsB;;AAE1X,OAAOK,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,MAAP,MAAmB,cAAnB;;AAEA,SAASC,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACV,SAAP,CAAiBkB,cAAjB,CAAgCC,IAAhC,CAAqCH,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACW,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;AAAyC;;AAE7T,SAASO,wBAAT,CAAkCL,MAAlC,EAA0CM,QAA1C,EAAoD;AAAE,MAAIN,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;;AAAW,MAAIJ,MAAM,GAAGW,6BAA6B,CAACP,MAAD,EAASM,QAAT,CAA1C;;AAA8D,MAAIL,GAAJ,EAASJ,CAAT;;AAAY,MAAIH,MAAM,CAACc,qBAAX,EAAkC;AAAE,QAAIC,gBAAgB,GAAGf,MAAM,CAACc,qBAAP,CAA6BR,MAA7B,CAAvB;;AAA6D,SAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGY,gBAAgB,CAACV,MAAjC,EAAyCF,CAAC,EAA1C,EAA8C;AAAEI,MAAAA,GAAG,GAAGQ,gBAAgB,CAACZ,CAAD,CAAtB;AAA2B,UAAIS,QAAQ,CAACI,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAU,UAAI,CAACP,MAAM,CAACV,SAAP,CAAiB2B,oBAAjB,CAAsCR,IAAtC,CAA2CH,MAA3C,EAAmDC,GAAnD,CAAL,EAA8D;AAAUL,MAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;;AAAC,SAAOL,MAAP;AAAgB;;AAE5e,SAASW,6BAAT,CAAuCP,MAAvC,EAA+CM,QAA/C,EAAyD;AAAE,MAAIN,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIgB,UAAU,GAAGlB,MAAM,CAACmB,IAAP,CAAYb,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGe,UAAU,CAACb,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGW,UAAU,CAACf,CAAD,CAAhB;AAAqB,QAAIS,QAAQ,CAACI,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,SAASkB,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BtB,MAA3B,EAAmCuB,KAAnC,EAA0C;AAAE,OAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsB,KAAK,CAACpB,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AAAE,QAAIuB,UAAU,GAAGD,KAAK,CAACtB,CAAD,CAAtB;AAA2BuB,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B7B,IAAAA,MAAM,CAAC8B,cAAP,CAAsB5B,MAAtB,EAA8BwB,UAAU,CAACnB,GAAzC,EAA8CmB,UAA9C;AAA4D;AAAE;;AAE7T,SAASK,YAAT,CAAsBT,WAAtB,EAAmCU,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBR,iBAAiB,CAACF,WAAW,CAAChC,SAAb,EAAwB0C,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBT,iBAAiB,CAACF,WAAD,EAAcW,WAAd,CAAjB;AAA6C,SAAOX,WAAP;AAAqB;;AAEvN,SAASY,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAAE,UAAM,IAAIb,SAAJ,CAAc,oDAAd,CAAN;AAA4E;;AAACY,EAAAA,QAAQ,CAAC7C,SAAT,GAAqBU,MAAM,CAACqC,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC9C,SAAvC,EAAkD;AAAED,IAAAA,WAAW,EAAE;AAAEiD,MAAAA,KAAK,EAAEH,QAAT;AAAmBN,MAAAA,QAAQ,EAAE,IAA7B;AAAmCD,MAAAA,YAAY,EAAE;AAAjD;AAAf,GAAlD,CAArB;AAAkJ,MAAIQ,UAAJ,EAAgBG,eAAe,CAACJ,QAAD,EAAWC,UAAX,CAAf;AAAwC;;AAEjY,SAASG,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAAEF,EAAAA,eAAe,GAAGvC,MAAM,CAAC0C,cAAP,IAAyB,SAASH,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAAED,IAAAA,CAAC,CAACG,SAAF,GAAcF,CAAd;AAAiB,WAAOD,CAAP;AAAW,GAAxG;;AAA0G,SAAOD,eAAe,CAACC,CAAD,EAAIC,CAAJ,CAAtB;AAA+B;;AAE1K,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;AAAE,MAAIC,yBAAyB,GAAGC,yBAAyB,EAAzD;;AAA6D,SAAO,SAASC,oBAAT,GAAgC;AAAE,QAAIC,KAAK,GAAGC,eAAe,CAACL,OAAD,CAA3B;AAAA,QAAsCM,MAAtC;;AAA8C,QAAIL,yBAAJ,EAA+B;AAAE,UAAIM,SAAS,GAAGF,eAAe,CAAC,IAAD,CAAf,CAAsB7D,WAAtC;;AAAmD8D,MAAAA,MAAM,GAAGE,OAAO,CAACC,SAAR,CAAkBL,KAAlB,EAAyB7C,SAAzB,EAAoCgD,SAApC,CAAT;AAA0D,KAA9I,MAAoJ;AAAED,MAAAA,MAAM,GAAGF,KAAK,CAACvC,KAAN,CAAY,IAAZ,EAAkBN,SAAlB,CAAT;AAAwC;;AAAC,WAAOmD,0BAA0B,CAAC,IAAD,EAAOJ,MAAP,CAAjC;AAAkD,GAAxU;AAA2U;;AAEza,SAASI,0BAAT,CAAoCC,IAApC,EAA0C/C,IAA1C,EAAgD;AAAE,MAAIA,IAAI,KAAKxB,OAAO,CAACwB,IAAD,CAAP,KAAkB,QAAlB,IAA8B,OAAOA,IAAP,KAAgB,UAAnD,CAAR,EAAwE;AAAE,WAAOA,IAAP;AAAc;;AAAC,SAAOgD,sBAAsB,CAACD,IAAD,CAA7B;AAAsC;;AAEjL,SAASC,sBAAT,CAAgCD,IAAhC,EAAsC;AAAE,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAE,UAAM,IAAIE,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,SAAOF,IAAP;AAAc;;AAEtK,SAAST,yBAAT,GAAqC;AAAE,MAAI,OAAOM,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACC,SAA/C,EAA0D,OAAO,KAAP;AAAc,MAAID,OAAO,CAACC,SAAR,CAAkBK,IAAtB,EAA4B,OAAO,KAAP;AAAc,MAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;AAAa,MAAI;AAAEC,IAAAA,IAAI,CAACvE,SAAL,CAAewE,QAAf,CAAwBrD,IAAxB,CAA6B4C,OAAO,CAACC,SAAR,CAAkBO,IAAlB,EAAwB,EAAxB,EAA4B,YAAY,CAAE,CAA1C,CAA7B;AAA2E,WAAO,IAAP;AAAc,GAA/F,CAAgG,OAAOE,CAAP,EAAU;AAAE,WAAO,KAAP;AAAe;AAAE;;AAEpU,SAASb,eAAT,CAAyBV,CAAzB,EAA4B;AAAEU,EAAAA,eAAe,GAAGlD,MAAM,CAAC0C,cAAP,GAAwB1C,MAAM,CAACgE,cAA/B,GAAgD,SAASd,eAAT,CAAyBV,CAAzB,EAA4B;AAAE,WAAOA,CAAC,CAACG,SAAF,IAAe3C,MAAM,CAACgE,cAAP,CAAsBxB,CAAtB,CAAtB;AAAiD,GAAjJ;AAAmJ,SAAOU,eAAe,CAACV,CAAD,CAAtB;AAA4B;;AAE7M,SAASyB,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,2BAA2B,CAACH,GAAD,CAA/E,IAAwFI,kBAAkB,EAAjH;AAAsH;;AAEzJ,SAASA,kBAAT,GAA8B;AAAE,QAAM,IAAI/C,SAAJ,CAAc,sIAAd,CAAN;AAA8J;;AAE9L,SAAS8C,2BAAT,CAAqC7B,CAArC,EAAwC+B,MAAxC,EAAgD;AAAE,MAAI,CAAC/B,CAAL,EAAQ;AAAQ,MAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOgC,iBAAiB,CAAChC,CAAD,EAAI+B,MAAJ,CAAxB;AAAqC,MAAIE,CAAC,GAAGzE,MAAM,CAACV,SAAP,CAAiBwE,QAAjB,CAA0BrD,IAA1B,CAA+B+B,CAA/B,EAAkCkC,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;AAAwD,MAAID,CAAC,KAAK,QAAN,IAAkBjC,CAAC,CAACnD,WAAxB,EAAqCoF,CAAC,GAAGjC,CAAC,CAACnD,WAAF,CAAcsF,IAAlB;AAAwB,MAAIF,CAAC,KAAK,KAAN,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOG,KAAK,CAACC,IAAN,CAAWrC,CAAX,CAAP;AAAsB,MAAIiC,CAAC,KAAK,WAAN,IAAqB,2CAA2CK,IAA3C,CAAgDL,CAAhD,CAAzB,EAA6E,OAAOD,iBAAiB,CAAChC,CAAD,EAAI+B,MAAJ,CAAxB;AAAsC;;AAEha,SAASH,gBAAT,CAA0BW,IAA1B,EAAgC;AAAE,MAAI,OAAO5F,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,QAAP,IAAmBY,MAAM,CAAC+E,IAAD,CAA9D,EAAsE,OAAOH,KAAK,CAACC,IAAN,CAAWE,IAAX,CAAP;AAA0B;;AAElI,SAASZ,kBAAT,CAA4BD,GAA5B,EAAiC;AAAE,MAAIU,KAAK,CAACI,OAAN,CAAcd,GAAd,CAAJ,EAAwB,OAAOM,iBAAiB,CAACN,GAAD,CAAxB;AAAgC;;AAE3F,SAASM,iBAAT,CAA2BN,GAA3B,EAAgCe,GAAhC,EAAqC;AAAE,MAAIA,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAGf,GAAG,CAAC7D,MAA7B,EAAqC4E,GAAG,GAAGf,GAAG,CAAC7D,MAAV;;AAAkB,OAAK,IAAIF,CAAC,GAAG,CAAR,EAAW+E,IAAI,GAAG,IAAIN,KAAJ,CAAUK,GAAV,CAAvB,EAAuC9E,CAAC,GAAG8E,GAA3C,EAAgD9E,CAAC,EAAjD,EAAqD;AAAE+E,IAAAA,IAAI,CAAC/E,CAAD,CAAJ,GAAU+D,GAAG,CAAC/D,CAAD,CAAb;AAAmB;;AAAC,SAAO+E,IAAP;AAAc;;AAEvL,SAASC,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AAAE,MAAIlE,IAAI,GAAGnB,MAAM,CAACmB,IAAP,CAAYiE,MAAZ,CAAX;;AAAgC,MAAIpF,MAAM,CAACc,qBAAX,EAAkC;AAAE,QAAIwE,OAAO,GAAGtF,MAAM,CAACc,qBAAP,CAA6BsE,MAA7B,CAAd;AAAoD,QAAIC,cAAJ,EAAoBC,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAAE,aAAOxF,MAAM,CAACyF,wBAAP,CAAgCL,MAAhC,EAAwCI,GAAxC,EAA6C7D,UAApD;AAAiE,KAAjG,CAAV;AAA8GR,IAAAA,IAAI,CAACuE,IAAL,CAAUhF,KAAV,CAAgBS,IAAhB,EAAsBmE,OAAtB;AAAiC;;AAAC,SAAOnE,IAAP;AAAc;;AAErV,SAASwE,aAAT,CAAuBzF,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;;AAAuD,QAAIA,CAAC,GAAG,CAAR,EAAW;AAAEgF,MAAAA,OAAO,CAACnF,MAAM,CAACM,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8BsF,OAA9B,CAAsC,UAAUrF,GAAV,EAAe;AAAEsF,QAAAA,eAAe,CAAC3F,MAAD,EAASK,GAAT,EAAcD,MAAM,CAACC,GAAD,CAApB,CAAf;AAA4C,OAAnG;AAAuG,KAApH,MAA0H,IAAIP,MAAM,CAAC8F,yBAAX,EAAsC;AAAE9F,MAAAA,MAAM,CAAC+F,gBAAP,CAAwB7F,MAAxB,EAAgCF,MAAM,CAAC8F,yBAAP,CAAiCxF,MAAjC,CAAhC;AAA4E,KAApH,MAA0H;AAAE6E,MAAAA,OAAO,CAACnF,MAAM,CAACM,MAAD,CAAP,CAAP,CAAwBsF,OAAxB,CAAgC,UAAUrF,GAAV,EAAe;AAAEP,QAAAA,MAAM,CAAC8B,cAAP,CAAsB5B,MAAtB,EAA8BK,GAA9B,EAAmCP,MAAM,CAACyF,wBAAP,CAAgCnF,MAAhC,EAAwCC,GAAxC,CAAnC;AAAmF,OAApI;AAAwI;AAAE;;AAAC,SAAOL,MAAP;AAAgB;;AAEthB,SAAS2F,eAAT,CAAyB3G,GAAzB,EAA8BqB,GAA9B,EAAmC+B,KAAnC,EAA0C;AAAE,MAAI/B,GAAG,IAAIrB,GAAX,EAAgB;AAAEc,IAAAA,MAAM,CAAC8B,cAAP,CAAsB5C,GAAtB,EAA2BqB,GAA3B,EAAgC;AAAE+B,MAAAA,KAAK,EAAEA,KAAT;AAAgBX,MAAAA,UAAU,EAAE,IAA5B;AAAkCC,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAE3C,IAAAA,GAAG,CAACqB,GAAD,CAAH,GAAW+B,KAAX;AAAmB;;AAAC,SAAOpD,GAAP;AAAa;;AAEjN,OAAO8G,KAAP,IAAgBC,SAAhB,EAA2BC,YAA3B,EAAyCC,cAAzC,EAAyDC,aAAzD,QAA8E,OAA9E;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,KAAT,QAAsB,oBAAtB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,aAAT,EAAwBC,eAAxB,EAAyCC,cAAzC,EAAyDC,eAAzD,EAA0EC,mBAA1E,EAA+FC,eAA/F,EAAgHC,aAAhH,EAA+HC,mBAA/H,QAA0J,oBAA1J;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,KAAT,QAAsB,oBAAtB;AACA,SAASC,SAAT,EAAoBC,wBAApB,QAAoD,kBAApD;AACA,SAASC,qBAAT,EAAgCC,YAAhC,EAA8CC,QAA9C,EAAwDC,QAAxD,EAAkEC,gBAAlE,QAA0F,mBAA1F;AACA,SAASC,wBAAT,EAAmCC,yBAAnC,EAA8DC,cAA9D,EAA8EC,cAA9E,EAA8FC,oBAA9F,EAAoHC,cAApH,EAAoIC,oBAApI,EAA0JC,cAA1J,EAA0KC,oBAA1K,EAAgMC,oBAAhM,EAAsNC,oBAAtN,EAA4OC,iBAA5O,EAA+PC,sBAA/P,EAAuRC,iBAAvR,EAA0SC,iBAA1S,EAA6TC,4BAA7T,EAA2VC,sBAA3V,EAAmXC,oBAAnX,EAAyYC,oBAAzY,EAA+ZC,yBAA/Z,QAAgc,oBAAhc;AACA,SAASC,6BAAT,QAA8C,uCAA9C;AACA,SAASC,eAAT,EAA0BC,gBAA1B,QAAkD,oBAAlD;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,gBAAxC;AACA,SAASC,WAAT,EAAsBC,kBAAtB,QAAgD,eAAhD;AACA,IAAIC,UAAU,GAAG;AACfC,EAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,KAAX,CADQ;AAEfC,EAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT;AAFQ,CAAjB;AAIA,IAAIC,gBAAgB,GAAG;AACrBC,EAAAA,CAAC,EAAE,CADkB;AAErBC,EAAAA,CAAC,EAAE;AAFkB,CAAvB,C,CAGG;AACH;;AAEA,IAAIC,OAAO,GAAGC,MAAM,CAACC,QAAP,GAAkBD,MAAM,CAACC,QAAzB,GAAoCA,QAAlD;AACA,IAAIC,KAAK,GAAG;AACZ,OAAOC,qBAAP,KAAiC,UAAjC,GAA8CA,qBAA9C,GAAsE,OAAOC,YAAP,KAAwB,UAAxB,GAAqCA,YAArC,GAAoDC,UAD1H;AAEA,IAAIC,UAAU,GAAG;AACjB,OAAOC,oBAAP,KAAgC,UAAhC,GAA6CA,oBAA7C,GAAoE,OAAOC,cAAP,KAA0B,UAA1B,GAAuCA,cAAvC,GAAwDC,YAD5H;;AAGA,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6BC,QAA7B,EAAuCC,MAAvC,EAA+C;AACvE,MAAIA,MAAM,KAAK,YAAf,EAA6B;AAC3B,WAAOD,QAAQ,CAACd,CAAhB;AACD;;AAED,MAAIe,MAAM,KAAK,UAAf,EAA2B;AACzB,WAAOD,QAAQ,CAACb,CAAhB;AACD;;AAED,MAAIc,MAAM,KAAK,SAAf,EAA0B;AACxB,WAAOD,QAAQ,CAACE,KAAhB;AACD;;AAED,SAAOF,QAAQ,CAACG,MAAhB;AACD,CAdD;;AAgBA,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,CAA6BH,MAA7B,EAAqCI,YAArC,EAAmDC,WAAnD,EAAgEN,QAAhE,EAA0E;AAClG,MAAIO,KAAK,GAAGF,YAAY,CAACG,IAAb,CAAkB,UAAUC,IAAV,EAAgB;AAC5C,WAAOA,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAeJ,WAA9B;AACD,GAFW,CAAZ;;AAIA,MAAIC,KAAJ,EAAW;AACT,QAAIN,MAAM,KAAK,YAAf,EAA6B;AAC3B,aAAO;AACLf,QAAAA,CAAC,EAAEqB,KAAK,CAACI,UADJ;AAELxB,QAAAA,CAAC,EAAEa,QAAQ,CAACb;AAFP,OAAP;AAID;;AAED,QAAIc,MAAM,KAAK,UAAf,EAA2B;AACzB,aAAO;AACLf,QAAAA,CAAC,EAAEc,QAAQ,CAACd,CADP;AAELC,QAAAA,CAAC,EAAEoB,KAAK,CAACI;AAFJ,OAAP;AAID;;AAED,QAAIV,MAAM,KAAK,SAAf,EAA0B;AACxB,UAAIW,MAAM,GAAGL,KAAK,CAACI,UAAnB;AACA,UAAIE,OAAO,GAAGb,QAAQ,CAACG,MAAvB;AACA,aAAOtF,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKmF,QAAL,CAAd,EAA8BxB,gBAAgB,CAACwB,QAAQ,CAACc,EAAV,EAAcd,QAAQ,CAACe,EAAvB,EAA2BF,OAA3B,EAAoCD,MAApC,CAA9C,CAAd,EAA0G,EAA1G,EAA8G;AAChIV,QAAAA,KAAK,EAAEU,MADyH;AAEhIT,QAAAA,MAAM,EAAEU;AAFwH,OAA9G,CAApB;AAID;;AAED,QAAIV,MAAM,GAAGI,KAAK,CAACI,UAAnB;AACA,QAAIT,KAAK,GAAGF,QAAQ,CAACE,KAArB;AACA,WAAOrF,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKmF,QAAL,CAAd,EAA8BxB,gBAAgB,CAACwB,QAAQ,CAACc,EAAV,EAAcd,QAAQ,CAACe,EAAvB,EAA2BZ,MAA3B,EAAmCD,KAAnC,CAA9C,CAAd,EAAwG,EAAxG,EAA4G;AAC9HA,MAAAA,KAAK,EAAEA,KADuH;AAE9HC,MAAAA,MAAM,EAAEA;AAFsH,KAA5G,CAApB;AAID;;AAED,SAAOlB,gBAAP;AACD,CAtCD;;AAwCA,IAAI+B,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4C;AACjE,MAAIC,cAAc,GAAGF,IAAI,CAACE,cAA1B;AAAA,MACIC,cAAc,GAAGH,IAAI,CAACG,cAD1B;AAAA,MAEIC,YAAY,GAAGJ,IAAI,CAACI,YAFxB;AAGA,MAAIC,SAAS,GAAG,CAACH,cAAc,IAAI,EAAnB,EAAuBI,MAAvB,CAA8B,UAAUnJ,MAAV,EAAkBoJ,KAAlB,EAAyB;AACrE,QAAIC,QAAQ,GAAGD,KAAK,CAAC9K,KAAN,CAAYsK,IAA3B;;AAEA,QAAIS,QAAQ,IAAIA,QAAQ,CAACnM,MAAzB,EAAiC;AAC/B,aAAO,GAAGoM,MAAH,CAAUxI,kBAAkB,CAACd,MAAD,CAA5B,EAAsCc,kBAAkB,CAACuI,QAAD,CAAxD,CAAP;AACD;;AAED,WAAOrJ,MAAP;AACD,GARe,EAQb,EARa,CAAhB;;AAUA,MAAIkJ,SAAS,IAAIA,SAAS,CAAChM,MAAV,GAAmB,CAApC,EAAuC;AACrC,WAAOgM,SAAP;AACD;;AAED,MAAIJ,IAAI,IAAIA,IAAI,CAACxK,KAAb,IAAsBwK,IAAI,CAACxK,KAAL,CAAWsK,IAAjC,IAAyCE,IAAI,CAACxK,KAAL,CAAWsK,IAAX,CAAgB1L,MAAhB,GAAyB,CAAtE,EAAyE;AACvE,WAAO4L,IAAI,CAACxK,KAAL,CAAWsK,IAAlB;AACD;;AAED,MAAIA,IAAI,IAAIA,IAAI,CAAC1L,MAAb,IAAuByH,QAAQ,CAACqE,cAAD,CAA/B,IAAmDrE,QAAQ,CAACsE,YAAD,CAA/D,EAA+E;AAC7E,WAAOL,IAAI,CAACrH,KAAL,CAAWyH,cAAX,EAA2BC,YAAY,GAAG,CAA1C,CAAP;AACD;;AAED,SAAO,EAAP;AACD,CA3BD;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIM,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,KAA3B,EAAkCC,SAAlC,EAA6CxB,WAA7C,EAA0DyB,WAA1D,EAAuE;AAC7F,MAAIX,cAAc,GAAGS,KAAK,CAACT,cAA3B;AAAA,MACIY,WAAW,GAAGH,KAAK,CAACG,WADxB;AAEA,MAAIC,aAAa,GAAGjB,gBAAgB,CAACc,SAAD,EAAYD,KAAZ,CAApC;;AAEA,MAAIvB,WAAW,GAAG,CAAd,IAAmB,CAACc,cAApB,IAAsC,CAACA,cAAc,CAAC7L,MAAtD,IAAgE+K,WAAW,IAAI2B,aAAa,CAAC1M,MAAjG,EAAyG;AACvG,WAAO,IAAP;AACD,GAP4F,CAO3F;;;AAGF,SAAO6L,cAAc,CAACI,MAAf,CAAsB,UAAUnJ,MAAV,EAAkBoJ,KAAlB,EAAyB;AACpD,QAAIS,IAAI,GAAGT,KAAK,CAAC9K,KAAN,CAAYuL,IAAvB;;AAEA,QAAIA,IAAJ,EAAU;AACR,aAAO7J,MAAP;AACD;;AAED,QAAI8J,YAAY,GAAGV,KAAK,CAAC9K,KAAzB;AAAA,QACIyL,OAAO,GAAGD,YAAY,CAACC,OAD3B;AAAA,QAEIvI,IAAI,GAAGsI,YAAY,CAACtI,IAFxB;AAAA,QAGIwI,IAAI,GAAGF,YAAY,CAACE,IAHxB;AAAA,QAIIC,SAAS,GAAGH,YAAY,CAACG,SAJ7B;AAAA,QAKIrB,IAAI,GAAGkB,YAAY,CAAClB,IALxB;AAAA,QAMIsB,WAAW,GAAGJ,YAAY,CAACI,WAN/B;AAOA,QAAIC,OAAJ;;AAEA,QAAIR,WAAW,CAACI,OAAZ,IAAuB,CAACJ,WAAW,CAACS,uBAAxC,EAAiE;AAC/D;AACA,UAAIC,OAAO,GAAGzB,IAAI,KAAK0B,SAAT,GAAqBV,aAArB,GAAqChB,IAAnD;AACAuB,MAAAA,OAAO,GAAGvF,gBAAgB,CAACyF,OAAD,EAAUV,WAAW,CAACI,OAAtB,EAA+BL,WAA/B,CAA1B;AACD,KAJD,MAIO;AACLS,MAAAA,OAAO,GAAGvB,IAAI,IAAIA,IAAI,CAACX,WAAD,CAAZ,IAA6B2B,aAAa,CAAC3B,WAAD,CAApD;AACD;;AAED,QAAI,CAACkC,OAAL,EAAc;AACZ,aAAOnK,MAAP;AACD;;AAED,WAAO,GAAGsJ,MAAH,CAAUxI,kBAAkB,CAACd,MAAD,CAA5B,EAAsC,CAACwC,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+D,WAAW,CAAC6C,KAAD,CAAhB,CAAd,EAAwC,EAAxC,EAA4C;AACrGW,MAAAA,OAAO,EAAEA,OAD4F;AAErGC,MAAAA,IAAI,EAAEA,IAF+F;AAGrGC,MAAAA,SAAS,EAAEA,SAH0F;AAIrGzI,MAAAA,IAAI,EAAEA,IAAI,IAAIuI,OAJuF;AAKrGQ,MAAAA,KAAK,EAAEzF,yBAAyB,CAACsE,KAAD,CALqE;AAMrGjK,MAAAA,KAAK,EAAEuG,iBAAiB,CAACyE,OAAD,EAAUJ,OAAV,CAN6E;AAOrGS,MAAAA,IAAI,EAAEN,WAP+F;AAQrGC,MAAAA,OAAO,EAAEA;AAR4F,KAA5C,CAAd,CAAtC,CAAP;AAUD,GAtCM,EAsCJ,EAtCI,CAAP;AAuCD,CAjDD;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIM,cAAc,GAAG,SAASA,cAAT,CAAwBjB,KAAxB,EAA+BC,SAA/B,EAA0C7B,MAA1C,EAAkDD,QAAlD,EAA4D;AAC/E,MAAI+C,SAAS,GAAG/C,QAAQ,IAAI;AAC1Bd,IAAAA,CAAC,EAAE2C,KAAK,CAACmB,MADiB;AAE1B7D,IAAAA,CAAC,EAAE0C,KAAK,CAACoB;AAFiB,GAA5B;AAIA,MAAIC,GAAG,GAAGnD,mBAAmB,CAACgD,SAAD,EAAY9C,MAAZ,CAA7B;AACA,MAAIkD,KAAK,GAAGtB,KAAK,CAACuB,mBAAlB;AAAA,MACIC,IAAI,GAAGxB,KAAK,CAACG,WADjB;AAAA,MAEI3B,YAAY,GAAGwB,KAAK,CAACxB,YAFzB;AAGA,MAAIC,WAAW,GAAGpD,wBAAwB,CAACgG,GAAD,EAAMC,KAAN,EAAa9C,YAAb,EAA2BgD,IAA3B,CAA1C;;AAEA,MAAI/C,WAAW,IAAI,CAAf,IAAoBD,YAAxB,EAAsC;AACpC,QAAI0B,WAAW,GAAG1B,YAAY,CAACC,WAAD,CAAZ,IAA6BD,YAAY,CAACC,WAAD,CAAZ,CAA0B9I,KAAzE;AACA,QAAI8L,aAAa,GAAG1B,iBAAiB,CAACC,KAAD,EAAQC,SAAR,EAAmBxB,WAAnB,EAAgCyB,WAAhC,CAArC;AACA,QAAIwB,gBAAgB,GAAGnD,mBAAmB,CAACH,MAAD,EAASkD,KAAT,EAAgB7C,WAAhB,EAA6ByC,SAA7B,CAA1C;AACA,WAAO;AACLS,MAAAA,kBAAkB,EAAElD,WADf;AAELyB,MAAAA,WAAW,EAAEA,WAFR;AAGLuB,MAAAA,aAAa,EAAEA,aAHV;AAILC,MAAAA,gBAAgB,EAAEA;AAJb,KAAP;AAMD;;AAED,SAAO,IAAP;AACD,CAxBD;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIE,gBAAgB,GAAG,SAASA,gBAAT,CAA0B9M,KAA1B,EAAiC+M,KAAjC,EAAwC;AAC7D,MAAIC,IAAI,GAAGD,KAAK,CAACC,IAAjB;AAAA,MACIvC,cAAc,GAAGsC,KAAK,CAACtC,cAD3B;AAAA,MAEIwC,QAAQ,GAAGF,KAAK,CAACE,QAFrB;AAAA,MAGIC,SAAS,GAAGH,KAAK,CAACG,SAHtB;AAAA,MAIIC,WAAW,GAAGJ,KAAK,CAACI,WAJxB;AAAA,MAKIzC,cAAc,GAAGqC,KAAK,CAACrC,cAL3B;AAAA,MAMIC,YAAY,GAAGoC,KAAK,CAACpC,YANzB;AAOA,MAAIrB,MAAM,GAAGtJ,KAAK,CAACsJ,MAAnB;AAAA,MACI8D,QAAQ,GAAGpN,KAAK,CAACoN,QADrB;AAAA,MAEIC,WAAW,GAAGrN,KAAK,CAACqN,WAFxB;AAGA,MAAIC,aAAa,GAAGjG,iBAAiB,CAACiC,MAAD,EAAS2D,QAAT,CAArC,CAX6D,CAWJ;;AAEzD,MAAIM,OAAO,GAAGP,IAAI,CAACnC,MAAL,CAAY,UAAUnJ,MAAV,EAAkBoJ,KAAlB,EAAyB;AACjD,QAAI0C,aAAa,GAAG1C,KAAK,CAAC9K,KAA1B;AAAA,QACIkM,IAAI,GAAGsB,aAAa,CAACtB,IADzB;AAAA,QAEIT,OAAO,GAAG+B,aAAa,CAAC/B,OAF5B;AAAA,QAGIgC,iBAAiB,GAAGD,aAAa,CAACC,iBAHtC;AAAA,QAII3B,uBAAuB,GAAG0B,aAAa,CAAC1B,uBAJ5C;AAAA,QAKI4B,KAAK,GAAGF,aAAa,CAACE,KAL1B;AAAA,QAMIlB,KAAK,GAAGgB,aAAa,CAAChB,KAN1B;AAOA,QAAImB,MAAM,GAAG7C,KAAK,CAAC9K,KAAN,CAAYkN,SAAZ,CAAb;AACA,QAAI5B,aAAa,GAAGjB,gBAAgB,CAACrK,KAAK,CAACsK,IAAP,EAAa;AAC/CG,MAAAA,cAAc,EAAEA,cAAc,CAAC3G,MAAf,CAAsB,UAAU0G,IAAV,EAAgB;AACpD,eAAOA,IAAI,CAACxK,KAAL,CAAWkN,SAAX,MAA0BS,MAAjC;AACD,OAFe,CAD+B;AAI/CjD,MAAAA,cAAc,EAAEA,cAJ+B;AAK/CC,MAAAA,YAAY,EAAEA;AALiC,KAAb,CAApC;AAOA,QAAInH,GAAG,GAAG8H,aAAa,CAAC1M,MAAxB;;AAEA,QAAI,CAAC8C,MAAM,CAACiM,MAAD,CAAX,EAAqB;AACnB,UAAIC,MAAJ,EAAYC,eAAZ,EAA6BC,iBAA7B;;AAEA,UAAIrC,OAAJ,EAAa;AACX;AACAmC,QAAAA,MAAM,GAAGpG,oBAAoB,CAAC8D,aAAD,EAAgBG,OAAhB,EAAyBS,IAAzB,CAA7B;;AAEA,YAAIA,IAAI,KAAK,UAAT,IAAuBoB,aAA3B,EAA0C;AACxC;AACA,cAAIS,SAAS,GAAG5H,YAAY,CAACyH,MAAD,CAA5B;;AAEA,cAAI9B,uBAAuB,IAAIiC,SAA/B,EAA0C;AACxCF,YAAAA,eAAe,GAAGD,MAAlB,CADwC,CACd;;AAE1BA,YAAAA,MAAM,GAAGxP,MAAM,CAAC,CAAD,EAAIoF,GAAJ,CAAf;AACD,WAJD,MAIO,IAAI,CAACsI,uBAAL,EAA8B;AACnC;AACA8B,YAAAA,MAAM,GAAGlG,yBAAyB,CAACoD,KAAK,CAAC9K,KAAN,CAAY4N,MAAb,EAAqBA,MAArB,EAA6B9C,KAA7B,CAAzB,CAA6DD,MAA7D,CAAoE,UAAUmD,WAAV,EAAuBpE,KAAvB,EAA8B;AACzG,qBAAOoE,WAAW,CAACzO,OAAZ,CAAoBqK,KAApB,KAA8B,CAA9B,GAAkCoE,WAAlC,GAAgD,GAAGhD,MAAH,CAAUxI,kBAAkB,CAACwL,WAAD,CAA5B,EAA2C,CAACpE,KAAD,CAA3C,CAAvD;AACD,aAFQ,EAEN,EAFM,CAAT;AAGD;AACF,SAdD,MAcO,IAAIsC,IAAI,KAAK,UAAb,EAAyB;AAC9B;AACA,cAAI,CAACJ,uBAAL,EAA8B;AAC5B8B,YAAAA,MAAM,GAAGlG,yBAAyB,CAACoD,KAAK,CAAC9K,KAAN,CAAY4N,MAAb,EAAqBA,MAArB,EAA6B9C,KAA7B,CAAzB,CAA6DD,MAA7D,CAAoE,UAAUmD,WAAV,EAAuBpE,KAAvB,EAA8B;AACzG,qBAAOoE,WAAW,CAACzO,OAAZ,CAAoBqK,KAApB,KAA8B,CAA9B,IAAmCA,KAAK,KAAK,EAA7C,IAAmDvL,MAAM,CAACuL,KAAD,CAAzD,GAAmEoE,WAAnE,GAAiF,GAAGhD,MAAH,CAAUxI,kBAAkB,CAACwL,WAAD,CAA5B,EAA2C,CAACpE,KAAD,CAA3C,CAAxF;AACD,aAFQ,EAEN,EAFM,CAAT;AAGD,WAJD,MAIO;AACL;AACAgE,YAAAA,MAAM,GAAGA,MAAM,CAAC9J,MAAP,CAAc,UAAU8F,KAAV,EAAiB;AACtC,qBAAOA,KAAK,KAAK,EAAV,IAAgB,CAACvL,MAAM,CAACuL,KAAD,CAA9B;AACD,aAFQ,CAAT;AAGD;AACF,SAZM,MAYA,IAAIsC,IAAI,KAAK,QAAb,EAAuB;AAC5B;AACA,cAAI+B,eAAe,GAAGhH,oBAAoB,CAACqE,aAAD,EAAgBb,cAAc,CAAC3G,MAAf,CAAsB,UAAU0G,IAAV,EAAgB;AAC9F,mBAAOA,IAAI,CAACxK,KAAL,CAAWkN,SAAX,MAA0BS,MAA1B,IAAoC,CAACnD,IAAI,CAACxK,KAAL,CAAWuL,IAAvD;AACD,WAFyD,CAAhB,EAEtCE,OAFsC,EAE7BwB,QAF6B,CAA1C;;AAIA,cAAIgB,eAAJ,EAAqB;AACnBL,YAAAA,MAAM,GAAGK,eAAT;AACD;AACF;;AAED,YAAIX,aAAa,KAAKpB,IAAI,KAAK,QAAT,IAAqBwB,KAAK,KAAK,MAApC,CAAjB,EAA8D;AAC5DI,UAAAA,iBAAiB,GAAGtG,oBAAoB,CAAC8D,aAAD,EAAgBG,OAAhB,EAAyB,UAAzB,CAAxC;AACD;AACF,OA5CD,MA4CO,IAAI6B,aAAJ,EAAmB;AACxB;AACAM,QAAAA,MAAM,GAAGxP,MAAM,CAAC,CAAD,EAAIoF,GAAJ,CAAf;AACD,OAHM,MAGA,IAAI2J,WAAW,IAAIA,WAAW,CAACQ,MAAD,CAA1B,IAAsCR,WAAW,CAACQ,MAAD,CAAX,CAAoBO,QAA1D,IAAsEhC,IAAI,KAAK,QAAnF,EAA6F;AAClG;AACA0B,QAAAA,MAAM,GAAGP,WAAW,KAAK,QAAhB,GAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,GAAoC9F,sBAAsB,CAAC4F,WAAW,CAACQ,MAAD,CAAX,CAAoBR,WAArB,EAAkCzC,cAAlC,EAAkDC,YAAlD,CAAnE;AACD,OAHM,MAGA;AACLiD,QAAAA,MAAM,GAAGtG,4BAA4B,CAACgE,aAAD,EAAgBb,cAAc,CAAC3G,MAAf,CAAsB,UAAU0G,IAAV,EAAgB;AACzF,iBAAOA,IAAI,CAACxK,KAAL,CAAWkN,SAAX,MAA0BS,MAA1B,IAAoC,CAACnD,IAAI,CAACxK,KAAL,CAAWuL,IAAvD;AACD,SAFoD,CAAhB,EAEjCW,IAFiC,EAE3B,IAF2B,CAArC;AAGD;;AAED,UAAIA,IAAI,KAAK,QAAb,EAAuB;AACrB;AACA0B,QAAAA,MAAM,GAAGjG,6BAA6B,CAACyF,QAAD,EAAWQ,MAAX,EAAmBD,MAAnB,EAA2BV,QAA3B,EAAqCT,KAArC,CAAtC;;AAEA,YAAI1B,KAAK,CAAC9K,KAAN,CAAY4N,MAAhB,EAAwB;AACtBA,UAAAA,MAAM,GAAGnG,oBAAoB,CAACqD,KAAK,CAAC9K,KAAN,CAAY4N,MAAb,EAAqBA,MAArB,EAA6BH,iBAA7B,CAA7B;AACD;AACF,OAPD,MAOO,IAAIvB,IAAI,KAAK,UAAT,IAAuBpB,KAAK,CAAC9K,KAAN,CAAY4N,MAAvC,EAA+C;AACpD,YAAIO,UAAU,GAAGrD,KAAK,CAAC9K,KAAN,CAAY4N,MAA7B;AACA,YAAIQ,gBAAgB,GAAGR,MAAM,CAACS,KAAP,CAAa,UAAUzE,KAAV,EAAiB;AACnD,iBAAOuE,UAAU,CAAC5O,OAAX,CAAmBqK,KAAnB,KAA6B,CAApC;AACD,SAFsB,CAAvB;;AAIA,YAAIwE,gBAAJ,EAAsB;AACpBR,UAAAA,MAAM,GAAGO,UAAT;AACD;AACF;;AAED,aAAOjK,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,EAAgC0C,eAAe,CAAC,EAAD,EAAKuJ,MAAL,EAAazJ,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4G,KAAK,CAAC9K,KAAX,CAAd,EAAiC,EAAjC,EAAqC;AAChIiN,QAAAA,QAAQ,EAAEA,QADsH;AAEhIW,QAAAA,MAAM,EAAEA,MAFwH;AAGhIE,QAAAA,iBAAiB,EAAEA,iBAH6G;AAIhID,QAAAA,eAAe,EAAEA,eAJ+G;AAKhIS,QAAAA,cAAc,EAAExD,KAAK,CAAC9K,KAAN,CAAY4N,MALoG;AAMhIN,QAAAA,aAAa,EAAEA,aANiH;AAOhIhE,QAAAA,MAAM,EAAEA;AAPwH,OAArC,CAA1B,CAA/C,CAApB;AASD;;AAED,WAAO5H,MAAP;AACD,GA3Ga,EA2GX,EA3GW,CAAd;AA4GA,SAAO6L,OAAP;AACD,CA1HD;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIgB,iBAAiB,GAAG,SAASA,iBAAT,CAA2BvO,KAA3B,EAAkCwO,KAAlC,EAAyC;AAC/D,MAAI/D,cAAc,GAAG+D,KAAK,CAAC/D,cAA3B;AAAA,MACIgE,IAAI,GAAGD,KAAK,CAACC,IADjB;AAAA,MAEIxB,QAAQ,GAAGuB,KAAK,CAACvB,QAFrB;AAAA,MAGIC,SAAS,GAAGsB,KAAK,CAACtB,SAHtB;AAAA,MAIIC,WAAW,GAAGqB,KAAK,CAACrB,WAJxB;AAAA,MAKIzC,cAAc,GAAG8D,KAAK,CAAC9D,cAL3B;AAAA,MAMIC,YAAY,GAAG6D,KAAK,CAAC7D,YANzB;AAOA,MAAIrB,MAAM,GAAGtJ,KAAK,CAACsJ,MAAnB;AAAA,MACI8D,QAAQ,GAAGpN,KAAK,CAACoN,QADrB;AAEA,MAAI9B,aAAa,GAAGjB,gBAAgB,CAACrK,KAAK,CAACsK,IAAP,EAAa;AAC/CG,IAAAA,cAAc,EAAEA,cAD+B;AAE/CC,IAAAA,cAAc,EAAEA,cAF+B;AAG/CC,IAAAA,YAAY,EAAEA;AAHiC,GAAb,CAApC;AAKA,MAAInH,GAAG,GAAG8H,aAAa,CAAC1M,MAAxB;AACA,MAAI0O,aAAa,GAAGjG,iBAAiB,CAACiC,MAAD,EAAS2D,QAAT,CAArC;AACA,MAAIlD,KAAK,GAAG,CAAC,CAAb,CAjB+D,CAiB/C;AAChB;AACA;AACA;;AAEA,MAAIwD,OAAO,GAAG9C,cAAc,CAACI,MAAf,CAAsB,UAAUnJ,MAAV,EAAkBoJ,KAAlB,EAAyB;AAC3D,QAAI6C,MAAM,GAAG7C,KAAK,CAAC9K,KAAN,CAAYkN,SAAZ,CAAb;;AAEA,QAAI,CAACxL,MAAM,CAACiM,MAAD,CAAX,EAAqB;AACnB5D,MAAAA,KAAK;AACL,UAAI6D,MAAJ;;AAEA,UAAIN,aAAJ,EAAmB;AACjBM,QAAAA,MAAM,GAAGxP,MAAM,CAAC,CAAD,EAAIoF,GAAJ,CAAf;AACD,OAFD,MAEO,IAAI2J,WAAW,IAAIA,WAAW,CAACQ,MAAD,CAA1B,IAAsCR,WAAW,CAACQ,MAAD,CAAX,CAAoBO,QAA9D,EAAwE;AAC7EN,QAAAA,MAAM,GAAGrG,sBAAsB,CAAC4F,WAAW,CAACQ,MAAD,CAAX,CAAoBR,WAArB,EAAkCzC,cAAlC,EAAkDC,YAAlD,CAA/B;AACAiD,QAAAA,MAAM,GAAGjG,6BAA6B,CAACyF,QAAD,EAAWQ,MAAX,EAAmBD,MAAnB,EAA2BV,QAA3B,CAAtC;AACD,OAHM,MAGA;AACLW,QAAAA,MAAM,GAAGnG,oBAAoB,CAACgH,IAAI,CAACC,YAAL,CAAkBd,MAAnB,EAA2BtG,4BAA4B,CAACgE,aAAD,EAAgBb,cAAc,CAAC3G,MAAf,CAAsB,UAAU0G,IAAV,EAAgB;AACxI,iBAAOA,IAAI,CAACxK,KAAL,CAAWkN,SAAX,MAA0BS,MAA1B,IAAoC,CAACnD,IAAI,CAACxK,KAAL,CAAWuL,IAAvD;AACD,SAFmG,CAAhB,EAEhF,QAFgF,CAAvD,EAEdkD,IAAI,CAACC,YAAL,CAAkBjB,iBAFJ,CAA7B;AAGAG,QAAAA,MAAM,GAAGjG,6BAA6B,CAACyF,QAAD,EAAWQ,MAAX,EAAmBD,MAAnB,EAA2BV,QAA3B,CAAtC;AACD;;AAED,aAAO/I,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,EAAgC0C,eAAe,CAAC,EAAD,EAAKuJ,MAAL,EAAazJ,aAAa,CAACA,aAAa,CAAC;AAC1G+I,QAAAA,QAAQ,EAAEA;AADgG,OAAD,EAExGwB,IAAI,CAACC,YAFmG,CAAd,EAEtE,EAFsE,EAElE;AACzBnD,QAAAA,IAAI,EAAE,IADmB;AAEzBoD,QAAAA,WAAW,EAAExQ,IAAI,CAACgK,UAAD,EAAa,GAAG6C,MAAH,CAAUiC,QAAV,EAAoB,GAApB,EAAyBjC,MAAzB,CAAgCjB,KAAK,GAAG,CAAxC,CAAb,EAAyD,IAAzD,CAFQ;AAGzB6D,QAAAA,MAAM,EAAEA,MAHiB;AAIzBU,QAAAA,cAAc,EAAEG,IAAI,CAACC,YAAL,CAAkBd,MAJT;AAKzBN,QAAAA,aAAa,EAAEA,aALU;AAMzBhE,QAAAA,MAAM,EAAEA,MANiB,CAMV;AACf;;AAPyB,OAFkE,CAA1B,CAA/C,CAApB;AAYD;;AAED,WAAO5H,MAAP;AACD,GAlCa,EAkCX,EAlCW,CAAd;AAmCA,SAAO6L,OAAP;AACD,CA1DD;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIqB,UAAU,GAAG,SAASA,UAAT,CAAoB5O,KAApB,EAA2B6O,KAA3B,EAAkC;AACjD,MAAIC,cAAc,GAAGD,KAAK,CAAC5B,QAA3B;AAAA,MACIA,QAAQ,GAAG6B,cAAc,KAAK,KAAK,CAAxB,GAA4B,OAA5B,GAAsCA,cADrD;AAAA,MAEIC,QAAQ,GAAGF,KAAK,CAACE,QAFrB;AAAA,MAGItE,cAAc,GAAGoE,KAAK,CAACpE,cAH3B;AAAA,MAII0C,WAAW,GAAG0B,KAAK,CAAC1B,WAJxB;AAAA,MAKIzC,cAAc,GAAGmE,KAAK,CAACnE,cAL3B;AAAA,MAMIC,YAAY,GAAGkE,KAAK,CAAClE,YANzB;AAOA,MAAIyC,QAAQ,GAAGpN,KAAK,CAACoN,QAArB;AACA,MAAIF,SAAS,GAAG,GAAGlC,MAAH,CAAUiC,QAAV,EAAoB,IAApB,CAAhB,CATiD,CASN;;AAE3C,MAAID,IAAI,GAAG1H,aAAa,CAAC8H,QAAD,EAAW2B,QAAX,CAAxB;AACA,MAAIxB,OAAO,GAAG,EAAd;;AAEA,MAAIP,IAAI,IAAIA,IAAI,CAACpO,MAAjB,EAAyB;AACvB2O,IAAAA,OAAO,GAAGT,gBAAgB,CAAC9M,KAAD,EAAQ;AAChCgN,MAAAA,IAAI,EAAEA,IAD0B;AAEhCvC,MAAAA,cAAc,EAAEA,cAFgB;AAGhCwC,MAAAA,QAAQ,EAAEA,QAHsB;AAIhCC,MAAAA,SAAS,EAAEA,SAJqB;AAKhCC,MAAAA,WAAW,EAAEA,WALmB;AAMhCzC,MAAAA,cAAc,EAAEA,cANgB;AAOhCC,MAAAA,YAAY,EAAEA;AAPkB,KAAR,CAA1B;AASD,GAVD,MAUO,IAAIF,cAAc,IAAIA,cAAc,CAAC7L,MAArC,EAA6C;AAClD2O,IAAAA,OAAO,GAAGgB,iBAAiB,CAACvO,KAAD,EAAQ;AACjCyO,MAAAA,IAAI,EAAEM,QAD2B;AAEjCtE,MAAAA,cAAc,EAAEA,cAFiB;AAGjCwC,MAAAA,QAAQ,EAAEA,QAHuB;AAIjCC,MAAAA,SAAS,EAAEA,SAJsB;AAKjCC,MAAAA,WAAW,EAAEA,WALoB;AAMjCzC,MAAAA,cAAc,EAAEA,cANiB;AAOjCC,MAAAA,YAAY,EAAEA;AAPmB,KAAR,CAA3B;AASD;;AAED,SAAO4C,OAAP;AACD,CArCD;;AAuCA,IAAIyB,qBAAqB,GAAG,SAASA,qBAAT,CAA+BzB,OAA/B,EAAwC;AAClE,MAAIb,IAAI,GAAGxG,qBAAqB,CAACqH,OAAD,CAAhC;AACA,MAAI7D,YAAY,GAAG5C,cAAc,CAAC4F,IAAD,EAAO,KAAP,EAAc,IAAd,CAAjC;AACA,SAAO;AACLhD,IAAAA,YAAY,EAAEA,YADT;AAEL+C,IAAAA,mBAAmB,EAAEvO,OAAO,CAACwL,YAAD,EAAe,UAAU3I,CAAV,EAAa;AACtD,aAAOA,CAAC,CAACiJ,UAAT;AACD,KAF2B,CAFvB;AAKLqB,IAAAA,WAAW,EAAEqB,IALR;AAMLuC,IAAAA,mBAAmB,EAAE/H,iBAAiB,CAACwF,IAAD;AANjC,GAAP;AAQD,CAXD;AAYA;AACA;AACA;AACA;AACA;;;AAGA,IAAIwC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BlP,KAA5B,EAAmC;AAC1D,MAAIoN,QAAQ,GAAGpN,KAAK,CAACoN,QAArB;AAAA,MACI+B,kBAAkB,GAAGnP,KAAK,CAACmP,kBAD/B;AAEA,MAAIC,SAAS,GAAG7J,eAAe,CAAC6H,QAAD,EAAWrH,KAAK,CAACsJ,WAAjB,CAA/B;AACA,MAAIC,UAAU,GAAGF,SAAS,IAAIA,SAAS,CAACpP,KAAvB,IAAgCoP,SAAS,CAACpP,KAAV,CAAgBsP,UAAhD,IAA8D,CAA/E;AACA,MAAIC,QAAQ,GAAGH,SAAS,IAAIA,SAAS,CAACpP,KAAvB,IAAgCoP,SAAS,CAACpP,KAAV,CAAgBuP,QAAhD,IAA4DvP,KAAK,CAACsK,IAAN,IAActK,KAAK,CAACsK,IAAN,CAAW1L,MAAX,GAAoB,CAA9F,IAAmG,CAAlH;AACA,SAAO;AACLyN,IAAAA,MAAM,EAAE,CADH;AAELC,IAAAA,MAAM,EAAE,CAFH;AAGL5B,IAAAA,cAAc,EAAE4E,UAHX;AAIL3E,IAAAA,YAAY,EAAE4E,QAJT;AAKL1C,IAAAA,kBAAkB,EAAE,CAAC,CALhB;AAML2C,IAAAA,eAAe,EAAE,CAACnR,MAAM,CAAC8Q,kBAAD,CAAP,GAA8BA,kBAA9B,GAAmD;AAN/D,GAAP;AAQD,CAdD;;AAgBA,IAAIM,mBAAmB,GAAG,SAASA,mBAAT,CAA6BhF,cAA7B,EAA6C;AACrE,MAAI,CAACA,cAAD,IAAmB,CAACA,cAAc,CAAC7L,MAAvC,EAA+C;AAC7C,WAAO,KAAP;AACD;;AAED,SAAO6L,cAAc,CAACiF,IAAf,CAAoB,UAAUlF,IAAV,EAAgB;AACzC,QAAItH,IAAI,GAAGsC,cAAc,CAACgF,IAAI,IAAIA,IAAI,CAAC0B,IAAd,CAAzB;AACA,WAAOhJ,IAAI,IAAIA,IAAI,CAAC3D,OAAL,CAAa,KAAb,KAAuB,CAAtC;AACD,GAHM,CAAP;AAID,CATD;;AAWA,IAAIoQ,mBAAmB,GAAG,SAASA,mBAAT,CAA6BrG,MAA7B,EAAqC;AAC7D,MAAIA,MAAM,KAAK,YAAf,EAA6B;AAC3B,WAAO;AACLsG,MAAAA,eAAe,EAAE,OADZ;AAELC,MAAAA,YAAY,EAAE;AAFT,KAAP;AAID;;AAED,MAAIvG,MAAM,KAAK,UAAf,EAA2B;AACzB,WAAO;AACLsG,MAAAA,eAAe,EAAE,OADZ;AAELC,MAAAA,YAAY,EAAE;AAFT,KAAP;AAID;;AAED,MAAIvG,MAAM,KAAK,SAAf,EAA0B;AACxB,WAAO;AACLsG,MAAAA,eAAe,EAAE,YADZ;AAELC,MAAAA,YAAY,EAAE;AAFT,KAAP;AAID;;AAED,SAAO;AACLD,IAAAA,eAAe,EAAE,WADZ;AAELC,IAAAA,YAAY,EAAE;AAFT,GAAP;AAID,CA1BD;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,cAAhC,EAAgD;AACpE,MAAIhQ,KAAK,GAAG+P,KAAK,CAAC/P,KAAlB;AAAA,MACIyK,cAAc,GAAGsF,KAAK,CAACtF,cAD3B;AAAA,MAEIwF,cAAc,GAAGF,KAAK,CAACG,QAF3B;AAAA,MAGIA,QAAQ,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,EAA5B,GAAiCA,cAHhD;AAAA,MAIIE,cAAc,GAAGJ,KAAK,CAACK,QAJ3B;AAAA,MAKIA,QAAQ,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,EAA5B,GAAiCA,cALhD;AAMA,MAAIE,KAAK,GAAGrQ,KAAK,CAACqQ,KAAlB;AAAA,MACIC,MAAM,GAAGtQ,KAAK,CAACsQ,MADnB;AAAA,MAEIlD,QAAQ,GAAGpN,KAAK,CAACoN,QAFrB;AAGA,MAAImD,MAAM,GAAGvQ,KAAK,CAACuQ,MAAN,IAAgB,EAA7B;AACA,MAAInB,SAAS,GAAG7J,eAAe,CAAC6H,QAAD,EAAWrH,KAAK,CAACsJ,WAAjB,CAA/B;AACA,MAAImB,UAAU,GAAGjL,eAAe,CAAC6H,QAAD,EAAWpI,MAAM,CAACqK,WAAlB,CAAhC;AACA,MAAIoB,OAAO,GAAGlS,MAAM,CAACmB,IAAP,CAAY0Q,QAAZ,EAAsBvF,MAAtB,CAA6B,UAAUnJ,MAAV,EAAkBgP,EAAlB,EAAsB;AAC/D,QAAI9G,KAAK,GAAGwG,QAAQ,CAACM,EAAD,CAApB;AACA,QAAI/B,WAAW,GAAG/E,KAAK,CAAC+E,WAAxB;;AAEA,QAAI,CAAC/E,KAAK,CAAC+G,MAAP,IAAiB,CAAC/G,KAAK,CAAC2B,IAA5B,EAAkC;AAChC,aAAOrH,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,EAAgC0C,eAAe,CAAC,EAAD,EAAKuK,WAAL,EAAkBjN,MAAM,CAACiN,WAAD,CAAN,GAAsB/E,KAAK,CAACyG,KAA9C,CAA/C,CAApB;AACD;;AAED,WAAO3O,MAAP;AACD,GATa,EASX;AACDkP,IAAAA,IAAI,EAAEL,MAAM,CAACK,IAAP,IAAe,CADpB;AAEDC,IAAAA,KAAK,EAAEN,MAAM,CAACM,KAAP,IAAgB;AAFtB,GATW,CAAd;AAaA,MAAIC,OAAO,GAAGvS,MAAM,CAACmB,IAAP,CAAYwQ,QAAZ,EAAsBrF,MAAtB,CAA6B,UAAUnJ,MAAV,EAAkBgP,EAAlB,EAAsB;AAC/D,QAAI9G,KAAK,GAAGsG,QAAQ,CAACQ,EAAD,CAApB;AACA,QAAI/B,WAAW,GAAG/E,KAAK,CAAC+E,WAAxB;;AAEA,QAAI,CAAC/E,KAAK,CAAC+G,MAAP,IAAiB,CAAC/G,KAAK,CAAC2B,IAA5B,EAAkC;AAChC,aAAOrH,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,EAAgC0C,eAAe,CAAC,EAAD,EAAKuK,WAAL,EAAkBxQ,IAAI,CAACuD,MAAD,EAAS,GAAGsJ,MAAH,CAAU2D,WAAV,CAAT,CAAJ,GAAuC/E,KAAK,CAAC0G,MAA/D,CAA/C,CAApB;AACD;;AAED,WAAO5O,MAAP;AACD,GATa,EASX;AACDqP,IAAAA,GAAG,EAAER,MAAM,CAACQ,GAAP,IAAc,CADlB;AAEDC,IAAAA,MAAM,EAAET,MAAM,CAACS,MAAP,IAAiB;AAFxB,GATW,CAAd;;AAcA,MAAIC,MAAM,GAAG/M,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4M,OAAL,CAAd,EAA6BL,OAA7B,CAA1B;;AAEA,MAAIS,WAAW,GAAGD,MAAM,CAACD,MAAzB;;AAEA,MAAI5B,SAAJ,EAAe;AACb6B,IAAAA,MAAM,CAACD,MAAP,IAAiB5B,SAAS,CAACpP,KAAV,CAAgBsQ,MAAhB,IAA0BvK,KAAK,CAAC2I,YAAN,CAAmB4B,MAA9D;AACD;;AAED,MAAIE,UAAU,IAAIR,cAAlB,EAAkC;AAChCiB,IAAAA,MAAM,GAAGtK,oBAAoB,CAACsK,MAAD,EAASxG,cAAT,EAAyBzK,KAAzB,EAAgCgQ,cAAhC,CAA7B;AACD;;AAED,SAAO9L,aAAa,CAACA,aAAa,CAAC;AACjCgN,IAAAA,WAAW,EAAEA;AADoB,GAAD,EAE/BD,MAF+B,CAAd,EAER,EAFQ,EAEJ;AACdZ,IAAAA,KAAK,EAAEA,KAAK,GAAGY,MAAM,CAACL,IAAf,GAAsBK,MAAM,CAACJ,KADtB;AAEdP,IAAAA,MAAM,EAAEA,MAAM,GAAGW,MAAM,CAACF,GAAhB,GAAsBE,MAAM,CAACD;AAFvB,GAFI,CAApB;AAMD,CA1DD;;AA4DA,OAAO,IAAIG,wBAAwB,GAAG,SAASA,wBAAT,CAAkCC,KAAlC,EAAyC;AAC7E,MAAIC,MAAJ,EAAYC,KAAZ;;AAEA,MAAIC,SAAS,GAAGH,KAAK,CAACG,SAAtB;AAAA,MACIC,cAAc,GAAGJ,KAAK,CAACI,cAD3B;AAAA,MAEIC,eAAe,GAAGL,KAAK,CAACM,SAF5B;AAAA,MAGIA,SAAS,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,MAA7B,GAAsCA,eAHtD;AAAA,MAIIE,cAAc,GAAGP,KAAK,CAACO,cAJ3B;AAAA,MAKIC,aAAa,GAAGR,KAAK,CAACQ,aAL1B;AAAA,MAMIC,aAAa,GAAGT,KAAK,CAACS,aAN1B;AAAA,MAOInD,YAAY,GAAG0C,KAAK,CAAC1C,YAPzB;;AASA,MAAIoD,cAAc,GAAG,SAASA,cAAT,CAAwB9R,KAAxB,EAA+B+R,YAA/B,EAA6C;AAChE,QAAItH,cAAc,GAAGsH,YAAY,CAACtH,cAAlC;AAAA,QACI0C,WAAW,GAAG4E,YAAY,CAAC5E,WAD/B;AAAA,QAEI8D,MAAM,GAAGc,YAAY,CAACd,MAF1B;AAAA,QAGIe,QAAQ,GAAGD,YAAY,CAACC,QAH5B;AAAA,QAIItH,cAAc,GAAGqH,YAAY,CAACrH,cAJlC;AAAA,QAKIC,YAAY,GAAGoH,YAAY,CAACpH,YALhC;AAMA,QAAIsH,OAAO,GAAGjS,KAAK,CAACiS,OAApB;AAAA,QACI3I,MAAM,GAAGtJ,KAAK,CAACsJ,MADnB;AAAA,QAEI4I,MAAM,GAAGlS,KAAK,CAACkS,MAFnB;AAAA,QAGIC,cAAc,GAAGnS,KAAK,CAACmS,cAH3B;AAAA,QAIIC,gBAAgB,GAAGpS,KAAK,CAACqS,UAJ7B;;AAMA,QAAIC,oBAAoB,GAAG3C,mBAAmB,CAACrG,MAAD,CAA9C;AAAA,QACIsG,eAAe,GAAG0C,oBAAoB,CAAC1C,eAD3C;AAAA,QAEIC,YAAY,GAAGyC,oBAAoB,CAACzC,YAFxC;;AAIA,QAAI0C,MAAM,GAAG9C,mBAAmB,CAAChF,cAAD,CAAhC;AACA,QAAI+H,QAAQ,GAAGD,MAAM,IAAI9L,cAAc,CAAC;AACtCwL,MAAAA,OAAO,EAAEA,OAD6B;AAEtC9E,MAAAA,WAAW,EAAEA;AAFyB,KAAD,CAAvC;AAIA,QAAIsF,aAAa,GAAG,EAApB;AACAhI,IAAAA,cAAc,CAACtG,OAAf,CAAuB,UAAUqG,IAAV,EAAgBT,KAAhB,EAAuB;AAC5C,UAAIuB,aAAa,GAAGjB,gBAAgB,CAACrK,KAAK,CAACsK,IAAP,EAAa;AAC/CI,QAAAA,cAAc,EAAEA,cAD+B;AAE/CC,QAAAA,YAAY,EAAEA;AAFiC,OAAb,EAGjCH,IAHiC,CAApC;AAIA,UAAIkI,WAAW,GAAGlI,IAAI,CAACxK,KAAvB;AAAA,UACIyL,OAAO,GAAGiH,WAAW,CAACjH,OAD1B;AAAA,UAEIkH,eAAe,GAAGD,WAAW,CAACL,UAFlC;AAGA,UAAIO,aAAa,GAAGpI,IAAI,CAACxK,KAAL,CAAW,GAAGgL,MAAH,CAAU4E,eAAV,EAA2B,IAA3B,CAAX,CAApB;AACA,UAAIiD,UAAU,GAAGrI,IAAI,CAACxK,KAAL,CAAW,GAAGgL,MAAH,CAAU6E,YAAV,EAAwB,IAAxB,CAAX,CAAjB;AACA,UAAIiD,OAAO,GAAGnB,cAAc,CAAC9G,MAAf,CAAsB,UAAUnJ,MAAV,EAAkBkI,KAAlB,EAAyB;AAC3D,YAAImJ,cAAJ;;AAEA,YAAIxF,OAAO,GAAGwE,YAAY,CAAC,GAAG/G,MAAH,CAAUpB,KAAK,CAACqD,QAAhB,EAA0B,KAA1B,CAAD,CAA1B;AACA,YAAIyD,EAAE,GAAGlG,IAAI,CAACxK,KAAL,CAAW,GAAGgL,MAAH,CAAUpB,KAAK,CAACqD,QAAhB,EAA0B,IAA1B,CAAX,CAAT;AACA,YAAIP,IAAI,GAAGa,OAAO,IAAIA,OAAO,CAACmD,EAAD,CAA7B;AACA,eAAOxM,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,GAAiCqR,cAAc,GAAG,EAAjB,EAAqB3O,eAAe,CAAC2O,cAAD,EAAiBnJ,KAAK,CAACqD,QAAvB,EAAiCP,IAAjC,CAApC,EAA4EtI,eAAe,CAAC2O,cAAD,EAAiB,GAAG/H,MAAH,CAAUpB,KAAK,CAACqD,QAAhB,EAA0B,OAA1B,CAAjB,EAAqDnG,cAAc,CAAC4F,IAAD,CAAnE,CAA3F,EAAuKqG,cAAxM,EAApB;AACD,OAPa,EAOX,EAPW,CAAd;AAQA,UAAIC,QAAQ,GAAGF,OAAO,CAACjD,YAAD,CAAtB;AACA,UAAIoD,SAAS,GAAGH,OAAO,CAAC,GAAG9H,MAAH,CAAU6E,YAAV,EAAwB,OAAxB,CAAD,CAAvB;AACA,UAAIqD,WAAW,GAAG/F,WAAW,IAAIA,WAAW,CAACyF,aAAD,CAA1B,IAA6CzF,WAAW,CAACyF,aAAD,CAAX,CAA2B1E,QAAxE,IAAoFlH,oBAAoB,CAACwD,IAAD,EAAO2C,WAAW,CAACyF,aAAD,CAAX,CAA2BzF,WAAlC,CAA1H;AACA,UAAIgG,SAAS,GAAG3N,cAAc,CAACgF,IAAI,CAAC0B,IAAN,CAAd,CAA0B3M,OAA1B,CAAkC,KAAlC,KAA4C,CAA5D;AACA,UAAI6T,QAAQ,GAAGlM,iBAAiB,CAAC8L,QAAD,EAAWC,SAAX,CAAhC;AACA,UAAII,WAAW,GAAG,EAAlB;;AAEA,UAAIF,SAAJ,EAAe;AACb,YAAIG,WAAW,GAAGpM,iBAAiB,CAAC8L,QAAD,EAAWC,SAAX,EAAsB,IAAtB,CAAnC,CADa,CACmD;;AAEhE,YAAIZ,UAAU,GAAGhU,MAAM,CAACsU,eAAD,CAAN,GAA0BP,gBAA1B,GAA6CO,eAA9D;AACAU,QAAAA,WAAW,GAAG3M,cAAc,CAAC;AAC3BwL,UAAAA,MAAM,EAAEA,MADmB;AAE3BC,UAAAA,cAAc,EAAEA,cAFW;AAG3BiB,UAAAA,QAAQ,EAAEE,WAAW,KAAKF,QAAhB,GAA2BE,WAA3B,GAAyCF,QAHxB;AAI3BZ,UAAAA,QAAQ,EAAEA,QAAQ,CAACK,UAAD,CAJS;AAK3BR,UAAAA,UAAU,EAAEA;AALe,SAAD,CAA5B;;AAQA,YAAIiB,WAAW,KAAKF,QAApB,EAA8B;AAC5BC,UAAAA,WAAW,GAAGA,WAAW,CAACE,GAAZ,CAAgB,UAAUhH,GAAV,EAAe;AAC3C,mBAAOrI,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKqI,GAAL,CAAd,EAAyB,EAAzB,EAA6B;AAC/CiH,cAAAA,QAAQ,EAAEtP,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKqI,GAAG,CAACiH,QAAT,CAAd,EAAkC,EAAlC,EAAsC;AAC3DvC,gBAAAA,MAAM,EAAE1E,GAAG,CAACiH,QAAJ,CAAavC,MAAb,GAAsBqC,WAAW,GAAG;AADe,eAAtC;AADwB,aAA7B,CAApB;AAKD,WANa,CAAd;AAOD;AACF;;AAED,UAAIG,WAAW,GAAGjJ,IAAI,IAAIA,IAAI,CAAC0B,IAAb,IAAqB1B,IAAI,CAAC0B,IAAL,CAAUwH,eAAjD;;AAEA,UAAID,WAAJ,EAAiB;AACf,YAAIE,cAAJ;;AAEAlB,QAAAA,aAAa,CAACxO,IAAd,CAAmB;AACjBjE,UAAAA,KAAK,EAAEkE,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKuP,WAAW,CAACvP,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4O,OAAL,CAAd,EAA6B,EAA7B,EAAiC;AAC/FxH,YAAAA,aAAa,EAAEA,aADgF;AAE/FtL,YAAAA,KAAK,EAAEA,KAFwF;AAG/FyL,YAAAA,OAAO,EAAEA,OAHsF;AAI/FjB,YAAAA,IAAI,EAAEA,IAJyF;AAK/F4I,YAAAA,QAAQ,EAAEA,QALqF;AAM/FC,YAAAA,WAAW,EAAEA,WANkF;AAO/FpC,YAAAA,MAAM,EAAEA,MAPuF;AAQ/FiC,YAAAA,WAAW,EAAEA,WARkF;AAS/F5J,YAAAA,MAAM,EAAEA,MATuF;AAU/FoB,YAAAA,cAAc,EAAEA,cAV+E;AAW/FC,YAAAA,YAAY,EAAEA;AAXiF,WAAjC,CAAd,CAAhB,CAAd,EAYd,EAZc,GAYTgJ,cAAc,GAAG;AAC1B7U,YAAAA,GAAG,EAAE0L,IAAI,CAAC1L,GAAL,IAAY,QAAQkM,MAAR,CAAejB,KAAf;AADS,WAAjB,EAER3F,eAAe,CAACuP,cAAD,EAAiB/D,eAAjB,EAAkCkD,OAAO,CAAClD,eAAD,CAAzC,CAFP,EAEoExL,eAAe,CAACuP,cAAD,EAAiB9D,YAAjB,EAA+BiD,OAAO,CAACjD,YAAD,CAAtC,CAFnF,EAE0IzL,eAAe,CAACuP,cAAD,EAAiB,aAAjB,EAAgC3B,QAAhC,CAFzJ,EAEoM2B,cAd3L,EADH;AAgBjBC,UAAAA,UAAU,EAAEnO,eAAe,CAAC+E,IAAD,EAAOxK,KAAK,CAACoN,QAAb,CAhBV;AAiBjB5C,UAAAA,IAAI,EAAEA;AAjBW,SAAnB;AAmBD;AACF,KAzED;AA0EA,WAAOiI,aAAP;AACD,GAlGD;AAmGA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGE,MAAIoB,yCAAyC,GAAG,SAASA,yCAAT,CAAmDC,KAAnD,EAA0DC,SAA1D,EAAqE;AACnH,QAAI/T,KAAK,GAAG8T,KAAK,CAAC9T,KAAlB;AAAA,QACI0K,cAAc,GAAGoJ,KAAK,CAACpJ,cAD3B;AAAA,QAEIC,YAAY,GAAGmJ,KAAK,CAACnJ,YAFzB;AAAA,QAGIqH,QAAQ,GAAG8B,KAAK,CAAC9B,QAHrB;;AAKA,QAAI,CAACtM,mBAAmB,CAAC;AACvB1F,MAAAA,KAAK,EAAEA;AADgB,KAAD,CAAxB,EAEI;AACF,aAAO,IAAP;AACD;;AAED,QAAIoN,QAAQ,GAAGpN,KAAK,CAACoN,QAArB;AAAA,QACI9D,MAAM,GAAGtJ,KAAK,CAACsJ,MADnB;AAAA,QAEI+D,WAAW,GAAGrN,KAAK,CAACqN,WAFxB;AAAA,QAGI/C,IAAI,GAAGtK,KAAK,CAACsK,IAHjB;AAAA,QAII0J,iBAAiB,GAAGhU,KAAK,CAACgU,iBAJ9B;;AAMA,QAAIC,qBAAqB,GAAGtE,mBAAmB,CAACrG,MAAD,CAA/C;AAAA,QACIsG,eAAe,GAAGqE,qBAAqB,CAACrE,eAD5C;AAAA,QAEIC,YAAY,GAAGoE,qBAAqB,CAACpE,YAFzC;;AAIA,QAAIpF,cAAc,GAAGnF,aAAa,CAAC8H,QAAD,EAAWoE,cAAX,CAAlC;AACA,QAAIrE,WAAW,GAAGhG,sBAAsB,CAACmD,IAAD,EAAOG,cAAP,EAAuB,GAAGO,MAAH,CAAU4E,eAAV,EAA2B,IAA3B,CAAvB,EAAyD,GAAG5E,MAAH,CAAU6E,YAAV,EAAwB,IAAxB,CAAzD,EAAwFxC,WAAxF,EAAqG2G,iBAArG,CAAxC;AACA,QAAIlB,OAAO,GAAGnB,cAAc,CAAC9G,MAAf,CAAsB,UAAUnJ,MAAV,EAAkBkI,KAAlB,EAAyB;AAC3D,UAAI1G,IAAI,GAAG,GAAG8H,MAAH,CAAUpB,KAAK,CAACqD,QAAhB,EAA0B,KAA1B,CAAX;AACA,aAAO/I,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKxC,MAAL,CAAd,EAA4B,EAA5B,EAAgC0C,eAAe,CAAC,EAAD,EAAKlB,IAAL,EAAW0L,UAAU,CAAC5O,KAAD,EAAQkE,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK0F,KAAL,CAAd,EAA2B,EAA3B,EAA+B;AAC1Ia,QAAAA,cAAc,EAAEA,cAD0H;AAE1I0C,QAAAA,WAAW,EAAEvD,KAAK,CAACqD,QAAN,KAAmB2C,eAAnB,IAAsCzC,WAFuF;AAG1IzC,QAAAA,cAAc,EAAEA,cAH0H;AAI1IC,QAAAA,YAAY,EAAEA;AAJ4H,OAA/B,CAArB,CAArB,CAA/C,CAApB;AAMD,KARa,EAQX,EARW,CAAd;AASA,QAAIsG,MAAM,GAAGnB,eAAe,CAAC5L,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4O,OAAL,CAAd,EAA6B,EAA7B,EAAiC;AACzE9S,MAAAA,KAAK,EAAEA,KADkE;AAEzEyK,MAAAA,cAAc,EAAEA;AAFyD,KAAjC,CAAd,EAGxBsJ,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACG,UAHxC,CAA5B;AAIA3V,IAAAA,MAAM,CAACmB,IAAP,CAAYoT,OAAZ,EAAqB3O,OAArB,CAA6B,UAAUrF,GAAV,EAAe;AAC1CgU,MAAAA,OAAO,CAAChU,GAAD,CAAP,GAAe+S,aAAa,CAAC7R,KAAD,EAAQ8S,OAAO,CAAChU,GAAD,CAAf,EAAsBmS,MAAtB,EAA8BnS,GAAG,CAACqV,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,CAA9B,EAAsD5C,SAAtD,CAA5B;AACD,KAFD;AAGA,QAAI6C,WAAW,GAAGtB,OAAO,CAAC,GAAG9H,MAAH,CAAU6E,YAAV,EAAwB,KAAxB,CAAD,CAAzB;AACA,QAAIwE,QAAQ,GAAGrF,qBAAqB,CAACoF,WAAD,CAApC;AACA,QAAIE,sBAAsB,GAAGxC,cAAc,CAAC9R,KAAD,EAAQkE,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4O,OAAL,CAAd,EAA6B,EAA7B,EAAiC;AAC/FpI,MAAAA,cAAc,EAAEA,cAD+E;AAE/FC,MAAAA,YAAY,EAAEA,YAFiF;AAG/FqH,MAAAA,QAAQ,EAAEA,QAHqF;AAI/FvH,MAAAA,cAAc,EAAEA,cAJ+E;AAK/F0C,MAAAA,WAAW,EAAEA,WALkF;AAM/F8D,MAAAA,MAAM,EAAEA;AANuF,KAAjC,CAArB,CAA3C;AAQA,WAAO/M,aAAa,CAACA,aAAa,CAAC;AACjCoQ,MAAAA,sBAAsB,EAAEA,sBADS;AAEjC7J,MAAAA,cAAc,EAAEA,cAFiB;AAGjCwG,MAAAA,MAAM,EAAEA,MAHyB;AAIjC9D,MAAAA,WAAW,EAAEA;AAJoB,KAAD,EAK/BkH,QAL+B,CAAd,EAKNvB,OALM,CAApB;AAMD,GAxDD;;AA0DA,SAAOxB,KAAK,GAAGD,MAAM,GAAG,aAAa,UAAUkD,UAAV,EAAsB;AACzD9T,IAAAA,SAAS,CAAC+T,uBAAD,EAA0BD,UAA1B,CAAT;;AAEA,QAAIE,MAAM,GAAGtT,YAAY,CAACqT,uBAAD,CAAzB,CAHyD,CAKzD;;;AACA,aAASA,uBAAT,CAAiCE,MAAjC,EAAyC;AACvC,UAAIC,KAAJ;;AAEAhV,MAAAA,eAAe,CAAC,IAAD,EAAO6U,uBAAP,CAAf;;AAEAG,MAAAA,KAAK,GAAGF,MAAM,CAACzV,IAAP,CAAY,IAAZ,EAAkB0V,MAAlB,CAAR;AACAC,MAAAA,KAAK,CAACC,aAAN,GAAsB,KAAK,CAA3B;AACAD,MAAAA,KAAK,CAACE,UAAN,GAAmB,KAAK,CAAxB;AACAF,MAAAA,KAAK,CAACG,cAAN,GAAuB,KAAK,CAA5B;AACAH,MAAAA,KAAK,CAACI,OAAN,GAAgB,KAAK,CAArB;AACAJ,MAAAA,KAAK,CAACK,SAAN,GAAkB,KAAK,CAAvB;;AAEAL,MAAAA,KAAK,CAACM,YAAN,GAAqB,YAAY;AAC/B,YAAI,CAAC5W,MAAM,CAACsW,KAAK,CAACI,OAAP,CAAP,IAA0B/L,UAA9B,EAA0C;AACxCA,UAAAA,UAAU,CAAC2L,KAAK,CAACI,OAAP,CAAV;AACD;;AAEDJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,IAAhB;AACD,OAND;;AAQAJ,MAAAA,KAAK,CAACO,sBAAN,GAA+B,UAAUC,GAAV,EAAe;AAC5C,YAAIA,GAAG,IAAIR,KAAK,CAACG,cAAjB,EAAiC;AAC/B,cAAIM,WAAW,GAAGT,KAAK,CAACzJ,KAAxB;AAAA,cACIR,cAAc,GAAG0K,WAAW,CAAC1K,cADjC;AAAA,cAEIC,YAAY,GAAGyK,WAAW,CAACzK,YAF/B;AAAA,cAGIqH,QAAQ,GAAGoD,WAAW,CAACpD,QAH3B;;AAKA2C,UAAAA,KAAK,CAACU,QAAN,CAAenR,aAAa,CAAC;AAC3BgQ,YAAAA,UAAU,EAAEiB;AADe,WAAD,EAEzBtB,yCAAyC,CAAC;AAC3C7T,YAAAA,KAAK,EAAE2U,KAAK,CAAC3U,KAD8B;AAE3C0K,YAAAA,cAAc,EAAEA,cAF2B;AAG3CC,YAAAA,YAAY,EAAEA,YAH6B;AAI3CqH,YAAAA,QAAQ,EAAEA;AAJiC,WAAD,EAKzC9N,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKyQ,KAAK,CAACzJ,KAAX,CAAd,EAAiC,EAAjC,EAAqC;AACnDgJ,YAAAA,UAAU,EAAEiB;AADuC,WAArC,CAL4B,CAFhB,CAA5B;AAUD;AACF,OAlBD;;AAoBAR,MAAAA,KAAK,CAACW,sBAAN,GAA+B,UAAUC,GAAV,EAAeC,OAAf,EAAwBlL,IAAxB,EAA8B;AAC3D,YAAImL,MAAM,GAAGd,KAAK,CAAC3U,KAAN,CAAYyV,MAAzB;;AAEA,YAAIA,MAAM,KAAKF,GAAX,IAAkBC,OAAO,KAAKb,KAAK,CAACC,aAAxC,EAAuD;AACrDD,UAAAA,KAAK,CAACM,YAAN;;AAEAN,UAAAA,KAAK,CAACI,OAAN,GAAgBnM,KAAK,IAAIA,KAAK,CAAC+L,KAAK,CAACe,cAAN,CAAqBC,IAArB,CAA0B3T,sBAAsB,CAAC2S,KAAD,CAAhD,EAAyDrK,IAAzD,CAAD,CAA9B;AACD;AACF,OARD;;AAUAqK,MAAAA,KAAK,CAACiB,iBAAN,GAA0B,UAAUC,KAAV,EAAiB;AACzC,YAAIvG,UAAU,GAAGuG,KAAK,CAACvG,UAAvB;AAAA,YACIC,QAAQ,GAAGsG,KAAK,CAACtG,QADrB,CADyC,CAIzC;;AACA,YAAID,UAAU,KAAKqF,KAAK,CAACzJ,KAAN,CAAYR,cAA3B,IAA6C6E,QAAQ,KAAKoF,KAAK,CAACzJ,KAAN,CAAYP,YAA1E,EAAwF;AACtF,cAAIqH,QAAQ,GAAG2C,KAAK,CAACzJ,KAAN,CAAY8G,QAA3B;;AAEA2C,UAAAA,KAAK,CAACU,QAAN,CAAe,YAAY;AACzB,mBAAOnR,aAAa,CAAC;AACnBwG,cAAAA,cAAc,EAAE4E,UADG;AAEnB3E,cAAAA,YAAY,EAAE4E;AAFK,aAAD,EAGjBsE,yCAAyC,CAAC;AAC3C7T,cAAAA,KAAK,EAAE2U,KAAK,CAAC3U,KAD8B;AAE3C0K,cAAAA,cAAc,EAAE4E,UAF2B;AAG3C3E,cAAAA,YAAY,EAAE4E,QAH6B;AAI3CyC,cAAAA,QAAQ,EAAEA;AAJiC,aAAD,EAKzC2C,KAAK,CAACzJ,KALmC,CAHxB,CAApB;AASD,WAVD;;AAYAyJ,UAAAA,KAAK,CAACmB,gBAAN,CAAuB;AACrBpL,YAAAA,cAAc,EAAE4E,UADK;AAErB3E,YAAAA,YAAY,EAAE4E;AAFO,WAAvB;AAID;AACF,OAzBD;;AA2BAoF,MAAAA,KAAK,CAACoB,gBAAN,GAAyB,UAAUzT,CAAV,EAAa;AACpC,YAAI0T,YAAY,GAAGrB,KAAK,CAAC3U,KAAN,CAAYgW,YAA/B;;AAEA,YAAIC,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAZ;;AAEA,YAAI2T,KAAJ,EAAW;AACT,cAAIE,SAAS,GAAGjS,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+R,KAAL,CAAd,EAA2B,EAA3B,EAA+B;AAC1DzG,YAAAA,eAAe,EAAE;AADyC,WAA/B,CAA7B;;AAIAmF,UAAAA,KAAK,CAACU,QAAN,CAAec,SAAf;;AAEAxB,UAAAA,KAAK,CAACmB,gBAAN,CAAuBK,SAAvB;;AAEA,cAAInY,WAAW,CAACgY,YAAD,CAAf,EAA+B;AAC7BA,YAAAA,YAAY,CAACG,SAAD,EAAY7T,CAAZ,CAAZ;AACD;AACF;AACF,OAlBD;;AAoBAqS,MAAAA,KAAK,CAACyB,uBAAN,GAAgC,UAAU9T,CAAV,EAAa;AAC3C,YAAI+T,WAAW,GAAG1B,KAAK,CAAC3U,KAAN,CAAYqW,WAA9B;;AAEA,YAAIJ,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAZ;;AAEA,YAAI6T,SAAS,GAAGF,KAAK,GAAG/R,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+R,KAAL,CAAd,EAA2B,EAA3B,EAA+B;AAClEzG,UAAAA,eAAe,EAAE;AADiD,SAA/B,CAAhB,GAEhB;AACHA,UAAAA,eAAe,EAAE;AADd,SAFL;;AAMAmF,QAAAA,KAAK,CAACU,QAAN,CAAec,SAAf;;AAEAxB,QAAAA,KAAK,CAACmB,gBAAN,CAAuBK,SAAvB;;AAEA,YAAInY,WAAW,CAACqY,WAAD,CAAf,EAA8B;AAC5BA,UAAAA,WAAW,CAACF,SAAD,EAAY7T,CAAZ,CAAX;AACD;AACF,OAlBD;;AAoBAqS,MAAAA,KAAK,CAAC2B,oBAAN,GAA6B,UAAUC,EAAV,EAAc;AACzC5B,QAAAA,KAAK,CAACU,QAAN,CAAe,YAAY;AACzB,iBAAO;AACL7F,YAAAA,eAAe,EAAE,IADZ;AAELgH,YAAAA,UAAU,EAAED,EAFP;AAGL5J,YAAAA,aAAa,EAAE4J,EAAE,CAACE,cAHb;AAIL7J,YAAAA,gBAAgB,EAAE2J,EAAE,CAACG,eAAH,IAAsB;AACtCnO,cAAAA,CAAC,EAAEgO,EAAE,CAACpM,EADgC;AAEtC3B,cAAAA,CAAC,EAAE+N,EAAE,CAACnM;AAFgC;AAJnC,WAAP;AASD,SAVD;AAWD,OAZD;;AAcAuK,MAAAA,KAAK,CAACgC,oBAAN,GAA6B,YAAY;AACvChC,QAAAA,KAAK,CAACU,QAAN,CAAe,YAAY;AACzB,iBAAO;AACL7F,YAAAA,eAAe,EAAE;AADZ,WAAP;AAGD,SAJD;AAKD,OAND;;AAQAmF,MAAAA,KAAK,CAACiC,eAAN,GAAwB,UAAUtU,CAAV,EAAa;AACnC,YAAIA,CAAC,IAAItE,WAAW,CAACsE,CAAC,CAACuU,OAAH,CAApB,EAAiC;AAC/BvU,UAAAA,CAAC,CAACuU,OAAF;AACD;;AAEDlC,QAAAA,KAAK,CAACyB,uBAAN,CAA8B9T,CAA9B;AACD,OAND;;AAQAqS,MAAAA,KAAK,CAACmC,gBAAN,GAAyB,UAAUxU,CAAV,EAAa;AACpC,YAAIyU,YAAY,GAAGpC,KAAK,CAAC3U,KAAN,CAAY+W,YAA/B;AACA,YAAIZ,SAAS,GAAG;AACd3G,UAAAA,eAAe,EAAE;AADH,SAAhB;;AAIAmF,QAAAA,KAAK,CAACU,QAAN,CAAec,SAAf;;AAEAxB,QAAAA,KAAK,CAACmB,gBAAN,CAAuBK,SAAvB;;AAEA,YAAInY,WAAW,CAAC+Y,YAAD,CAAf,EAA+B;AAC7BA,UAAAA,YAAY,CAACZ,SAAD,EAAY7T,CAAZ,CAAZ;AACD;;AAEDqS,QAAAA,KAAK,CAACqC,oCAAN;AACD,OAfD;;AAiBArC,MAAAA,KAAK,CAACsC,gBAAN,GAAyB,UAAU3U,CAAV,EAAa;AACpC,YAAI4U,SAAS,GAAGrR,mBAAmB,CAACvD,CAAD,CAAnC;;AAEA,YAAI6U,KAAK,GAAGhZ,IAAI,CAACwW,KAAK,CAAC3U,KAAP,EAAc,GAAGgL,MAAH,CAAUkM,SAAV,CAAd,CAAhB;;AAEA,YAAIA,SAAS,IAAIlZ,WAAW,CAACmZ,KAAD,CAA5B,EAAqC;AACnC,cAAIlB,KAAJ;;AAEA,cAAI,aAAa5S,IAAb,CAAkB6T,SAAlB,CAAJ,EAAkC;AAChCjB,YAAAA,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAC,CAAC8U,cAAF,CAAiB,CAAjB,CAAnB,CAAR;AACD,WAFD,MAEO;AACLnB,YAAAA,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAR;AACD;;AAED,cAAI+U,OAAO,GAAGF,KAAd;AACAE,UAAAA,OAAO,CAACpB,KAAD,EAAQ3T,CAAR,CAAP;AACD;AACF,OAjBD;;AAmBAqS,MAAAA,KAAK,CAAC2C,WAAN,GAAoB,UAAUhV,CAAV,EAAa;AAC/B,YAAIiV,OAAO,GAAG5C,KAAK,CAAC3U,KAAN,CAAYuX,OAA1B;;AAEA,YAAItB,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAZ;;AAEA,YAAI2T,KAAJ,EAAW;AACT,cAAIE,SAAS,GAAGjS,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+R,KAAL,CAAd,EAA2B,EAA3B,EAA+B;AAC1DzG,YAAAA,eAAe,EAAE;AADyC,WAA/B,CAA7B;;AAIAmF,UAAAA,KAAK,CAACU,QAAN,CAAec,SAAf;;AAEAxB,UAAAA,KAAK,CAACmB,gBAAN,CAAuBK,SAAvB;;AAEA,cAAInY,WAAW,CAACuZ,OAAD,CAAf,EAA0B;AACxBA,YAAAA,OAAO,CAACpB,SAAD,EAAY7T,CAAZ,CAAP;AACD;AACF;AACF,OAlBD;;AAoBAqS,MAAAA,KAAK,CAAC6C,eAAN,GAAwB,UAAUlV,CAAV,EAAa;AACnC,YAAImV,WAAW,GAAG9C,KAAK,CAAC3U,KAAN,CAAYyX,WAA9B;;AAEA,YAAIzZ,WAAW,CAACyZ,WAAD,CAAf,EAA8B;AAC5B,cAAIxB,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAZ;;AAEAmV,UAAAA,WAAW,CAACxB,KAAD,EAAQ3T,CAAR,CAAX;AACD;AACF,OARD;;AAUAqS,MAAAA,KAAK,CAAC+C,aAAN,GAAsB,UAAUpV,CAAV,EAAa;AACjC,YAAIqV,SAAS,GAAGhD,KAAK,CAAC3U,KAAN,CAAY2X,SAA5B;;AAEA,YAAI3Z,WAAW,CAAC2Z,SAAD,CAAf,EAA4B;AAC1B,cAAI1B,KAAK,GAAGtB,KAAK,CAACuB,YAAN,CAAmB5T,CAAnB,CAAZ;;AAEAqV,UAAAA,SAAS,CAAC1B,KAAD,EAAQ3T,CAAR,CAAT;AACD;AACF,OARD;;AAUAqS,MAAAA,KAAK,CAACiD,eAAN,GAAwB,UAAUtV,CAAV,EAAa;AACnC,YAAIA,CAAC,CAAC8U,cAAF,IAAoB,IAApB,IAA4B9U,CAAC,CAAC8U,cAAF,CAAiBxY,MAAjB,GAA0B,CAA1D,EAA6D;AAC3D+V,UAAAA,KAAK,CAACiC,eAAN,CAAsBtU,CAAC,CAAC8U,cAAF,CAAiB,CAAjB,CAAtB;AACD;AACF,OAJD;;AAMAzC,MAAAA,KAAK,CAACkD,gBAAN,GAAyB,UAAUvV,CAAV,EAAa;AACpC,YAAIA,CAAC,CAAC8U,cAAF,IAAoB,IAApB,IAA4B9U,CAAC,CAAC8U,cAAF,CAAiBxY,MAAjB,GAA0B,CAA1D,EAA6D;AAC3D+V,UAAAA,KAAK,CAAC6C,eAAN,CAAsBlV,CAAC,CAAC8U,cAAF,CAAiB,CAAjB,CAAtB;AACD;AACF,OAJD;;AAMAzC,MAAAA,KAAK,CAACmD,cAAN,GAAuB,UAAUxV,CAAV,EAAa;AAClC,YAAIA,CAAC,CAAC8U,cAAF,IAAoB,IAApB,IAA4B9U,CAAC,CAAC8U,cAAF,CAAiBxY,MAAjB,GAA0B,CAA1D,EAA6D;AAC3D+V,UAAAA,KAAK,CAAC+C,aAAN,CAAoBpV,CAAC,CAAC8U,cAAF,CAAiB,CAAjB,CAApB;AACD;AACF,OAJD;;AAMAzC,MAAAA,KAAK,CAACoD,4BAAN,GAAqC,UAAUC,KAAV,EAAiB;AACpD,YAAI5P,KAAK,GAAG4P,KAAK,CAAC5P,KAAlB;AAAA,YACIiI,KAAK,GAAG2H,KAAK,CAAC3H,KADlB;AAAA,YAEIC,MAAM,GAAG0H,KAAK,CAAC1H,MAFnB;AAAA,YAGIW,MAAM,GAAG+G,KAAK,CAAC/G,MAHnB;AAIA,eAAOlK,oBAAoB,CAACjB,aAAa,CAACmS,QAAd,CAAuB/T,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4B,aAAa,CAAC4I,YAAnB,CAAd,EAAgDtG,KAAhD,CAAd,EAAsE,EAAtE,EAA0E;AACxIoE,UAAAA,KAAK,EAAE1F,cAAc,CAACsB,KAAD,EAAQ,IAAR,CADmH;AAExI8P,UAAAA,OAAO,EAAE;AACP3P,YAAAA,CAAC,EAAE,CADI;AAEPC,YAAAA,CAAC,EAAE,CAFI;AAGP6H,YAAAA,KAAK,EAAEA,KAHA;AAIPC,YAAAA,MAAM,EAAEA;AAJD;AAF+H,SAA1E,CAApC,CAAD,EAQtBW,MAAM,CAACL,IARe,EAQTK,MAAM,CAACL,IAAP,GAAcK,MAAM,CAACZ,KARZ,CAA3B;AASD,OAdD;;AAgBAsE,MAAAA,KAAK,CAACwD,8BAAN,GAAuC,UAAUC,MAAV,EAAkB;AACvD,YAAI/P,KAAK,GAAG+P,MAAM,CAAC/P,KAAnB;AAAA,YACIgI,KAAK,GAAG+H,MAAM,CAAC/H,KADnB;AAAA,YAEIC,MAAM,GAAG8H,MAAM,CAAC9H,MAFpB;AAAA,YAGIW,MAAM,GAAGmH,MAAM,CAACnH,MAHpB;AAIA,eAAOlK,oBAAoB,CAACjB,aAAa,CAACmS,QAAd,CAAuB/T,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK4B,aAAa,CAAC4I,YAAnB,CAAd,EAAgDrG,KAAhD,CAAd,EAAsE,EAAtE,EAA0E;AACxImE,UAAAA,KAAK,EAAE1F,cAAc,CAACuB,KAAD,EAAQ,IAAR,CADmH;AAExI6P,UAAAA,OAAO,EAAE;AACP3P,YAAAA,CAAC,EAAE,CADI;AAEPC,YAAAA,CAAC,EAAE,CAFI;AAGP6H,YAAAA,KAAK,EAAEA,KAHA;AAIPC,YAAAA,MAAM,EAAEA;AAJD;AAF+H,SAA1E,CAApC,CAAD,EAQtBW,MAAM,CAACF,GARe,EAQVE,MAAM,CAACF,GAAP,GAAaE,MAAM,CAACX,MARV,CAA3B;AASD,OAdD;;AAgBAqE,MAAAA,KAAK,CAAC0D,kBAAN,GAA2B,UAAU3L,IAAV,EAAgB;AACzC,eAAO5F,cAAc,CAAC4F,IAAD,EAAO,IAAP,CAArB;AACD,OAFD;;AAIAiI,MAAAA,KAAK,CAAC2D,YAAN,GAAqB,UAAUC,OAAV,EAAmB;AACtC,YAAIC,YAAY,GAAG7D,KAAK,CAACzJ,KAAzB;AAAA,YACIsE,eAAe,GAAGgJ,YAAY,CAAChJ,eADnC;AAAA,YAEI5C,gBAAgB,GAAG4L,YAAY,CAAC5L,gBAFpC;AAAA,YAGID,aAAa,GAAG6L,YAAY,CAAC7L,aAHjC;AAAA,YAIIsE,MAAM,GAAGuH,YAAY,CAACvH,MAJ1B;AAAA,YAKIpE,kBAAkB,GAAG2L,YAAY,CAAC3L,kBALtC;;AAOA,YAAI,CAAC0L,OAAD,IAAY,CAACA,OAAO,CAACvY,KAAR,CAAcyY,MAA3B,IAAqC,CAACjJ,eAAtC,IAAyD,CAAC5C,gBAA9D,EAAgF;AAC9E,iBAAO,IAAP;AACD;;AAED,YAAItD,MAAM,GAAGqL,KAAK,CAAC3U,KAAN,CAAYsJ,MAAzB;AACA,YAAIoP,SAAJ;AACA,YAAIC,UAAU,GAAG1T,KAAjB;;AAEA,YAAIsM,SAAS,KAAK,cAAlB,EAAkC;AAChCmH,UAAAA,SAAS,GAAG9L,gBAAZ;AACA+L,UAAAA,UAAU,GAAGzT,KAAb;AACD,SAHD,MAGO,IAAIqM,SAAS,KAAK,UAAlB,EAA8B;AACnCmH,UAAAA,SAAS,GAAG/D,KAAK,CAACiE,kBAAN,EAAZ;AACAD,UAAAA,UAAU,GAAGtT,SAAb;AACD,SAHM,MAGA,IAAIiE,MAAM,KAAK,QAAf,EAAyB;AAC9B,cAAIuP,qBAAqB,GAAGlE,KAAK,CAACmE,eAAN,EAA5B;AAAA,cACI3O,EAAE,GAAG0O,qBAAqB,CAAC1O,EAD/B;AAAA,cAEIC,EAAE,GAAGyO,qBAAqB,CAACzO,EAF/B;AAAA,cAGIZ,MAAM,GAAGqP,qBAAqB,CAACrP,MAHnC;AAAA,cAIIuP,UAAU,GAAGF,qBAAqB,CAACE,UAJvC;AAAA,cAKIC,QAAQ,GAAGH,qBAAqB,CAACG,QALrC;;AAOAN,UAAAA,SAAS,GAAG;AACVvO,YAAAA,EAAE,EAAEA,EADM;AAEVC,YAAAA,EAAE,EAAEA,EAFM;AAGV2O,YAAAA,UAAU,EAAEA,UAHF;AAIVC,YAAAA,QAAQ,EAAEA,QAJA;AAKVC,YAAAA,WAAW,EAAEzP,MALH;AAMV0P,YAAAA,WAAW,EAAE1P;AANH,WAAZ;AAQAmP,UAAAA,UAAU,GAAGxT,MAAb;AACD,SAjBM,MAiBA;AACLuT,UAAAA,SAAS,GAAG;AACVS,YAAAA,MAAM,EAAExE,KAAK,CAACmE,eAAN;AADE,WAAZ;AAGAH,UAAAA,UAAU,GAAG1T,KAAb;AACD;;AAED,YAAInG,GAAG,GAAGyZ,OAAO,CAACzZ,GAAR,IAAe,kBAAzB;;AAEA,YAAIsa,WAAW,GAAGlV,aAAa,CAACA,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC;AACxEmV,UAAAA,MAAM,EAAE,MADgE;AAExEC,UAAAA,aAAa,EAAE;AAFyD,SAAD,EAGtErI,MAHsE,CAAd,EAG/CyH,SAH+C,CAAd,EAGrBzQ,WAAW,CAACsQ,OAAO,CAACvY,KAAR,CAAcyY,MAAf,CAHU,CAAd,EAG6B,EAH7B,EAGiC;AAC9D5M,UAAAA,OAAO,EAAEc,aADqD;AAE9D4M,UAAAA,YAAY,EAAE1M,kBAFgD;AAG9D/N,UAAAA,GAAG,EAAEA,GAHyD;AAI9D0a,UAAAA,SAAS,EAAE;AAJmD,SAHjC,CAA/B;;AAUA,eAAO,aAAa9U,cAAc,CAAC6T,OAAO,CAACvY,KAAR,CAAcyY,MAAf,CAAd,GAAuC,aAAahU,YAAY,CAAC8T,OAAO,CAACvY,KAAR,CAAcyY,MAAf,EAAuBW,WAAvB,CAAhE,GAAsG,aAAazU,aAAa,CAACgU,UAAD,EAAaS,WAAb,CAApJ;AACD,OA3DD;;AA6DAzE,MAAAA,KAAK,CAAC8E,eAAN,GAAwB,UAAUlB,OAAV,EAAmBlJ,WAAnB,EAAgCtF,KAAhC,EAAuC;AAC7D,YAAIkD,QAAQ,GAAG9O,IAAI,CAACoa,OAAD,EAAU,eAAV,CAAnB;;AAEA,YAAIhL,OAAO,GAAGpP,IAAI,CAACwW,KAAK,CAACzJ,KAAP,EAAc,GAAGF,MAAH,CAAUiC,QAAV,EAAoB,KAApB,CAAd,CAAlB;;AAEA,YAAIyM,UAAU,GAAGnM,OAAO,CAACgL,OAAO,CAACvY,KAAR,CAAc,GAAGgL,MAAH,CAAUiC,QAAV,EAAoB,IAApB,CAAd,CAAD,CAAxB;AACA,eAAO,aAAaxI,YAAY,CAAC8T,OAAD,EAAUrU,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKwV,UAAL,CAAd,EAAgC,EAAhC,EAAoC;AACzFF,UAAAA,SAAS,EAAEvM,QAD8E;AAEzFnO,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,GAAGkM,MAAH,CAAUqE,WAAV,EAAuB,GAAvB,EAA4BrE,MAA5B,CAAmCjB,KAAnC,CAFqE;AAGzFyC,UAAAA,KAAK,EAAE1F,cAAc,CAAC4S,UAAD,EAAa,IAAb;AAHoE,SAApC,CAAvB,CAAhC;AAKD,OAXD;;AAaA/E,MAAAA,KAAK,CAACgF,WAAN,GAAoB,UAAUpB,OAAV,EAAmBlJ,WAAnB,EAAgCtF,KAAhC,EAAuC;AACzD,YAAImG,QAAQ,GAAGyE,KAAK,CAACzJ,KAAN,CAAYgF,QAA3B;AACA,YAAI4C,OAAO,GAAG5C,QAAQ,CAACqI,OAAO,CAACvY,KAAR,CAAc4Z,OAAf,CAAtB;AACA,eAAOjF,KAAK,CAACkF,UAAN,CAAiB/G,OAAjB,EAA0ByF,OAA1B,EAAmClJ,WAAnC,EAAgDtF,KAAhD,CAAP;AACD,OAJD;;AAMA4K,MAAAA,KAAK,CAACmF,WAAN,GAAoB,UAAUvB,OAAV,EAAmBlJ,WAAnB,EAAgCtF,KAAhC,EAAuC;AACzD,YAAIqG,QAAQ,GAAGuE,KAAK,CAACzJ,KAAN,CAAYkF,QAA3B;AACA,YAAI0C,OAAO,GAAG1C,QAAQ,CAACmI,OAAO,CAACvY,KAAR,CAAc+Z,OAAf,CAAtB;AACA,eAAOpF,KAAK,CAACkF,UAAN,CAAiB/G,OAAjB,EAA0ByF,OAA1B,EAAmClJ,WAAnC,EAAgDtF,KAAhD,CAAP;AACD,OAJD;;AAMA4K,MAAAA,KAAK,CAACqF,UAAN,GAAmB,UAAUzB,OAAV,EAAmB;AACpC,YAAI0B,YAAY,GAAGtF,KAAK,CAACzJ,KAAzB;AAAA,YACIgF,QAAQ,GAAG+J,YAAY,CAAC/J,QAD5B;AAAA,YAEIE,QAAQ,GAAG6J,YAAY,CAAC7J,QAF5B;AAAA,YAGIa,MAAM,GAAGgJ,YAAY,CAAChJ,MAH1B;AAIA,YAAIiJ,WAAW,GAAGvF,KAAK,CAAC3U,KAAxB;AAAA,YACIqQ,KAAK,GAAG6J,WAAW,CAAC7J,KADxB;AAAA,YAEIC,MAAM,GAAG4J,WAAW,CAAC5J,MAFzB;AAGA,YAAIlI,KAAK,GAAGlC,qBAAqB,CAACgK,QAAD,CAAjC;;AAEA,YAAIiK,qBAAqB,GAAGpc,KAAK,CAACqS,QAAD,EAAW,UAAU1D,IAAV,EAAgB;AAC1D,iBAAO5O,MAAM,CAAC4O,IAAI,CAACkB,MAAN,EAAcnF,OAAd,CAAb;AACD,SAFgC,CAAjC;;AAIA,YAAIJ,KAAK,GAAG8R,qBAAqB,IAAIjU,qBAAqB,CAACkK,QAAD,CAA1D;AACA,YAAIpQ,KAAK,GAAGuY,OAAO,CAACvY,KAAR,IAAiB,EAA7B;AACA,eAAO,aAAayE,YAAY,CAAC8T,OAAD,EAAU;AACxCzZ,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,MADoB;AAExCyJ,UAAAA,CAAC,EAAElC,QAAQ,CAACrG,KAAK,CAACuI,CAAP,CAAR,GAAoBvI,KAAK,CAACuI,CAA1B,GAA8B0I,MAAM,CAACL,IAFA;AAGxCpI,UAAAA,CAAC,EAAEnC,QAAQ,CAACrG,KAAK,CAACwI,CAAP,CAAR,GAAoBxI,KAAK,CAACwI,CAA1B,GAA8ByI,MAAM,CAACF,GAHA;AAIxCV,UAAAA,KAAK,EAAEhK,QAAQ,CAACrG,KAAK,CAACqQ,KAAP,CAAR,GAAwBrQ,KAAK,CAACqQ,KAA9B,GAAsCY,MAAM,CAACZ,KAJZ;AAKxCC,UAAAA,MAAM,EAAEjK,QAAQ,CAACrG,KAAK,CAACsQ,MAAP,CAAR,GAAyBtQ,KAAK,CAACsQ,MAA/B,GAAwCW,MAAM,CAACX,MALf;AAMxClI,UAAAA,KAAK,EAAEA,KANiC;AAOxCC,UAAAA,KAAK,EAAEA,KAPiC;AAQxC4I,UAAAA,MAAM,EAAEA,MARgC;AASxCmJ,UAAAA,UAAU,EAAE/J,KAT4B;AAUxCgK,UAAAA,WAAW,EAAE/J,MAV2B;AAWxCyH,UAAAA,4BAA4B,EAAE/X,KAAK,CAAC+X,4BAAN,IAAsCpD,KAAK,CAACoD,4BAXlC;AAYxCI,UAAAA,8BAA8B,EAAEnY,KAAK,CAACmY,8BAAN,IAAwCxD,KAAK,CAACwD;AAZtC,SAAV,CAAhC;AAcD,OA9BD;;AAgCAxD,MAAAA,KAAK,CAAC2F,eAAN,GAAwB,UAAU/B,OAAV,EAAmB;AACzC,YAAIgC,WAAW,GAAGhC,OAAO,CAACvY,KAAR,CAAcua,WAAhC;AACA,YAAIC,YAAY,GAAG7F,KAAK,CAACzJ,KAAzB;AAAA,YACIuP,aAAa,GAAGD,YAAY,CAACC,aADjC;AAAA,YAEIC,YAAY,GAAGF,YAAY,CAACE,YAFhC;AAGA,YAAIC,UAAU,GAAGzU,qBAAqB,CAACuU,aAAD,CAAtC;AACA,YAAIG,SAAS,GAAG1U,qBAAqB,CAACwU,YAAD,CAArC;AACA,YAAIvQ,EAAE,GAAGyQ,SAAS,CAACzQ,EAAnB;AAAA,YACIC,EAAE,GAAGwQ,SAAS,CAACxQ,EADnB;AAAA,YAEI6O,WAAW,GAAG2B,SAAS,CAAC3B,WAF5B;AAAA,YAGIC,WAAW,GAAG0B,SAAS,CAAC1B,WAH5B;AAIA,eAAO,aAAazU,YAAY,CAAC8T,OAAD,EAAU;AACxCsC,UAAAA,WAAW,EAAE/T,cAAc,CAAC8T,SAAD,EAAY,IAAZ,CAAd,CAAgCrH,GAAhC,CAAoC,UAAU3J,KAAV,EAAiB;AAChE,mBAAOA,KAAK,CAACI,UAAb;AACD,WAFY,CAD2B;AAIxC8Q,UAAAA,WAAW,EAAEhU,cAAc,CAAC6T,UAAD,EAAa,IAAb,CAAd,CAAiCpH,GAAjC,CAAqC,UAAU3J,KAAV,EAAiB;AACjE,mBAAOA,KAAK,CAACI,UAAb;AACD,WAFY,CAJ2B;AAOxCG,UAAAA,EAAE,EAAEA,EAPoC;AAQxCC,UAAAA,EAAE,EAAEA,EARoC;AASxC6O,UAAAA,WAAW,EAAEA,WAT2B;AAUxCC,UAAAA,WAAW,EAAEA,WAV2B;AAWxCpa,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,YAXoB;AAYxCyb,UAAAA,WAAW,EAAEA;AAZ2B,SAAV,CAAhC;AAcD,OAzBD;;AA2BA5F,MAAAA,KAAK,CAACoG,YAAN,GAAqB,YAAY;AAC/B,YAAIzG,sBAAsB,GAAGK,KAAK,CAACzJ,KAAN,CAAYoJ,sBAAzC;AACA,YAAI0G,YAAY,GAAGrG,KAAK,CAAC3U,KAAzB;AAAA,YACIoN,QAAQ,GAAG4N,YAAY,CAAC5N,QAD5B;AAAA,YAEIiD,KAAK,GAAG2K,YAAY,CAAC3K,KAFzB;AAAA,YAGIC,MAAM,GAAG0K,YAAY,CAAC1K,MAH1B;AAIA,YAAIC,MAAM,GAAGoE,KAAK,CAAC3U,KAAN,CAAYuQ,MAAZ,IAAsB,EAAnC;AACA,YAAI0K,WAAW,GAAG5K,KAAK,IAAIE,MAAM,CAACK,IAAP,IAAe,CAAnB,CAAL,IAA8BL,MAAM,CAACM,KAAP,IAAgB,CAA9C,CAAlB;AACA,YAAI7Q,KAAK,GAAG4G,cAAc,CAAC;AACzBwG,UAAAA,QAAQ,EAAEA,QADe;AAEzBkH,UAAAA,sBAAsB,EAAEA,sBAFC;AAGzB2G,UAAAA,WAAW,EAAEA,WAHY;AAIzBrJ,UAAAA,aAAa,EAAEA;AAJU,SAAD,CAA1B;;AAOA,YAAI,CAAC5R,KAAL,EAAY;AACV,iBAAO,IAAP;AACD;;AAED,YAAIwK,IAAI,GAAGxK,KAAK,CAACwK,IAAjB;AAAA,YACI0Q,UAAU,GAAGhc,wBAAwB,CAACc,KAAD,EAAQ,CAAC,MAAD,CAAR,CADzC;;AAGA,eAAO,aAAayE,YAAY,CAAC+F,IAAD,EAAOtG,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKgX,UAAL,CAAd,EAAgC,EAAhC,EAAoC;AACtFd,UAAAA,UAAU,EAAE/J,KAD0E;AAEtFgK,UAAAA,WAAW,EAAE/J,MAFyE;AAGtFC,UAAAA,MAAM,EAAEA,MAH8E;AAItF4K,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,MAAb,EAAqB;AACxBzG,YAAAA,KAAK,CAACG,cAAN,GAAuBsG,MAAvB;AACD,WANqF;AAOtFC,UAAAA,YAAY,EAAE1G,KAAK,CAACO;AAPkE,SAApC,CAApB,CAAhC;AASD,OA/BD;;AAiCAP,MAAAA,KAAK,CAAC2G,aAAN,GAAsB,YAAY;AAChC,YAAIlO,QAAQ,GAAGuH,KAAK,CAAC3U,KAAN,CAAYoN,QAA3B;AACA,YAAImO,WAAW,GAAGhW,eAAe,CAAC6H,QAAD,EAAWrI,OAAO,CAACsK,WAAnB,CAAjC;;AAEA,YAAI,CAACkM,WAAL,EAAkB;AAChB,iBAAO,IAAP;AACD;;AAED,YAAIC,YAAY,GAAG7G,KAAK,CAACzJ,KAAzB;AAAA,YACIsE,eAAe,GAAGgM,YAAY,CAAChM,eADnC;AAAA,YAEI5C,gBAAgB,GAAG4O,YAAY,CAAC5O,gBAFpC;AAAA,YAGID,aAAa,GAAG6O,YAAY,CAAC7O,aAHjC;AAAA,YAIIvB,WAAW,GAAGoQ,YAAY,CAACpQ,WAJ/B;AAAA,YAKI6F,MAAM,GAAGuK,YAAY,CAACvK,MAL1B;AAMA,eAAO,aAAaxM,YAAY,CAAC8W,WAAD,EAAc;AAC5CrD,UAAAA,OAAO,EAAEhU,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+M,MAAL,CAAd,EAA4B,EAA5B,EAAgC;AACpD1I,YAAAA,CAAC,EAAE0I,MAAM,CAACL,IAD0C;AAEpDpI,YAAAA,CAAC,EAAEyI,MAAM,CAACF;AAF0C,WAAhC,CADsB;AAK5C0K,UAAAA,MAAM,EAAEjM,eALoC;AAM5CkM,UAAAA,KAAK,EAAEtQ,WANqC;AAO5CS,UAAAA,OAAO,EAAE2D,eAAe,GAAG7C,aAAH,GAAmB,EAPC;AAQ5C3C,UAAAA,UAAU,EAAE4C;AARgC,SAAd,CAAhC;AAUD,OAxBD;;AA0BA+H,MAAAA,KAAK,CAACgH,WAAN,GAAoB,UAAUpD,OAAV,EAAmB;AACrC,YAAIqD,YAAY,GAAGjH,KAAK,CAAC3U,KAAzB;AAAA,YACIuQ,MAAM,GAAGqL,YAAY,CAACrL,MAD1B;AAAA,YAEIjG,IAAI,GAAGsR,YAAY,CAACtR,IAFxB;AAGA,YAAIuR,YAAY,GAAGlH,KAAK,CAACzJ,KAAzB;AAAA,YACI+F,MAAM,GAAG4K,YAAY,CAAC5K,MAD1B;AAAA,YAEIvG,cAAc,GAAGmR,YAAY,CAACnR,cAFlC;AAAA,YAGIC,YAAY,GAAGkR,YAAY,CAAClR,YAHhC;AAAA,YAIIqH,QAAQ,GAAG6J,YAAY,CAAC7J,QAJ5B,CAJqC,CAQC;;AAEtC,eAAO,aAAavN,YAAY,CAAC8T,OAAD,EAAU;AACxCzZ,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,iBADoB;AAExCgd,UAAAA,QAAQ,EAAEjV,oBAAoB,CAAC8N,KAAK,CAACiB,iBAAP,EAA0B,IAA1B,EAAgC2C,OAAO,CAACvY,KAAR,CAAc8b,QAA9C,CAFU;AAGxCxR,UAAAA,IAAI,EAAEA,IAHkC;AAIxC/B,UAAAA,CAAC,EAAElC,QAAQ,CAACkS,OAAO,CAACvY,KAAR,CAAcuI,CAAf,CAAR,GAA4BgQ,OAAO,CAACvY,KAAR,CAAcuI,CAA1C,GAA8C0I,MAAM,CAACL,IAJhB;AAKxCpI,UAAAA,CAAC,EAAEnC,QAAQ,CAACkS,OAAO,CAACvY,KAAR,CAAcwI,CAAf,CAAR,GAA4B+P,OAAO,CAACvY,KAAR,CAAcwI,CAA1C,GAA8CyI,MAAM,CAACF,GAAP,GAAaE,MAAM,CAACX,MAApB,GAA6BW,MAAM,CAACC,WAApC,IAAmDX,MAAM,CAACS,MAAP,IAAiB,CAApE,CALT;AAMxCX,UAAAA,KAAK,EAAEhK,QAAQ,CAACkS,OAAO,CAACvY,KAAR,CAAcqQ,KAAf,CAAR,GAAgCkI,OAAO,CAACvY,KAAR,CAAcqQ,KAA9C,GAAsDY,MAAM,CAACZ,KAN5B;AAOxCf,UAAAA,UAAU,EAAE5E,cAP4B;AAQxC6E,UAAAA,QAAQ,EAAE5E,YAR8B;AASxCqH,UAAAA,QAAQ,EAAE,SAAShH,MAAT,CAAgBgH,QAAhB;AAT8B,SAAV,CAAhC;AAWD,OArBD;;AAuBA2C,MAAAA,KAAK,CAACoH,sBAAN,GAA+B,UAAUxD,OAAV,EAAmBlJ,WAAnB,EAAgCtF,KAAhC,EAAuC;AACpE,YAAI,CAACwO,OAAL,EAAc;AACZ,iBAAO,IAAP;AACD;;AAED,YAAIyD,qBAAqB,GAAGha,sBAAsB,CAAC2S,KAAD,CAAlD;AAAA,YACIE,UAAU,GAAGmH,qBAAqB,CAACnH,UADvC;;AAGA,YAAIoH,YAAY,GAAGtH,KAAK,CAACzJ,KAAzB;AAAA,YACIgF,QAAQ,GAAG+L,YAAY,CAAC/L,QAD5B;AAAA,YAEIE,QAAQ,GAAG6L,YAAY,CAAC7L,QAF5B;AAAA,YAGIa,MAAM,GAAGgL,YAAY,CAAChL,MAH1B;AAIA,YAAIiL,cAAc,GAAG3D,OAAO,CAACvY,KAA7B;AAAA,YACI4Z,OAAO,GAAGsC,cAAc,CAACtC,OAD7B;AAAA,YAEIG,OAAO,GAAGmC,cAAc,CAACnC,OAF7B;AAGA,eAAO,aAAatV,YAAY,CAAC8T,OAAD,EAAU;AACxCzZ,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,GAAGkM,MAAH,CAAUqE,WAAV,EAAuB,GAAvB,EAA4BrE,MAA5B,CAAmCjB,KAAnC,CADoB;AAExC3B,UAAAA,KAAK,EAAE8H,QAAQ,CAAC0J,OAAD,CAFyB;AAGxCvR,UAAAA,KAAK,EAAE+H,QAAQ,CAAC2J,OAAD,CAHyB;AAIxC7B,UAAAA,OAAO,EAAE;AACP3P,YAAAA,CAAC,EAAE0I,MAAM,CAACL,IADH;AAEPpI,YAAAA,CAAC,EAAEyI,MAAM,CAACF,GAFH;AAGPV,YAAAA,KAAK,EAAEY,MAAM,CAACZ,KAHP;AAIPC,YAAAA,MAAM,EAAEW,MAAM,CAACX;AAJR,WAJ+B;AAUxCuE,UAAAA,UAAU,EAAEA;AAV4B,SAAV,CAAhC;AAYD,OA3BD;;AA6BAF,MAAAA,KAAK,CAACwH,kBAAN,GAA2B,UAAUC,MAAV,EAAkB;AAC3C,YAAI5R,IAAI,GAAG4R,MAAM,CAAC5R,IAAlB;AAAA,YACI6R,WAAW,GAAGD,MAAM,CAACC,WADzB;AAAA,YAEIC,SAAS,GAAGF,MAAM,CAACE,SAFvB;AAAA,YAGI1I,UAAU,GAAGwI,MAAM,CAACxI,UAHxB;AAAA,YAII2I,OAAO,GAAGH,MAAM,CAACG,OAJrB;AAKA,YAAI7a,MAAM,GAAG,EAAb;AACA,YAAI5C,GAAG,GAAG0L,IAAI,CAACxK,KAAL,CAAWlB,GAArB;AACA,YAAI0d,gBAAgB,GAAGhS,IAAI,CAACA,IAAL,CAAUxK,KAAjC;AAAA,YACIyc,SAAS,GAAGD,gBAAgB,CAACC,SADjC;AAAA,YAEIhR,OAAO,GAAG+Q,gBAAgB,CAAC/Q,OAF/B;;AAIA,YAAIiR,QAAQ,GAAGxY,aAAa,CAACA,aAAa,CAAC;AACzC6F,UAAAA,KAAK,EAAE6J,UADkC;AAEzCnI,UAAAA,OAAO,EAAEA,OAFgC;AAGzCtB,UAAAA,EAAE,EAAEkS,WAAW,CAAC9T,CAHyB;AAIzC6B,UAAAA,EAAE,EAAEiS,WAAW,CAAC7T,CAJyB;AAKzCmU,UAAAA,CAAC,EAAE,CALsC;AAMzCC,UAAAA,IAAI,EAAEpW,yBAAyB,CAACgE,IAAI,CAACA,IAAN,CANU;AAOzCqS,UAAAA,WAAW,EAAE,CAP4B;AAQzCxD,UAAAA,MAAM,EAAE,MARiC;AASzCxN,UAAAA,OAAO,EAAEwQ,WAAW,CAACxQ,OAToB;AAUzChL,UAAAA,KAAK,EAAEwb,WAAW,CAACxb,KAVsB;AAWzC/B,UAAAA,GAAG,EAAE,GAAGkM,MAAH,CAAUlM,GAAV,EAAe,eAAf,EAAgCkM,MAAhC,CAAuC4I,UAAvC;AAXoC,SAAD,EAYvC3L,WAAW,CAACwU,SAAD,CAZ4B,CAAd,EAYAvU,kBAAkB,CAACuU,SAAD,CAZlB,CAA5B;;AAcA/a,QAAAA,MAAM,CAACuC,IAAP,CAAYuQ,uBAAuB,CAACsI,eAAxB,CAAwCL,SAAxC,EAAmDC,QAAnD,CAAZ;;AAEA,YAAIJ,SAAJ,EAAe;AACb5a,UAAAA,MAAM,CAACuC,IAAP,CAAYuQ,uBAAuB,CAACsI,eAAxB,CAAwCL,SAAxC,EAAmDvY,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKwY,QAAL,CAAd,EAA8B,EAA9B,EAAkC;AAC5GvS,YAAAA,EAAE,EAAEmS,SAAS,CAAC/T,CAD8F;AAE5G6B,YAAAA,EAAE,EAAEkS,SAAS,CAAC9T,CAF8F;AAG5G1J,YAAAA,GAAG,EAAE,GAAGkM,MAAH,CAAUlM,GAAV,EAAe,aAAf,EAA8BkM,MAA9B,CAAqC4I,UAArC;AAHuG,WAAlC,CAAhE,CAAZ;AAKD,SAND,MAMO,IAAI2I,OAAJ,EAAa;AAClB7a,UAAAA,MAAM,CAACuC,IAAP,CAAY,IAAZ;AACD;;AAED,eAAOvC,MAAP;AACD,OAvCD;;AAyCAiT,MAAAA,KAAK,CAACoI,kBAAN,GAA2B,UAAUxE,OAAV,EAAmBlJ,WAAnB,EAAgCtF,KAAhC,EAAuC;AAChE,YAAIS,IAAI,GAAGmK,KAAK,CAACqI,gBAAN,CAAuBzE,OAAvB,EAAgClJ,WAAhC,EAA6CtF,KAA7C,CAAX;;AAEA,YAAI,CAACS,IAAL,EAAW;AACT,iBAAO,IAAP;AACD;;AAED,YAAIyS,YAAY,GAAGtI,KAAK,CAACzJ,KAAzB;AAAA,YACIsE,eAAe,GAAGyN,YAAY,CAACzN,eADnC;AAAA,YAEInE,WAAW,GAAG4R,YAAY,CAAC5R,WAF/B;AAAA,YAGIwB,kBAAkB,GAAGoQ,YAAY,CAACpQ,kBAHtC;AAAA,YAIIzB,WAAW,GAAG6R,YAAY,CAAC7R,WAJ/B;AAKA,YAAIgC,QAAQ,GAAGuH,KAAK,CAAC3U,KAAN,CAAYoN,QAA3B;AACA,YAAImO,WAAW,GAAGhW,eAAe,CAAC6H,QAAD,EAAWrI,OAAO,CAACsK,WAAnB,CAAjC;AACA,YAAI6N,YAAY,GAAG1S,IAAI,CAACxK,KAAxB;AAAA,YACImZ,MAAM,GAAG+D,YAAY,CAAC/D,MAD1B;AAAA,YAEIoD,OAAO,GAAGW,YAAY,CAACX,OAF3B;AAAA,YAGIY,QAAQ,GAAGD,YAAY,CAACC,QAH5B;AAIA,YAAIC,iBAAiB,GAAG5S,IAAI,CAACA,IAAL,CAAUxK,KAAlC;AAAA,YACIyc,SAAS,GAAGW,iBAAiB,CAACX,SADlC;AAAA,YAEIlR,IAAI,GAAG6R,iBAAiB,CAAC7R,IAF7B;AAGA,YAAI8R,SAAS,GAAG,CAAC9R,IAAD,IAASiE,eAAT,IAA4B+L,WAA5B,IAA2CkB,SAA3C,IAAwD5P,kBAAkB,IAAI,CAA9F;AACA,YAAIyQ,uBAAuB,GAAG/B,WAAW,IAAIA,WAAW,CAACvb,KAAZ,CAAkBud,OAAlB,KAA8B,OAA3E;AACA,YAAIC,UAAU,GAAGF,uBAAuB,GAAG;AACzC/F,UAAAA,OAAO,EAAE1Q,oBAAoB,CAAC8N,KAAK,CAAC2B,oBAAP,EAA6B,IAA7B,EAAmCiC,OAAO,CAACvY,KAAR,CAAcyd,OAAjD;AADY,SAAH,GAEpC;AACF1G,UAAAA,YAAY,EAAElQ,oBAAoB,CAAC8N,KAAK,CAACgC,oBAAP,EAA6B,IAA7B,EAAmC4B,OAAO,CAACvY,KAAR,CAAc+W,YAAjD,CADhC;AAEFf,UAAAA,YAAY,EAAEnP,oBAAoB,CAAC8N,KAAK,CAAC2B,oBAAP,EAA6B,IAA7B,EAAmCiC,OAAO,CAACvY,KAAR,CAAcgW,YAAjD;AAFhC,SAFJ;AAMA,YAAI0H,aAAa,GAAG,aAAajZ,YAAY,CAAC8T,OAAD,EAAUrU,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKsG,IAAI,CAACxK,KAAV,CAAd,EAAgCwd,UAAhC,CAAvB,CAA7C;;AAEA,iBAASG,eAAT,CAAyB/T,KAAzB,EAAgC;AAC9B;AACA,iBAAO,OAAOyB,WAAW,CAACI,OAAnB,KAA+B,UAA/B,GAA4CJ,WAAW,CAACI,OAAZ,CAAoB7B,KAAK,CAACiC,OAA1B,CAA5C,GAAiF,IAAxF;AACD;;AAED,YAAIwR,SAAJ,EAAe;AACb,cAAIhB,WAAJ,EAAiBC,SAAjB;;AAEA,cAAIjR,WAAW,CAACI,OAAZ,IAAuB,CAACJ,WAAW,CAACS,uBAAxC,EAAiE;AAC/D;AACA,gBAAI8R,YAAY,GAAG,OAAOvS,WAAW,CAACI,OAAnB,KAA+B,UAA/B,GAA4CkS,eAA5C,GAA8D,WAAW3S,MAAX,CAAkBK,WAAW,CAACI,OAAZ,CAAoBpJ,QAApB,EAAlB,CAAjF;AACAga,YAAAA,WAAW,GAAG/V,gBAAgB,CAAC6S,MAAD,EAASyE,YAAT,EAAuBxS,WAAvB,CAA9B;AACAkR,YAAAA,SAAS,GAAGC,OAAO,IAAIY,QAAX,IAAuB7W,gBAAgB,CAAC6W,QAAD,EAAWS,YAAX,EAAyBxS,WAAzB,CAAnD;AACD,WALD,MAKO;AACLiR,YAAAA,WAAW,GAAGlD,MAAM,CAACtM,kBAAD,CAApB;AACAyP,YAAAA,SAAS,GAAGC,OAAO,IAAIY,QAAX,IAAuBA,QAAQ,CAACtQ,kBAAD,CAA3C;AACD;;AAED,cAAI,CAACxO,MAAM,CAACge,WAAD,CAAX,EAA0B;AACxB,mBAAO,CAACqB,aAAD,EAAgB1S,MAAhB,CAAuBxI,kBAAkB,CAACmS,KAAK,CAACwH,kBAAN,CAAyB;AACxE3R,cAAAA,IAAI,EAAEA,IADkE;AAExE6R,cAAAA,WAAW,EAAEA,WAF2D;AAGxEC,cAAAA,SAAS,EAAEA,SAH6D;AAIxE1I,cAAAA,UAAU,EAAE/G,kBAJ4D;AAKxE0P,cAAAA,OAAO,EAAEA;AAL+D,aAAzB,CAAD,CAAzC,CAAP;AAOD;AACF;;AAED,YAAIA,OAAJ,EAAa;AACX,iBAAO,CAACmB,aAAD,EAAgB,IAAhB,EAAsB,IAAtB,CAAP;AACD;;AAED,eAAO,CAACA,aAAD,EAAgB,IAAhB,CAAP;AACD,OAjED;;AAmEA/I,MAAAA,KAAK,CAACkJ,gBAAN,GAAyB,UAAUtF,OAAV,EAAmB;AAC1C,eAAO,aAAa9T,YAAY,CAAC8T,OAAD,EAAUrU,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKyQ,KAAK,CAAC3U,KAAX,CAAd,EAAiC2U,KAAK,CAACzJ,KAAvC,CAAvB,CAAhC;AACD,OAFD;;AAIAyJ,MAAAA,KAAK,CAACC,aAAN,GAAsBvW,MAAM,CAACqW,MAAM,CAAChE,EAAR,CAAN,GAAoBtK,QAAQ,CAAC,UAAD,CAA5B,GAA2CsO,MAAM,CAAChE,EAAxE;AACAiE,MAAAA,KAAK,CAACE,UAAN,GAAmB,GAAG7J,MAAH,CAAU2J,KAAK,CAACC,aAAhB,EAA+B,OAA/B,CAAnB;;AAEA,UAAIF,MAAM,CAACoJ,aAAX,EAA0B;AACxBnJ,QAAAA,KAAK,CAACyB,uBAAN,GAAgCnY,SAAS,CAAC0W,KAAK,CAACyB,uBAAP,EAAgC1B,MAAM,CAACoJ,aAAvC,CAAzC;AACD;;AAEDnJ,MAAAA,KAAK,CAACzJ,KAAN,GAAc,EAAd;AACA,aAAOyJ,KAAP;AACD;AACD;;;AAGArU,IAAAA,YAAY,CAACkU,uBAAD,EAA0B,CAAC;AACrC1V,MAAAA,GAAG,EAAE,mBADgC;AAErC+B,MAAAA,KAAK,EAAE,SAASkd,iBAAT,GAA6B;AAClC,YAAI,CAAC1f,MAAM,CAAC,KAAK2B,KAAL,CAAWyV,MAAZ,CAAX,EAAgC;AAC9B,eAAKuI,WAAL;AACD;AACF;AANoC,KAAD,EAOnC;AACDlf,MAAAA,GAAG,EAAE,oBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASod,kBAAT,CAA4BC,SAA5B,EAAuC;AAC5C;AACA,YAAI7f,MAAM,CAAC6f,SAAS,CAACzI,MAAX,CAAN,IAA4B,CAACpX,MAAM,CAAC,KAAK2B,KAAL,CAAWyV,MAAZ,CAAvC,EAA4D;AAC1D,eAAKuI,WAAL;AACD,SAJ2C,CAI1C;;;AAGF,YAAI,CAAC3f,MAAM,CAAC,KAAK2B,KAAL,CAAWyV,MAAZ,CAAP,IAA8BpX,MAAM,CAAC6f,SAAS,CAACzI,MAAX,CAAxC,EAA4D;AAC1D,eAAK0I,cAAL;AACD;AACF;AAZA,KAPmC,EAoBnC;AACDrf,MAAAA,GAAG,EAAE,sBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASud,oBAAT,GAAgC;AACrC,aAAKnJ,YAAL;;AAEA,YAAI,CAAC5W,MAAM,CAAC,KAAK2B,KAAL,CAAWyV,MAAZ,CAAX,EAAgC;AAC9B,eAAK0I,cAAL;AACD;;AAED,aAAKnH,oCAAL;AACD;AAVA,KApBmC,EA+BnC;AACDlY,MAAAA,GAAG,EAAE,sCADJ;AAED+B,MAAAA,KAAK,EAAE,SAASmW,oCAAT,GAAgD;AACrD,YAAI,OAAO,KAAKZ,uBAAL,CAA6BiI,MAApC,KAA+C,UAAnD,EAA+D;AAC7D,eAAKjI,uBAAL,CAA6BiI,MAA7B;AACD;AACF;AACD;AACN;AACA;AACA;AACA;;AAXO,KA/BmC,EA4CnC;AACDvf,MAAAA,GAAG,EAAE,cADJ;AAED+B,MAAAA,KAAK,EAAE,SAASqV,YAAT,CAAsBiB,KAAtB,EAA6B;AAClC,YAAI,CAAC,KAAKnC,SAAV,EAAqB;AACnB,iBAAO,IAAP;AACD;;AAED,YAAIsJ,eAAe,GAAGtY,SAAS,CAAC,KAAKgP,SAAN,CAA/B;AACA,YAAI1S,CAAC,GAAG2D,wBAAwB,CAACkR,KAAD,EAAQmH,eAAR,CAAhC;AACA,YAAIjV,QAAQ,GAAG,KAAKkV,OAAL,CAAajc,CAAC,CAAC+J,MAAf,EAAuB/J,CAAC,CAACgK,MAAzB,CAAf;;AAEA,YAAI,CAACjD,QAAL,EAAe;AACb,iBAAO,IAAP;AACD;;AAED,YAAImV,YAAY,GAAG,KAAKtT,KAAxB;AAAA,YACIgF,QAAQ,GAAGsO,YAAY,CAACtO,QAD5B;AAAA,YAEIE,QAAQ,GAAGoO,YAAY,CAACpO,QAF5B;;AAIA,YAAIsB,SAAS,KAAK,MAAd,IAAwBxB,QAAxB,IAAoCE,QAAxC,EAAkD;AAChD,cAAIqO,MAAM,GAAGvY,qBAAqB,CAACgK,QAAD,CAArB,CAAgCxC,KAA7C;AACA,cAAIgR,MAAM,GAAGxY,qBAAqB,CAACkK,QAAD,CAArB,CAAgC1C,KAA7C;AACA,cAAIiR,MAAM,GAAGF,MAAM,IAAIA,MAAM,CAACG,MAAjB,GAA0BH,MAAM,CAACG,MAAP,CAActc,CAAC,CAAC+J,MAAhB,CAA1B,GAAoD,IAAjE;AACA,cAAIwS,MAAM,GAAGH,MAAM,IAAIA,MAAM,CAACE,MAAjB,GAA0BF,MAAM,CAACE,MAAP,CAActc,CAAC,CAACgK,MAAhB,CAA1B,GAAoD,IAAjE;AACA,iBAAOpI,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK5B,CAAL,CAAd,EAAuB,EAAvB,EAA2B;AAC7Cqc,YAAAA,MAAM,EAAEA,MADqC;AAE7CE,YAAAA,MAAM,EAAEA;AAFqC,WAA3B,CAApB;AAID;;AAED,YAAIC,WAAW,GAAG3S,cAAc,CAAC,KAAKjB,KAAN,EAAa,KAAKlL,KAAL,CAAWsK,IAAxB,EAA8B,KAAKtK,KAAL,CAAWsJ,MAAzC,EAAiDD,QAAjD,CAAhC;;AAEA,YAAIyV,WAAJ,EAAiB;AACf,iBAAO5a,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK5B,CAAL,CAAd,EAAuBwc,WAAvB,CAApB;AACD;;AAED,eAAO,IAAP;AACD;AArCA,KA5CmC,EAkFnC;AACDhgB,MAAAA,GAAG,EAAE,oBADJ;AAED+B,MAAAA,KAAK,EAAE,SAAS+X,kBAAT,GAA8B;AACnC,YAAItP,MAAM,GAAG,KAAKtJ,KAAL,CAAWsJ,MAAxB;AACA,YAAIyV,aAAa,GAAG,KAAK7T,KAAzB;AAAA,YACI0B,gBAAgB,GAAGmS,aAAa,CAACnS,gBADrC;AAAA,YAEIqE,MAAM,GAAG8N,aAAa,CAAC9N,MAF3B;AAAA,YAGIhC,mBAAmB,GAAG8P,aAAa,CAAC9P,mBAHxC;AAIA,YAAI+P,QAAQ,GAAG/P,mBAAmB,GAAG,CAArC;AACA,eAAO;AACLoK,UAAAA,MAAM,EAAE,MADH;AAELuD,UAAAA,IAAI,EAAE,MAFD;AAGLrU,UAAAA,CAAC,EAAEe,MAAM,KAAK,YAAX,GAA0BsD,gBAAgB,CAACrE,CAAjB,GAAqByW,QAA/C,GAA0D/N,MAAM,CAACL,IAAP,GAAc,GAHtE;AAILpI,UAAAA,CAAC,EAAEc,MAAM,KAAK,YAAX,GAA0B2H,MAAM,CAACF,GAAP,GAAa,GAAvC,GAA6CnE,gBAAgB,CAACpE,CAAjB,GAAqBwW,QAJhE;AAKL3O,UAAAA,KAAK,EAAE/G,MAAM,KAAK,YAAX,GAA0B2F,mBAA1B,GAAgDgC,MAAM,CAACZ,KAAP,GAAe,CALjE;AAMLC,UAAAA,MAAM,EAAEhH,MAAM,KAAK,YAAX,GAA0B2H,MAAM,CAACX,MAAP,GAAgB,CAA1C,GAA8CrB;AANjD,SAAP;AAQD;AAjBA,KAlFmC,EAoGnC;AACDnQ,MAAAA,GAAG,EAAE,iBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASiY,eAAT,GAA2B;AAChC,YAAIxP,MAAM,GAAG,KAAKtJ,KAAL,CAAWsJ,MAAxB;AACA,YAAI2V,aAAa,GAAG,KAAK/T,KAAzB;AAAA,YACI0B,gBAAgB,GAAGqS,aAAa,CAACrS,gBADrC;AAAA,YAEIqE,MAAM,GAAGgO,aAAa,CAAChO,MAF3B;AAGA,YAAIiO,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB;;AAEA,YAAI/V,MAAM,KAAK,YAAf,EAA6B;AAC3B4V,UAAAA,EAAE,GAAGtS,gBAAgB,CAACrE,CAAtB;AACA6W,UAAAA,EAAE,GAAGF,EAAL;AACAC,UAAAA,EAAE,GAAGlO,MAAM,CAACF,GAAZ;AACAsO,UAAAA,EAAE,GAAGpO,MAAM,CAACF,GAAP,GAAaE,MAAM,CAACX,MAAzB;AACD,SALD,MAKO,IAAIhH,MAAM,KAAK,UAAf,EAA2B;AAChC6V,UAAAA,EAAE,GAAGvS,gBAAgB,CAACpE,CAAtB;AACA6W,UAAAA,EAAE,GAAGF,EAAL;AACAD,UAAAA,EAAE,GAAGjO,MAAM,CAACL,IAAZ;AACAwO,UAAAA,EAAE,GAAGnO,MAAM,CAACL,IAAP,GAAcK,MAAM,CAACZ,KAA1B;AACD,SALM,MAKA,IAAI,CAAChS,MAAM,CAACuO,gBAAgB,CAACzC,EAAlB,CAAP,IAAgC,CAAC9L,MAAM,CAACuO,gBAAgB,CAACxC,EAAlB,CAA3C,EAAkE;AACvE,cAAId,MAAM,KAAK,SAAf,EAA0B;AACxB,gBAAIa,EAAE,GAAGyC,gBAAgB,CAACzC,EAA1B;AAAA,gBACIC,EAAE,GAAGwC,gBAAgB,CAACxC,EAD1B;AAAA,gBAEI6O,WAAW,GAAGrM,gBAAgB,CAACqM,WAFnC;AAAA,gBAGIC,WAAW,GAAGtM,gBAAgB,CAACsM,WAHnC;AAAA,gBAII3P,KAAK,GAAGqD,gBAAgB,CAACrD,KAJ7B;AAKA,gBAAI+V,UAAU,GAAGzX,gBAAgB,CAACsC,EAAD,EAAKC,EAAL,EAAS6O,WAAT,EAAsB1P,KAAtB,CAAjC;AACA,gBAAIgW,UAAU,GAAG1X,gBAAgB,CAACsC,EAAD,EAAKC,EAAL,EAAS8O,WAAT,EAAsB3P,KAAtB,CAAjC;AACA2V,YAAAA,EAAE,GAAGI,UAAU,CAAC/W,CAAhB;AACA4W,YAAAA,EAAE,GAAGG,UAAU,CAAC9W,CAAhB;AACA4W,YAAAA,EAAE,GAAGG,UAAU,CAAChX,CAAhB;AACA8W,YAAAA,EAAE,GAAGE,UAAU,CAAC/W,CAAhB;AACD,WAZD,MAYO;AACL,gBAAIgX,GAAG,GAAG5S,gBAAgB,CAACzC,EAA3B;AAAA,gBACIsV,GAAG,GAAG7S,gBAAgB,CAACxC,EAD3B;AAAA,gBAEIZ,MAAM,GAAGoD,gBAAgB,CAACpD,MAF9B;AAAA,gBAGIuP,UAAU,GAAGnM,gBAAgB,CAACmM,UAHlC;AAAA,gBAIIC,QAAQ,GAAGpM,gBAAgB,CAACoM,QAJhC;AAKA,gBAAI0G,UAAU,GAAG7X,gBAAgB,CAAC2X,GAAD,EAAMC,GAAN,EAAWjW,MAAX,EAAmBuP,UAAnB,CAAjC;AACA,gBAAI4G,QAAQ,GAAG9X,gBAAgB,CAAC2X,GAAD,EAAMC,GAAN,EAAWjW,MAAX,EAAmBwP,QAAnB,CAA/B;AACA,mBAAO;AACLG,cAAAA,MAAM,EAAE,CAACuG,UAAD,EAAaC,QAAb,CADH;AAELxV,cAAAA,EAAE,EAAEqV,GAFC;AAGLpV,cAAAA,EAAE,EAAEqV,GAHC;AAILjW,cAAAA,MAAM,EAAEA,MAJH;AAKLuP,cAAAA,UAAU,EAAEA,UALP;AAMLC,cAAAA,QAAQ,EAAEA;AANL,aAAP;AAQD;AACF;;AAED,eAAO,CAAC;AACNzQ,UAAAA,CAAC,EAAE2W,EADG;AAEN1W,UAAAA,CAAC,EAAE2W;AAFG,SAAD,EAGJ;AACD5W,UAAAA,CAAC,EAAE6W,EADF;AAED5W,UAAAA,CAAC,EAAE6W;AAFF,SAHI,CAAP;AAOD;AA1DA,KApGmC,EA+JnC;AACDvgB,MAAAA,GAAG,EAAE,SADJ;AAED+B,MAAAA,KAAK,EAAE,SAAS0d,OAAT,CAAiBhW,CAAjB,EAAoBC,CAApB,EAAuB;AAC5B,YAAIc,MAAM,GAAG,KAAKtJ,KAAL,CAAWsJ,MAAxB;;AAEA,YAAIA,MAAM,KAAK,YAAX,IAA2BA,MAAM,KAAK,UAA1C,EAAsD;AACpD,cAAI2H,MAAM,GAAG,KAAK/F,KAAL,CAAW+F,MAAxB;AACA,cAAI2O,SAAS,GAAGrX,CAAC,IAAI0I,MAAM,CAACL,IAAZ,IAAoBrI,CAAC,IAAI0I,MAAM,CAACL,IAAP,GAAcK,MAAM,CAACZ,KAA9C,IAAuD7H,CAAC,IAAIyI,MAAM,CAACF,GAAnE,IAA0EvI,CAAC,IAAIyI,MAAM,CAACF,GAAP,GAAaE,MAAM,CAACX,MAAnH;AACA,iBAAOsP,SAAS,GAAG;AACjBrX,YAAAA,CAAC,EAAEA,CADc;AAEjBC,YAAAA,CAAC,EAAEA;AAFc,WAAH,GAGZ,IAHJ;AAID;;AAED,YAAIqX,aAAa,GAAG,KAAK3U,KAAzB;AAAA,YACIwP,YAAY,GAAGmF,aAAa,CAACnF,YADjC;AAAA,YAEID,aAAa,GAAGoF,aAAa,CAACpF,aAFlC;;AAIA,YAAIC,YAAY,IAAID,aAApB,EAAmC;AACjC,cAAIG,SAAS,GAAG1U,qBAAqB,CAACwU,YAAD,CAArC;AACA,iBAAO9S,eAAe,CAAC;AACrBW,YAAAA,CAAC,EAAEA,CADkB;AAErBC,YAAAA,CAAC,EAAEA;AAFkB,WAAD,EAGnBoS,SAHmB,CAAtB;AAID;;AAED,eAAO,IAAP;AACD;AA3BA,KA/JmC,EA2LnC;AACD9b,MAAAA,GAAG,EAAE,sBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASif,oBAAT,GAAgC;AACrC,YAAI1S,QAAQ,GAAG,KAAKpN,KAAL,CAAWoN,QAA1B;AACA,YAAImO,WAAW,GAAGhW,eAAe,CAAC6H,QAAD,EAAWrI,OAAO,CAACsK,WAAnB,CAAjC;AACA,YAAI0Q,aAAa,GAAG,EAApB;;AAEA,YAAIxE,WAAW,IAAI7J,SAAS,KAAK,MAAjC,EAAyC;AACvC,cAAI6J,WAAW,CAACvb,KAAZ,CAAkBud,OAAlB,KAA8B,OAAlC,EAA2C;AACzCwC,YAAAA,aAAa,GAAG;AACdxI,cAAAA,OAAO,EAAE,KAAKD;AADA,aAAhB;AAGD,WAJD,MAIO;AACLyI,YAAAA,aAAa,GAAG;AACd/J,cAAAA,YAAY,EAAE,KAAKD,gBADL;AAEdM,cAAAA,WAAW,EAAE,KAAKO,eAFJ;AAGdG,cAAAA,YAAY,EAAE,KAAKD,gBAHL;AAIdkJ,cAAAA,WAAW,EAAE,KAAKpI,eAJJ;AAKdqI,cAAAA,YAAY,EAAE,KAAKpI,gBALL;AAMdqI,cAAAA,UAAU,EAAE,KAAKpI;AANH,aAAhB;AAQD;AACF;;AAED,YAAIqI,WAAW,GAAGjY,kBAAkB,CAAC,KAAKlI,KAAN,EAAa,KAAKiX,gBAAlB,CAApC;AACA,eAAO/S,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKic,WAAL,CAAd,EAAiCJ,aAAjC,CAApB;AACD;AACD;;AA3BC,KA3LmC,EAwNnC;AACDjhB,MAAAA,GAAG,EAAE,aADJ;AAED+B,MAAAA,KAAK,EAAE,SAASmd,WAAT,GAAuB;AAC5BjW,QAAAA,WAAW,CAACqY,EAAZ,CAAepY,UAAf,EAA2B,KAAKsN,sBAAhC;;AAEA,YAAIvN,WAAW,CAACsY,eAAZ,IAA+BtY,WAAW,CAACuY,aAA/C,EAA8D;AAC5DvY,UAAAA,WAAW,CAACsY,eAAZ,CAA4BtY,WAAW,CAACuY,aAAZ,GAA4B,CAAxD;AACD;AACF;AARA,KAxNmC,EAiOnC;AACDxhB,MAAAA,GAAG,EAAE,gBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASsd,cAAT,GAA0B;AAC/BpW,QAAAA,WAAW,CAACoW,cAAZ,CAA2BnW,UAA3B,EAAuC,KAAKsN,sBAA5C;;AAEA,YAAIvN,WAAW,CAACsY,eAAZ,IAA+BtY,WAAW,CAACuY,aAA/C,EAA8D;AAC5DvY,UAAAA,WAAW,CAACsY,eAAZ,CAA4BtY,WAAW,CAACuY,aAAZ,GAA4B,CAAxD;AACD;AACF;AARA,KAjOmC,EA0OnC;AACDxhB,MAAAA,GAAG,EAAE,kBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASiV,gBAAT,CAA0BxL,IAA1B,EAAgC;AACrC,YAAImL,MAAM,GAAG,KAAKzV,KAAL,CAAWyV,MAAxB;;AAEA,YAAI,CAACpX,MAAM,CAACoX,MAAD,CAAX,EAAqB;AACnB1N,UAAAA,WAAW,CAACwY,IAAZ,CAAiBvY,UAAjB,EAA6ByN,MAA7B,EAAqC,KAAKb,aAA1C,EAAyDtK,IAAzD;AACD;AACF;AARA,KA1OmC,EAmPnC;AACDxL,MAAAA,GAAG,EAAE,gBADJ;AAED+B,MAAAA,KAAK,EAAE,SAAS6U,cAAT,CAAwBpL,IAAxB,EAA8B;AACnC,YAAIhB,MAAM,GAAG,KAAKtJ,KAAL,CAAWsJ,MAAxB;AACA,YAAI0I,QAAQ,GAAG,KAAK9G,KAAL,CAAW8G,QAA1B;AACA,YAAItH,cAAc,GAAGJ,IAAI,CAACI,cAA1B;AAAA,YACIC,YAAY,GAAGL,IAAI,CAACK,YADxB;;AAGA,YAAI,CAACtM,MAAM,CAACiM,IAAI,CAACI,cAAN,CAAP,IAAgC,CAACrM,MAAM,CAACiM,IAAI,CAACK,YAAN,CAA3C,EAAgE;AAC9D,eAAK0K,QAAL,CAAcnR,aAAa,CAAC;AAC1BwG,YAAAA,cAAc,EAAEA,cADU;AAE1BC,YAAAA,YAAY,EAAEA;AAFY,WAAD,EAGxBkJ,yCAAyC,CAAC;AAC3C7T,YAAAA,KAAK,EAAE,KAAKA,KAD+B;AAE3C0K,YAAAA,cAAc,EAAEA,cAF2B;AAG3CC,YAAAA,YAAY,EAAEA,YAH6B;AAI3CqH,YAAAA,QAAQ,EAAEA;AAJiC,WAAD,EAKzC,KAAK9G,KALoC,CAHjB,CAA3B;AASD,SAVD,MAUO,IAAI,CAAC7M,MAAM,CAACiM,IAAI,CAACuC,kBAAN,CAAX,EAAsC;AAC3C,cAAIR,MAAM,GAAG/B,IAAI,CAAC+B,MAAlB;AAAA,cACIC,MAAM,GAAGhC,IAAI,CAACgC,MADlB;AAAA,cAEIO,kBAAkB,GAAGvC,IAAI,CAACuC,kBAF9B;AAGA,cAAI2T,aAAa,GAAG,KAAKtV,KAAzB;AAAA,cACI+F,MAAM,GAAGuP,aAAa,CAACvP,MAD3B;AAAA,cAEIvH,YAAY,GAAG8W,aAAa,CAAC9W,YAFjC;;AAIA,cAAI,CAACuH,MAAL,EAAa;AACX;AACD;;AAED,cAAIiH,OAAO,GAAGhU,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK+M,MAAL,CAAd,EAA4B,EAA5B,EAAgC;AACzD1I,YAAAA,CAAC,EAAE0I,MAAM,CAACL,IAD+C;AAEzDpI,YAAAA,CAAC,EAAEyI,MAAM,CAACF;AAF+C,WAAhC,CAA3B,CAZ2C,CAevC;AACJ;;;AAGA,cAAI0P,cAAc,GAAGC,IAAI,CAACC,GAAL,CAAStU,MAAT,EAAiB6L,OAAO,CAAC3P,CAAR,GAAY2P,OAAO,CAAC7H,KAArC,CAArB;AACA,cAAIuQ,cAAc,GAAGF,IAAI,CAACC,GAAL,CAASrU,MAAT,EAAiB4L,OAAO,CAAC1P,CAAR,GAAY0P,OAAO,CAAC5H,MAArC,CAArB;AACA,cAAIlF,WAAW,GAAG1B,YAAY,CAACmD,kBAAD,CAAZ,IAAoCnD,YAAY,CAACmD,kBAAD,CAAZ,CAAiChM,KAAvF;AACA,cAAI8L,aAAa,GAAG1B,iBAAiB,CAAC,KAAKC,KAAN,EAAa,KAAKlL,KAAL,CAAWsK,IAAxB,EAA8BuC,kBAA9B,CAArC;AACA,cAAID,gBAAgB,GAAGlD,YAAY,CAACmD,kBAAD,CAAZ,GAAmC;AACxDtE,YAAAA,CAAC,EAAEe,MAAM,KAAK,YAAX,GAA0BI,YAAY,CAACmD,kBAAD,CAAZ,CAAiC7C,UAA3D,GAAwEyW,cADnB;AAExDjY,YAAAA,CAAC,EAAEc,MAAM,KAAK,YAAX,GAA0BsX,cAA1B,GAA2ClX,YAAY,CAACmD,kBAAD,CAAZ,CAAiC7C;AAFvB,WAAnC,GAGnB1B,gBAHJ;AAIA,eAAK+M,QAAL,CAAcnR,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKoG,IAAL,CAAd,EAA0B,EAA1B,EAA8B;AACvDc,YAAAA,WAAW,EAAEA,WAD0C;AAEvDwB,YAAAA,gBAAgB,EAAEA,gBAFqC;AAGvDD,YAAAA,aAAa,EAAEA;AAHwC,WAA9B,CAA3B;AAKD,SAhCM,MAgCA;AACL,eAAK0I,QAAL,CAAc/K,IAAd;AACD;AACF;AArDA,KAnPmC,EAySnC;AACDxL,MAAAA,GAAG,EAAE,kBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASmc,gBAAT,CAA0BxS,IAA1B,EAAgC6E,WAAhC,EAA6CuE,UAA7C,EAAyD;AAC9D,YAAIU,sBAAsB,GAAG,KAAKpJ,KAAL,CAAWoJ,sBAAxC;;AAEA,aAAK,IAAI5V,CAAC,GAAG,CAAR,EAAW8E,GAAG,GAAG8Q,sBAAsB,CAAC1V,MAA7C,EAAqDF,CAAC,GAAG8E,GAAzD,EAA8D9E,CAAC,EAA/D,EAAmE;AACjE,cAAIkL,KAAK,GAAG0K,sBAAsB,CAAC5V,CAAD,CAAlC;;AAEA,cAAIkL,KAAK,CAACY,IAAN,KAAeA,IAAf,IAAuBZ,KAAK,CAAC5J,KAAN,CAAYlB,GAAZ,KAAoB0L,IAAI,CAAC1L,GAAhD,IAAuDuQ,WAAW,KAAK7J,cAAc,CAACoE,KAAK,CAACY,IAAN,CAAW0B,IAAZ,CAA9B,IAAmD0H,UAAU,KAAKhK,KAAK,CAACgK,UAAnI,EAA+I;AAC7I,mBAAOhK,KAAP;AACD;AACF;;AAED,eAAO,IAAP;AACD;AAdA,KAzSmC,EAwTnC;AACD9K,MAAAA,GAAG,EAAE,YADJ;;AAGD;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACM+B,MAAAA,KAAK,EAAE,SAASgZ,UAAT,CAAoBgH,WAApB,EAAiCtI,OAAjC,EAA0ClJ,WAA1C,EAAuDtF,KAAvD,EAA8D;AACnE,YAAI+W,YAAY,GAAG,KAAK9gB,KAAxB;AAAA,YACIqQ,KAAK,GAAGyQ,YAAY,CAACzQ,KADzB;AAAA,YAEIC,MAAM,GAAGwQ,YAAY,CAACxQ,MAF1B;AAGA,eAAO,aAAa/L,KAAK,CAACI,aAAN,CAAoBmB,aAApB,EAAmCxH,QAAQ,CAAC,EAAD,EAAKuiB,WAAL,EAAkB;AAC/ErH,UAAAA,SAAS,EAAE,YAAYxO,MAAZ,CAAmB6V,WAAW,CAAC5T,QAA/B,EAAyC,GAAzC,EAA8CjC,MAA9C,CAAqD6V,WAAW,CAAC5T,QAAjE,CADoE;AAE/EnO,UAAAA,GAAG,EAAEyZ,OAAO,CAACzZ,GAAR,IAAe,GAAGkM,MAAH,CAAUqE,WAAV,EAAuB,GAAvB,EAA4BrE,MAA5B,CAAmCjB,KAAnC,CAF2D;AAG/EmO,UAAAA,OAAO,EAAE;AACP3P,YAAAA,CAAC,EAAE,CADI;AAEPC,YAAAA,CAAC,EAAE,CAFI;AAGP6H,YAAAA,KAAK,EAAEA,KAHA;AAIPC,YAAAA,MAAM,EAAEA;AAJD,WAHsE;AAS/EyQ,UAAAA,cAAc,EAAE,KAAK1I;AAT0D,SAAlB,CAA3C,CAApB;AAWD;AACD;AACN;AACA;AACA;AACA;;AA/BO,KAxTmC,EAyVnC;AACDvZ,MAAAA,GAAG,EAAE,gBADJ;AAED+B,MAAAA,KAAK,EAAE,SAASmgB,cAAT,GAA0B;AAC/B,YAAInM,UAAU,GAAG,KAAKA,UAAtB;AACA,YAAIoM,kBAAkB,GAAG,KAAK/V,KAAL,CAAW+F,MAApC;AAAA,YACIL,IAAI,GAAGqQ,kBAAkB,CAACrQ,IAD9B;AAAA,YAEIG,GAAG,GAAGkQ,kBAAkB,CAAClQ,GAF7B;AAAA,YAGIT,MAAM,GAAG2Q,kBAAkB,CAAC3Q,MAHhC;AAAA,YAIID,KAAK,GAAG4Q,kBAAkB,CAAC5Q,KAJ/B;AAKA,eAAO,aAAa9L,KAAK,CAACI,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EAAkC,aAAaJ,KAAK,CAACI,aAAN,CAAoB,UAApB,EAAgC;AACjG+L,UAAAA,EAAE,EAAEmE;AAD6F,SAAhC,EAEhE,aAAatQ,KAAK,CAACI,aAAN,CAAoB,MAApB,EAA4B;AAC1C4D,UAAAA,CAAC,EAAEqI,IADuC;AAE1CpI,UAAAA,CAAC,EAAEuI,GAFuC;AAG1CT,UAAAA,MAAM,EAAEA,MAHkC;AAI1CD,UAAAA,KAAK,EAAEA;AAJmC,SAA5B,CAFmD,CAA/C,CAApB;AAQD;AAjBA,KAzVmC,EA2WnC;AACDvR,MAAAA,GAAG,EAAE,QADJ;AAED+B,MAAAA,KAAK,EAAE,SAASqgB,MAAT,GAAkB;AACvB,YAAIC,MAAM,GAAG,IAAb;;AAEA,YAAI,CAACzb,mBAAmB,CAAC,IAAD,CAAxB,EAAgC;AAC9B,iBAAO,IAAP;AACD;;AAED,YAAI0b,YAAY,GAAG,KAAKphB,KAAxB;AAAA,YACIoN,QAAQ,GAAGgU,YAAY,CAAChU,QAD5B;AAAA,YAEIoM,SAAS,GAAG4H,YAAY,CAAC5H,SAF7B;AAAA,YAGInJ,KAAK,GAAG+Q,YAAY,CAAC/Q,KAHzB;AAAA,YAIIC,MAAM,GAAG8Q,YAAY,CAAC9Q,MAJ1B;AAAA,YAKI+Q,KAAK,GAAGD,YAAY,CAACC,KALzB;AAAA,YAMIC,OAAO,GAAGF,YAAY,CAACE,OAN3B;AAAA,YAOIC,MAAM,GAAGriB,wBAAwB,CAACkiB,YAAD,EAAe,CAAC,UAAD,EAAa,WAAb,EAA0B,OAA1B,EAAmC,QAAnC,EAA6C,OAA7C,EAAsD,SAAtD,CAAf,CAPrC;;AASA,YAAII,KAAK,GAAGvZ,WAAW,CAACsZ,MAAD,CAAvB;AACA,YAAIhO,GAAG,GAAG;AACRkO,UAAAA,aAAa,EAAE;AACbpK,YAAAA,OAAO,EAAE,KAAK2C,UADD;AAEb0H,YAAAA,IAAI,EAAE;AAFO,WADP;AAKRC,UAAAA,aAAa,EAAE;AACbtK,YAAAA,OAAO,EAAE,KAAK0E;AADD,WALP;AAQR6F,UAAAA,aAAa,EAAE;AACbvK,YAAAA,OAAO,EAAE,KAAK0E;AADD,WARP;AAWR8F,UAAAA,YAAY,EAAE;AACZxK,YAAAA,OAAO,EAAE,KAAK0E;AADF,WAXN;AAcR+F,UAAAA,KAAK,EAAE;AACLzK,YAAAA,OAAO,EAAE,KAAKsC;AADT,WAdC;AAiBRoI,UAAAA,KAAK,EAAE;AACL1K,YAAAA,OAAO,EAAE,KAAKyC;AADT,WAjBC;AAoBR/T,UAAAA,KAAK,EAAE;AACLsR,YAAAA,OAAO,EAAE,KAAKsE,WADT;AAEL+F,YAAAA,IAAI,EAAE;AAFD,WApBC;AAwBRM,UAAAA,GAAG,EAAE;AACH3K,YAAAA,OAAO,EAAE,KAAK0F;AADX,WAxBG;AA2BRkF,UAAAA,IAAI,EAAE;AACJ5K,YAAAA,OAAO,EAAE,KAAK0F;AADV,WA3BE;AA8BRmF,UAAAA,IAAI,EAAE;AACJ7K,YAAAA,OAAO,EAAE,KAAK0F;AADV,WA9BE;AAiCRoF,UAAAA,KAAK,EAAE;AACL9K,YAAAA,OAAO,EAAE,KAAK0F;AADT,WAjCC;AAoCRqF,UAAAA,SAAS,EAAE;AACT/K,YAAAA,OAAO,EAAE,KAAK0F;AADL,WApCH;AAuCRsF,UAAAA,OAAO,EAAE;AACPhL,YAAAA,OAAO,EAAE,KAAK0F;AADP,WAvCD;AA0CRuF,UAAAA,GAAG,EAAE;AACHjL,YAAAA,OAAO,EAAE,KAAK0F;AADX,WA1CG;AA6CRwF,UAAAA,MAAM,EAAE;AACNlL,YAAAA,OAAO,EAAE,KAAK0F;AADR,WA7CA;AAgDRhY,UAAAA,OAAO,EAAE;AACPsS,YAAAA,OAAO,EAAE,KAAKiB,YADP;AAEPoJ,YAAAA,IAAI,EAAE;AAFC,WAhDD;AAoDRc,UAAAA,SAAS,EAAE;AACTnL,YAAAA,OAAO,EAAE,KAAKiD,eADL;AAEToH,YAAAA,IAAI,EAAE;AAFG,WApDH;AAwDRe,UAAAA,cAAc,EAAE;AACdpL,YAAAA,OAAO,EAAE,KAAKoC;AADA,WAxDR;AA2DRiJ,UAAAA,eAAe,EAAE;AACfrL,YAAAA,OAAO,EAAE,KAAKoC;AADC,WA3DT;AA8DRkJ,UAAAA,UAAU,EAAE;AACVtL,YAAAA,OAAO,EAAE,KAAKwG;AADJ;AA9DJ,SAAV,CAjBuB,CAkFpB;;AAEH,YAAIyD,OAAJ,EAAa;AACX,iBAAO,aAAa/c,KAAK,CAACI,aAAN,CAAoBE,OAApB,EAA6BvG,QAAQ,CAAC,EAAD,EAAKkjB,KAAL,EAAY;AACnEnR,YAAAA,KAAK,EAAEA,KAD4D;AAEnEC,YAAAA,MAAM,EAAEA;AAF2D,WAAZ,CAArC,EAGhB,KAAK0Q,cAAL,EAHgB,EAGOpb,aAAa,CAACwH,QAAD,EAAWmG,GAAX,CAHpB,CAApB;AAID;;AAED,YAAIqP,MAAM,GAAG,KAAK9C,oBAAL,EAAb;AACA,eAAO,aAAavb,KAAK,CAACI,aAAN,CAAoB,KAApB,EAA2BrG,QAAQ,CAAC;AACtDkb,UAAAA,SAAS,EAAE5U,UAAU,CAAC,kBAAD,EAAqB4U,SAArB,CADiC;AAEtD6H,UAAAA,KAAK,EAAEnd,aAAa,CAAC;AACnBsP,YAAAA,QAAQ,EAAE,UADS;AAEnBiF,YAAAA,MAAM,EAAE,SAFW;AAGnBpI,YAAAA,KAAK,EAAEA,KAHY;AAInBC,YAAAA,MAAM,EAAEA;AAJW,WAAD,EAKjB+Q,KALiB;AAFkC,SAAD,EAQpDuB,MARoD,EAQ5C;AACTzH,UAAAA,GAAG,EAAE,SAASA,GAAT,CAAa0H,IAAb,EAAmB;AACtB1B,YAAAA,MAAM,CAACnM,SAAP,GAAmB6N,IAAnB;AACD;AAHQ,SAR4C,CAAnC,EAYhB,aAAate,KAAK,CAACI,aAAN,CAAoBE,OAApB,EAA6BvG,QAAQ,CAAC,EAAD,EAAKkjB,KAAL,EAAY;AAChEnR,UAAAA,KAAK,EAAEA,KADyD;AAEhEC,UAAAA,MAAM,EAAEA;AAFwD,SAAZ,CAArC,EAGb,KAAK0Q,cAAL,EAHa,EAGUpb,aAAa,CAACwH,QAAD,EAAWmG,GAAX,CAHvB,CAZG,EAesC,KAAKwH,YAAL,EAftC,EAe2D,KAAKO,aAAL,EAf3D,CAApB;AAgBD;AA9GA,KA3WmC,CAA1B,CAAZ;;AA4dA,WAAO9G,uBAAP;AACD,GArnCoC,CAqnCnChQ,SArnCmC,CAA9B,EAqnCO6M,MAAM,CAAChC,WAAP,GAAqBkC,SArnC5B,EAqnCuCF,MAAM,CAAC3C,YAAP,GAAsBxK,aAAa,CAAC;AAChFoF,IAAAA,MAAM,EAAE,YADwE;AAEhF+D,IAAAA,WAAW,EAAE,MAFmE;AAGhF8E,IAAAA,cAAc,EAAE,KAHgE;AAIhFD,IAAAA,MAAM,EAAE,CAJwE;AAKhF3B,IAAAA,MAAM,EAAE;AACNQ,MAAAA,GAAG,EAAE,CADC;AAENF,MAAAA,KAAK,EAAE,CAFD;AAGNG,MAAAA,MAAM,EAAE,CAHF;AAINJ,MAAAA,IAAI,EAAE;AAJA,KALwE;AAWhFoD,IAAAA,iBAAiB,EAAE;AAX6D,GAAD,EAY9EtF,YAZ8E,CArnC1E,EAioCW2C,MAAM,CAACyR,wBAAP,GAAkC,UAAUC,SAAV,EAAqBhP,SAArB,EAAgC;AAClF,QAAIzJ,IAAI,GAAGyY,SAAS,CAACzY,IAArB;AAAA,QACI8C,QAAQ,GAAG2V,SAAS,CAAC3V,QADzB;AAAA,QAEIiD,KAAK,GAAG0S,SAAS,CAAC1S,KAFtB;AAAA,QAGIC,MAAM,GAAGyS,SAAS,CAACzS,MAHvB;AAAA,QAIIhH,MAAM,GAAGyZ,SAAS,CAACzZ,MAJvB;AAAA,QAKI+D,WAAW,GAAG0V,SAAS,CAAC1V,WAL5B;AAAA,QAMIkD,MAAM,GAAGwS,SAAS,CAACxS,MANvB;;AAQA,QAAIlS,MAAM,CAAC0V,SAAS,CAAC/B,QAAX,CAAV,EAAgC;AAC9B,UAAIgR,YAAY,GAAG9T,kBAAkB,CAAC6T,SAAD,CAArC;AACA,aAAO7e,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK8e,YAAL,CAAd,EAAkC,EAAlC,EAAsC;AACtEhR,QAAAA,QAAQ,EAAE;AAD4D,OAAtC,EAE/B6B,yCAAyC,CAAC3P,aAAa,CAACA,aAAa,CAAC;AACvElE,QAAAA,KAAK,EAAE+iB;AADgE,OAAD,EAErEC,YAFqE,CAAd,EAExC,EAFwC,EAEpC;AACpBhR,QAAAA,QAAQ,EAAE;AADU,OAFoC,CAAd,EAIxC+B,SAJwC,CAFV,CAAd,EAMH,EANG,EAMC;AACnBkP,QAAAA,QAAQ,EAAE3Y,IADS;AAEnB4Y,QAAAA,SAAS,EAAE7S,KAFQ;AAGnB8S,QAAAA,UAAU,EAAE7S,MAHO;AAInB8S,QAAAA,UAAU,EAAE9Z,MAJO;AAKnB+Z,QAAAA,eAAe,EAAEhW,WALE;AAMnBiW,QAAAA,UAAU,EAAE/S,MANO;AAOnBgT,QAAAA,YAAY,EAAEnW;AAPK,OAND,CAApB;AAeD;;AAED,QAAI9C,IAAI,KAAKyJ,SAAS,CAACkP,QAAnB,IAA+B5S,KAAK,KAAK0D,SAAS,CAACmP,SAAnD,IAAgE5S,MAAM,KAAKyD,SAAS,CAACoP,UAArF,IAAmG7Z,MAAM,KAAKyK,SAAS,CAACqP,UAAxH,IAAsI/V,WAAW,KAAK0G,SAAS,CAACsP,eAAhK,IAAmL,CAACvb,YAAY,CAACyI,MAAD,EAASwD,SAAS,CAACuP,UAAnB,CAApM,EAAoO;AAClO,UAAIE,aAAa,GAAGtU,kBAAkB,CAAC6T,SAAD,CAAtC,CADkO,CAC/K;;;AAGnD,UAAIU,iBAAiB,GAAG;AACtB;AACA;AACApX,QAAAA,MAAM,EAAE0H,SAAS,CAAC1H,MAHI;AAItBC,QAAAA,MAAM,EAAEyH,SAAS,CAACzH,MAJI;AAKtB;AACA;AACAkD,QAAAA,eAAe,EAAEuE,SAAS,CAACvE;AAPL,OAAxB;;AAUA,UAAIkU,cAAc,GAAGxf,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKiI,cAAc,CAAC4H,SAAD,EAAYzJ,IAAZ,EAAkBhB,MAAlB,CAAnB,CAAd,EAA6D,EAA7D,EAAiE;AACjG;AACA0I,QAAAA,QAAQ,EAAE+B,SAAS,CAAC/B,QAAV,GAAqB;AAFkE,OAAjE,CAAlC;;AAKA,UAAI2R,QAAQ,GAAGzf,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKsf,aAAL,CAAd,EAAmCC,iBAAnC,CAAd,EAAqEC,cAArE,CAA5B;;AAEA,aAAOxf,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKyf,QAAL,CAAd,EAA8B9P,yCAAyC,CAAC3P,aAAa,CAAC;AACtHlE,QAAAA,KAAK,EAAE+iB;AAD+G,OAAD,EAEpHY,QAFoH,CAAd,EAE3F5P,SAF2F,CAAvE,CAAd,EAEO,EAFP,EAEW;AAC7BkP,QAAAA,QAAQ,EAAE3Y,IADmB;AAE7B4Y,QAAAA,SAAS,EAAE7S,KAFkB;AAG7B8S,QAAAA,UAAU,EAAE7S,MAHiB;AAI7B8S,QAAAA,UAAU,EAAE9Z,MAJiB;AAK7B+Z,QAAAA,eAAe,EAAEhW,WALY;AAM7BiW,QAAAA,UAAU,EAAE/S,MANiB;AAO7BgT,QAAAA,YAAY,EAAEnW;AAPe,OAFX,CAApB;AAWD;;AAED,QAAI,CAACzH,eAAe,CAACyH,QAAD,EAAW2G,SAAS,CAACwP,YAArB,CAApB,EAAwD;AACtD;AACA,UAAIK,aAAa,GAAG,CAACvlB,MAAM,CAACiM,IAAD,CAA3B;AACA,UAAIuZ,WAAW,GAAGD,aAAa,GAAG7P,SAAS,CAAC/B,QAAb,GAAwB+B,SAAS,CAAC/B,QAAV,GAAqB,CAA5E;AACA,aAAO9N,aAAa,CAACA,aAAa,CAAC;AACjC8N,QAAAA,QAAQ,EAAE6R;AADuB,OAAD,EAE/BhQ,yCAAyC,CAAC3P,aAAa,CAACA,aAAa,CAAC;AACvElE,QAAAA,KAAK,EAAE+iB;AADgE,OAAD,EAErEhP,SAFqE,CAAd,EAE3C,EAF2C,EAEvC;AACjB/B,QAAAA,QAAQ,EAAE6R;AADO,OAFuC,CAAd,EAIxC9P,SAJwC,CAFV,CAAd,EAMH,EANG,EAMC;AACnBwP,QAAAA,YAAY,EAAEnW;AADK,OAND,CAApB;AASD;;AAED,WAAO,IAAP;AACD,GA/sCM,EA+sCJiE,MAAM,CAACyL,eAAP,GAAyB,UAAUgH,MAAV,EAAkB9jB,KAAlB,EAAyB;AACnD,QAAI+jB,GAAJ;;AAEA,SAAK,aAAarf,cAAc,CAACof,MAAD,CAAhC,EAA0C;AACxCC,MAAAA,GAAG,GAAG,aAAatf,YAAY,CAACqf,MAAD,EAAS9jB,KAAT,CAA/B;AACD,KAFD,MAEO,IAAIhC,WAAW,CAAC8lB,MAAD,CAAf,EAAyB;AAC9BC,MAAAA,GAAG,GAAGD,MAAM,CAAC9jB,KAAD,CAAZ;AACD,KAFM,MAEA;AACL+jB,MAAAA,GAAG,GAAG,aAAaxf,KAAK,CAACI,aAAN,CAAoBS,GAApB,EAAyBpF,KAAzB,CAAnB;AACD;;AAED,WAAO,aAAauE,KAAK,CAACI,aAAN,CAAoBG,KAApB,EAA2B;AAC7C0U,MAAAA,SAAS,EAAE,qBADkC;AAE7C1a,MAAAA,GAAG,EAAEkB,KAAK,CAAClB;AAFkC,KAA3B,EAGjBilB,GAHiB,CAApB;AAID,GA9tCM,EA8tCJzS,KA9tCH;AA+tCD,CAx5CM","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport _every from \"lodash/every\";\nimport _find from \"lodash/find\";\nimport _isFunction from \"lodash/isFunction\";\nimport _throttle from \"lodash/throttle\";\nimport _sortBy from \"lodash/sortBy\";\nimport _get from \"lodash/get\";\nimport _range from \"lodash/range\";\nimport _isNil from \"lodash/isNil\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, cloneElement, isValidElement, createElement } from 'react';\nimport classNames from 'classnames';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Tooltip } from '../component/Tooltip';\nimport { Legend } from '../component/Legend';\nimport { Curve } from '../shape/Curve';\nimport { Cross } from '../shape/Cross';\nimport { Sector } from '../shape/Sector';\nimport { Dot } from '../shape/Dot';\nimport { Rectangle } from '../shape/Rectangle';\nimport { findAllByType, findChildByType, getDisplayName, parseChildIndex, validateWidthHeight, isChildrenEqual, renderByOrder, getReactEventByType } from '../util/ReactUtils';\nimport { CartesianAxis } from '../cartesian/CartesianAxis';\nimport { Brush } from '../cartesian/Brush';\nimport { getOffset, calculateChartCoordinate } from '../util/DOMUtils';\nimport { getAnyElementOfObject, hasDuplicate, uniqueId, isNumber, findEntryInArray } from '../util/DataUtils';\nimport { calculateActiveTickIndex, getMainColorOfGraphicItem, getBarSizeList, getBarPosition, appendOffsetOfLegend, getLegendProps, combineEventHandlers, getTicksOfAxis, getCoordinatesOfGrid, getStackedDataOfItem, parseErrorBarsOfAxis, getBandSizeOfAxis, getStackGroupsByAxisId, getValueByDataKey, isCategoricalAxis, getDomainOfItemsWithSameAxis, getDomainOfStackGroups, getDomainOfDataByKey, parseSpecifiedDomain, parseDomainOfCategoryAxis } from '../util/ChartUtils';\nimport { detectReferenceElementsDomain } from '../util/DetectReferenceElementsDomain';\nimport { inRangeOfSector, polarToCartesian } from '../util/PolarUtils';\nimport { shallowEqual } from '../util/ShallowEqual';\nimport { eventCenter, SYNC_EVENT } from '../util/Events';\nimport { filterProps, adaptEventHandlers } from '../util/types';\nvar ORIENT_MAP = {\n  xAxis: ['bottom', 'top'],\n  yAxis: ['left', 'right']\n};\nvar originCoordinate = {\n  x: 0,\n  y: 0\n}; // use legacy isFinite only if there is a problem (aka IE)\n// eslint-disable-next-line no-restricted-globals\n\nvar isFinit = Number.isFinite ? Number.isFinite : isFinite;\nvar defer = // eslint-disable-next-line no-nested-ternary\ntypeof requestAnimationFrame === 'function' ? requestAnimationFrame : typeof setImmediate === 'function' ? setImmediate : setTimeout;\nvar deferClear = // eslint-disable-next-line no-nested-ternary\ntypeof cancelAnimationFrame === 'function' ? cancelAnimationFrame : typeof clearImmediate === 'function' ? clearImmediate : clearTimeout;\n\nvar calculateTooltipPos = function calculateTooltipPos(rangeObj, layout) {\n  if (layout === 'horizontal') {\n    return rangeObj.x;\n  }\n\n  if (layout === 'vertical') {\n    return rangeObj.y;\n  }\n\n  if (layout === 'centric') {\n    return rangeObj.angle;\n  }\n\n  return rangeObj.radius;\n};\n\nvar getActiveCoordinate = function getActiveCoordinate(layout, tooltipTicks, activeIndex, rangeObj) {\n  var entry = tooltipTicks.find(function (tick) {\n    return tick && tick.index === activeIndex;\n  });\n\n  if (entry) {\n    if (layout === 'horizontal') {\n      return {\n        x: entry.coordinate,\n        y: rangeObj.y\n      };\n    }\n\n    if (layout === 'vertical') {\n      return {\n        x: rangeObj.x,\n        y: entry.coordinate\n      };\n    }\n\n    if (layout === 'centric') {\n      var _angle = entry.coordinate;\n      var _radius = rangeObj.radius;\n      return _objectSpread(_objectSpread(_objectSpread({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, _radius, _angle)), {}, {\n        angle: _angle,\n        radius: _radius\n      });\n    }\n\n    var radius = entry.coordinate;\n    var angle = rangeObj.angle;\n    return _objectSpread(_objectSpread(_objectSpread({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, radius, angle)), {}, {\n      angle: angle,\n      radius: radius\n    });\n  }\n\n  return originCoordinate;\n};\n\nvar getDisplayedData = function getDisplayedData(data, _ref, item) {\n  var graphicalItems = _ref.graphicalItems,\n      dataStartIndex = _ref.dataStartIndex,\n      dataEndIndex = _ref.dataEndIndex;\n  var itemsData = (graphicalItems || []).reduce(function (result, child) {\n    var itemData = child.props.data;\n\n    if (itemData && itemData.length) {\n      return [].concat(_toConsumableArray(result), _toConsumableArray(itemData));\n    }\n\n    return result;\n  }, []);\n\n  if (itemsData && itemsData.length > 0) {\n    return itemsData;\n  }\n\n  if (item && item.props && item.props.data && item.props.data.length > 0) {\n    return item.props.data;\n  }\n\n  if (data && data.length && isNumber(dataStartIndex) && isNumber(dataEndIndex)) {\n    return data.slice(dataStartIndex, dataEndIndex + 1);\n  }\n\n  return [];\n};\n/**\n * Get the content to be displayed in the tooltip\n * @param  {Object} state          Current state\n * @param  {Array}  chartData      The data defined in chart\n * @param  {Number} activeIndex    Active index of data\n * @param  {String} activeLabel    Active label of data\n * @return {Array}                 The content of tooltip\n */\n\n\nvar getTooltipContent = function getTooltipContent(state, chartData, activeIndex, activeLabel) {\n  var graphicalItems = state.graphicalItems,\n      tooltipAxis = state.tooltipAxis;\n  var displayedData = getDisplayedData(chartData, state);\n\n  if (activeIndex < 0 || !graphicalItems || !graphicalItems.length || activeIndex >= displayedData.length) {\n    return null;\n  } // get data by activeIndex when the axis don't allow duplicated category\n\n\n  return graphicalItems.reduce(function (result, child) {\n    var hide = child.props.hide;\n\n    if (hide) {\n      return result;\n    }\n\n    var _child$props = child.props,\n        dataKey = _child$props.dataKey,\n        name = _child$props.name,\n        unit = _child$props.unit,\n        formatter = _child$props.formatter,\n        data = _child$props.data,\n        tooltipType = _child$props.tooltipType;\n    var payload;\n\n    if (tooltipAxis.dataKey && !tooltipAxis.allowDuplicatedCategory) {\n      // graphic child has data props\n      var entries = data === undefined ? displayedData : data;\n      payload = findEntryInArray(entries, tooltipAxis.dataKey, activeLabel);\n    } else {\n      payload = data && data[activeIndex] || displayedData[activeIndex];\n    }\n\n    if (!payload) {\n      return result;\n    }\n\n    return [].concat(_toConsumableArray(result), [_objectSpread(_objectSpread({}, filterProps(child)), {}, {\n      dataKey: dataKey,\n      unit: unit,\n      formatter: formatter,\n      name: name || dataKey,\n      color: getMainColorOfGraphicItem(child),\n      value: getValueByDataKey(payload, dataKey),\n      type: tooltipType,\n      payload: payload\n    })]);\n  }, []);\n};\n/**\n * Returns tooltip data based on a mouse position (as a parameter or in state)\n * @param  {Object} state     current state\n * @param  {Array}  chartData the data defined in chart\n * @param  {String} layout     The layout type of chart\n * @param  {Object} rangeObj  { x, y } coordinates\n * @return {Object}           Tooltip data data\n */\n\n\nvar getTooltipData = function getTooltipData(state, chartData, layout, rangeObj) {\n  var rangeData = rangeObj || {\n    x: state.chartX,\n    y: state.chartY\n  };\n  var pos = calculateTooltipPos(rangeData, layout);\n  var ticks = state.orderedTooltipTicks,\n      axis = state.tooltipAxis,\n      tooltipTicks = state.tooltipTicks;\n  var activeIndex = calculateActiveTickIndex(pos, ticks, tooltipTicks, axis);\n\n  if (activeIndex >= 0 && tooltipTicks) {\n    var activeLabel = tooltipTicks[activeIndex] && tooltipTicks[activeIndex].value;\n    var activePayload = getTooltipContent(state, chartData, activeIndex, activeLabel);\n    var activeCoordinate = getActiveCoordinate(layout, ticks, activeIndex, rangeData);\n    return {\n      activeTooltipIndex: activeIndex,\n      activeLabel: activeLabel,\n      activePayload: activePayload,\n      activeCoordinate: activeCoordinate\n    };\n  }\n\n  return null;\n};\n/**\n * Get the configuration of axis by the options of axis instance\n * @param  {Object} props         Latest props\n * @param {Array}  axes           The instance of axes\n * @param  {Array} graphicalItems The instances of item\n * @param  {String} axisType      The type of axis, xAxis - x-axis, yAxis - y-axis\n * @param  {String} axisIdKey     The unique id of an axis\n * @param  {Object} stackGroups   The items grouped by axisId and stackId\n * @param {Number} dataStartIndex The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex   The end index of the data series when a brush is applied\n * @return {Object}      Configuration\n */\n\n\nvar getAxisMapByAxes = function getAxisMapByAxes(props, _ref2) {\n  var axes = _ref2.axes,\n      graphicalItems = _ref2.graphicalItems,\n      axisType = _ref2.axisType,\n      axisIdKey = _ref2.axisIdKey,\n      stackGroups = _ref2.stackGroups,\n      dataStartIndex = _ref2.dataStartIndex,\n      dataEndIndex = _ref2.dataEndIndex;\n  var layout = props.layout,\n      children = props.children,\n      stackOffset = props.stackOffset;\n  var isCategorical = isCategoricalAxis(layout, axisType); // Eliminate duplicated axes\n\n  var axisMap = axes.reduce(function (result, child) {\n    var _child$props2 = child.props,\n        type = _child$props2.type,\n        dataKey = _child$props2.dataKey,\n        allowDataOverflow = _child$props2.allowDataOverflow,\n        allowDuplicatedCategory = _child$props2.allowDuplicatedCategory,\n        scale = _child$props2.scale,\n        ticks = _child$props2.ticks;\n    var axisId = child.props[axisIdKey];\n    var displayedData = getDisplayedData(props.data, {\n      graphicalItems: graphicalItems.filter(function (item) {\n        return item.props[axisIdKey] === axisId;\n      }),\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n    var len = displayedData.length;\n\n    if (!result[axisId]) {\n      var domain, duplicateDomain, categoricalDomain;\n\n      if (dataKey) {\n        // has dataKey in <Axis />\n        domain = getDomainOfDataByKey(displayedData, dataKey, type);\n\n        if (type === 'category' && isCategorical) {\n          // the field type is category data and this axis is catrgorical axis\n          var duplicate = hasDuplicate(domain);\n\n          if (allowDuplicatedCategory && duplicate) {\n            duplicateDomain = domain; // When category axis has duplicated text, serial numbers are used to generate scale\n\n            domain = _range(0, len);\n          } else if (!allowDuplicatedCategory) {\n            // remove duplicated category\n            domain = parseDomainOfCategoryAxis(child.props.domain, domain, child).reduce(function (finalDomain, entry) {\n              return finalDomain.indexOf(entry) >= 0 ? finalDomain : [].concat(_toConsumableArray(finalDomain), [entry]);\n            }, []);\n          }\n        } else if (type === 'category') {\n          // the field type is category data and this axis is numerical axis\n          if (!allowDuplicatedCategory) {\n            domain = parseDomainOfCategoryAxis(child.props.domain, domain, child).reduce(function (finalDomain, entry) {\n              return finalDomain.indexOf(entry) >= 0 || entry === '' || _isNil(entry) ? finalDomain : [].concat(_toConsumableArray(finalDomain), [entry]);\n            }, []);\n          } else {\n            // eliminate undefined or null or empty string\n            domain = domain.filter(function (entry) {\n              return entry !== '' && !_isNil(entry);\n            });\n          }\n        } else if (type === 'number') {\n          // the field type is numerical\n          var errorBarsDomain = parseErrorBarsOfAxis(displayedData, graphicalItems.filter(function (item) {\n            return item.props[axisIdKey] === axisId && !item.props.hide;\n          }), dataKey, axisType);\n\n          if (errorBarsDomain) {\n            domain = errorBarsDomain;\n          }\n        }\n\n        if (isCategorical && (type === 'number' || scale !== 'auto')) {\n          categoricalDomain = getDomainOfDataByKey(displayedData, dataKey, 'category');\n        }\n      } else if (isCategorical) {\n        // the axis is a categorical axis\n        domain = _range(0, len);\n      } else if (stackGroups && stackGroups[axisId] && stackGroups[axisId].hasStack && type === 'number') {\n        // when stackOffset is 'expand', the domain may be calculated as [0, 1.000000000002]\n        domain = stackOffset === 'expand' ? [0, 1] : getDomainOfStackGroups(stackGroups[axisId].stackGroups, dataStartIndex, dataEndIndex);\n      } else {\n        domain = getDomainOfItemsWithSameAxis(displayedData, graphicalItems.filter(function (item) {\n          return item.props[axisIdKey] === axisId && !item.props.hide;\n        }), type, true);\n      }\n\n      if (type === 'number') {\n        // To detect wether there is any reference lines whose props alwaysShow is true\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType, ticks);\n\n        if (child.props.domain) {\n          domain = parseSpecifiedDomain(child.props.domain, domain, allowDataOverflow);\n        }\n      } else if (type === 'category' && child.props.domain) {\n        var axisDomain = child.props.domain;\n        var isDomainValidate = domain.every(function (entry) {\n          return axisDomain.indexOf(entry) >= 0;\n        });\n\n        if (isDomainValidate) {\n          domain = axisDomain;\n        }\n      }\n\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, axisId, _objectSpread(_objectSpread({}, child.props), {}, {\n        axisType: axisType,\n        domain: domain,\n        categoricalDomain: categoricalDomain,\n        duplicateDomain: duplicateDomain,\n        originalDomain: child.props.domain,\n        isCategorical: isCategorical,\n        layout: layout\n      })));\n    }\n\n    return result;\n  }, {});\n  return axisMap;\n};\n/**\n * Get the configuration of axis by the options of item,\n * this kind of axis does not display in chart\n * @param  {Object} props         Latest props\n * @param  {Array} graphicalItems The instances of item\n * @param  {ReactElement} Axis    Axis Component\n * @param  {String} axisType      The type of axis, xAxis - x-axis, yAxis - y-axis\n * @param  {String} axisIdKey     The unique id of an axis\n * @param  {Object} stackGroups   The items grouped by axisId and stackId\n * @param {Number} dataStartIndex The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex   The end index of the data series when a brush is applied\n * @return {Object}               Configuration\n */\n\n\nvar getAxisMapByItems = function getAxisMapByItems(props, _ref3) {\n  var graphicalItems = _ref3.graphicalItems,\n      Axis = _ref3.Axis,\n      axisType = _ref3.axisType,\n      axisIdKey = _ref3.axisIdKey,\n      stackGroups = _ref3.stackGroups,\n      dataStartIndex = _ref3.dataStartIndex,\n      dataEndIndex = _ref3.dataEndIndex;\n  var layout = props.layout,\n      children = props.children;\n  var displayedData = getDisplayedData(props.data, {\n    graphicalItems: graphicalItems,\n    dataStartIndex: dataStartIndex,\n    dataEndIndex: dataEndIndex\n  });\n  var len = displayedData.length;\n  var isCategorical = isCategoricalAxis(layout, axisType);\n  var index = -1; // The default type of x-axis is category axis,\n  // The default contents of x-axis is the serial numbers of data\n  // The default type of y-axis is number axis\n  // The default contents of y-axis is the domain of data\n\n  var axisMap = graphicalItems.reduce(function (result, child) {\n    var axisId = child.props[axisIdKey];\n\n    if (!result[axisId]) {\n      index++;\n      var domain;\n\n      if (isCategorical) {\n        domain = _range(0, len);\n      } else if (stackGroups && stackGroups[axisId] && stackGroups[axisId].hasStack) {\n        domain = getDomainOfStackGroups(stackGroups[axisId].stackGroups, dataStartIndex, dataEndIndex);\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType);\n      } else {\n        domain = parseSpecifiedDomain(Axis.defaultProps.domain, getDomainOfItemsWithSameAxis(displayedData, graphicalItems.filter(function (item) {\n          return item.props[axisIdKey] === axisId && !item.props.hide;\n        }), 'number'), Axis.defaultProps.allowDataOverflow);\n        domain = detectReferenceElementsDomain(children, domain, axisId, axisType);\n      }\n\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, axisId, _objectSpread(_objectSpread({\n        axisType: axisType\n      }, Axis.defaultProps), {}, {\n        hide: true,\n        orientation: _get(ORIENT_MAP, \"\".concat(axisType, \".\").concat(index % 2), null),\n        domain: domain,\n        originalDomain: Axis.defaultProps.domain,\n        isCategorical: isCategorical,\n        layout: layout // specify scale when no Axis\n        // scale: isCategorical ? 'band' : 'linear',\n\n      })));\n    }\n\n    return result;\n  }, {});\n  return axisMap;\n};\n/**\n * Get the configuration of all x-axis or y-axis\n * @param  {Object} props          Latest props\n * @param  {String} axisType       The type of axis\n * @param  {Array}  graphicalItems The instances of item\n * @param  {Object} stackGroups    The items grouped by axisId and stackId\n * @param {Number} dataStartIndex  The start index of the data series when a brush is applied\n * @param {Number} dataEndIndex    The end index of the data series when a brush is applied\n * @return {Object}          Configuration\n */\n\n\nvar getAxisMap = function getAxisMap(props, _ref4) {\n  var _ref4$axisType = _ref4.axisType,\n      axisType = _ref4$axisType === void 0 ? 'xAxis' : _ref4$axisType,\n      AxisComp = _ref4.AxisComp,\n      graphicalItems = _ref4.graphicalItems,\n      stackGroups = _ref4.stackGroups,\n      dataStartIndex = _ref4.dataStartIndex,\n      dataEndIndex = _ref4.dataEndIndex;\n  var children = props.children;\n  var axisIdKey = \"\".concat(axisType, \"Id\"); // Get all the instance of Axis\n\n  var axes = findAllByType(children, AxisComp);\n  var axisMap = {};\n\n  if (axes && axes.length) {\n    axisMap = getAxisMapByAxes(props, {\n      axes: axes,\n      graphicalItems: graphicalItems,\n      axisType: axisType,\n      axisIdKey: axisIdKey,\n      stackGroups: stackGroups,\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n  } else if (graphicalItems && graphicalItems.length) {\n    axisMap = getAxisMapByItems(props, {\n      Axis: AxisComp,\n      graphicalItems: graphicalItems,\n      axisType: axisType,\n      axisIdKey: axisIdKey,\n      stackGroups: stackGroups,\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex\n    });\n  }\n\n  return axisMap;\n};\n\nvar tooltipTicksGenerator = function tooltipTicksGenerator(axisMap) {\n  var axis = getAnyElementOfObject(axisMap);\n  var tooltipTicks = getTicksOfAxis(axis, false, true);\n  return {\n    tooltipTicks: tooltipTicks,\n    orderedTooltipTicks: _sortBy(tooltipTicks, function (o) {\n      return o.coordinate;\n    }),\n    tooltipAxis: axis,\n    tooltipAxisBandSize: getBandSizeOfAxis(axis)\n  };\n};\n/**\n * Returns default, reset state for the categorical chart.\n * @param {Object} props Props object to use when creating the default state\n * @return {Object} Whole new state\n */\n\n\nvar createDefaultState = function createDefaultState(props) {\n  var children = props.children,\n      defaultShowTooltip = props.defaultShowTooltip;\n  var brushItem = findChildByType(children, Brush.displayName);\n  var startIndex = brushItem && brushItem.props && brushItem.props.startIndex || 0;\n  var endIndex = brushItem && brushItem.props && brushItem.props.endIndex || props.data && props.data.length - 1 || 0;\n  return {\n    chartX: 0,\n    chartY: 0,\n    dataStartIndex: startIndex,\n    dataEndIndex: endIndex,\n    activeTooltipIndex: -1,\n    isTooltipActive: !_isNil(defaultShowTooltip) ? defaultShowTooltip : false\n  };\n};\n\nvar hasGraphicalBarItem = function hasGraphicalBarItem(graphicalItems) {\n  if (!graphicalItems || !graphicalItems.length) {\n    return false;\n  }\n\n  return graphicalItems.some(function (item) {\n    var name = getDisplayName(item && item.type);\n    return name && name.indexOf('Bar') >= 0;\n  });\n};\n\nvar getAxisNameByLayout = function getAxisNameByLayout(layout) {\n  if (layout === 'horizontal') {\n    return {\n      numericAxisName: 'yAxis',\n      cateAxisName: 'xAxis'\n    };\n  }\n\n  if (layout === 'vertical') {\n    return {\n      numericAxisName: 'xAxis',\n      cateAxisName: 'yAxis'\n    };\n  }\n\n  if (layout === 'centric') {\n    return {\n      numericAxisName: 'radiusAxis',\n      cateAxisName: 'angleAxis'\n    };\n  }\n\n  return {\n    numericAxisName: 'angleAxis',\n    cateAxisName: 'radiusAxis'\n  };\n};\n/**\n * Calculate the offset of main part in the svg element\n * @param  {Object} props          Latest props\n * graphicalItems The instances of item\n * xAxisMap       The configuration of x-axis\n * yAxisMap       The configuration of y-axis\n * @param  {Object} prevLegendBBox          the boundary box of legend\n * @return {Object} The offset of main part in the svg element\n */\n\n\nvar calculateOffset = function calculateOffset(_ref5, prevLegendBBox) {\n  var props = _ref5.props,\n      graphicalItems = _ref5.graphicalItems,\n      _ref5$xAxisMap = _ref5.xAxisMap,\n      xAxisMap = _ref5$xAxisMap === void 0 ? {} : _ref5$xAxisMap,\n      _ref5$yAxisMap = _ref5.yAxisMap,\n      yAxisMap = _ref5$yAxisMap === void 0 ? {} : _ref5$yAxisMap;\n  var width = props.width,\n      height = props.height,\n      children = props.children;\n  var margin = props.margin || {};\n  var brushItem = findChildByType(children, Brush.displayName);\n  var legendItem = findChildByType(children, Legend.displayName);\n  var offsetH = Object.keys(yAxisMap).reduce(function (result, id) {\n    var entry = yAxisMap[id];\n    var orientation = entry.orientation;\n\n    if (!entry.mirror && !entry.hide) {\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, orientation, result[orientation] + entry.width));\n    }\n\n    return result;\n  }, {\n    left: margin.left || 0,\n    right: margin.right || 0\n  });\n  var offsetV = Object.keys(xAxisMap).reduce(function (result, id) {\n    var entry = xAxisMap[id];\n    var orientation = entry.orientation;\n\n    if (!entry.mirror && !entry.hide) {\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, orientation, _get(result, \"\".concat(orientation)) + entry.height));\n    }\n\n    return result;\n  }, {\n    top: margin.top || 0,\n    bottom: margin.bottom || 0\n  });\n\n  var offset = _objectSpread(_objectSpread({}, offsetV), offsetH);\n\n  var brushBottom = offset.bottom;\n\n  if (brushItem) {\n    offset.bottom += brushItem.props.height || Brush.defaultProps.height;\n  }\n\n  if (legendItem && prevLegendBBox) {\n    offset = appendOffsetOfLegend(offset, graphicalItems, props, prevLegendBBox);\n  }\n\n  return _objectSpread(_objectSpread({\n    brushBottom: brushBottom\n  }, offset), {}, {\n    width: width - offset.left - offset.right,\n    height: height - offset.top - offset.bottom\n  });\n};\n\nexport var generateCategoricalChart = function generateCategoricalChart(_ref6) {\n  var _class, _temp;\n\n  var chartName = _ref6.chartName,\n      GraphicalChild = _ref6.GraphicalChild,\n      _ref6$eventType = _ref6.eventType,\n      eventType = _ref6$eventType === void 0 ? 'axis' : _ref6$eventType,\n      axisComponents = _ref6.axisComponents,\n      legendContent = _ref6.legendContent,\n      formatAxisMap = _ref6.formatAxisMap,\n      defaultProps = _ref6.defaultProps;\n\n  var getFormatItems = function getFormatItems(props, currentState) {\n    var graphicalItems = currentState.graphicalItems,\n        stackGroups = currentState.stackGroups,\n        offset = currentState.offset,\n        updateId = currentState.updateId,\n        dataStartIndex = currentState.dataStartIndex,\n        dataEndIndex = currentState.dataEndIndex;\n    var barSize = props.barSize,\n        layout = props.layout,\n        barGap = props.barGap,\n        barCategoryGap = props.barCategoryGap,\n        globalMaxBarSize = props.maxBarSize;\n\n    var _getAxisNameByLayout = getAxisNameByLayout(layout),\n        numericAxisName = _getAxisNameByLayout.numericAxisName,\n        cateAxisName = _getAxisNameByLayout.cateAxisName;\n\n    var hasBar = hasGraphicalBarItem(graphicalItems);\n    var sizeList = hasBar && getBarSizeList({\n      barSize: barSize,\n      stackGroups: stackGroups\n    });\n    var formatedItems = [];\n    graphicalItems.forEach(function (item, index) {\n      var displayedData = getDisplayedData(props.data, {\n        dataStartIndex: dataStartIndex,\n        dataEndIndex: dataEndIndex\n      }, item);\n      var _item$props = item.props,\n          dataKey = _item$props.dataKey,\n          childMaxBarSize = _item$props.maxBarSize;\n      var numericAxisId = item.props[\"\".concat(numericAxisName, \"Id\")];\n      var cateAxisId = item.props[\"\".concat(cateAxisName, \"Id\")];\n      var axisObj = axisComponents.reduce(function (result, entry) {\n        var _objectSpread6;\n\n        var axisMap = currentState[\"\".concat(entry.axisType, \"Map\")];\n        var id = item.props[\"\".concat(entry.axisType, \"Id\")];\n        var axis = axisMap && axisMap[id];\n        return _objectSpread(_objectSpread({}, result), {}, (_objectSpread6 = {}, _defineProperty(_objectSpread6, entry.axisType, axis), _defineProperty(_objectSpread6, \"\".concat(entry.axisType, \"Ticks\"), getTicksOfAxis(axis)), _objectSpread6));\n      }, {});\n      var cateAxis = axisObj[cateAxisName];\n      var cateTicks = axisObj[\"\".concat(cateAxisName, \"Ticks\")];\n      var stackedData = stackGroups && stackGroups[numericAxisId] && stackGroups[numericAxisId].hasStack && getStackedDataOfItem(item, stackGroups[numericAxisId].stackGroups);\n      var itemIsBar = getDisplayName(item.type).indexOf('Bar') >= 0;\n      var bandSize = getBandSizeOfAxis(cateAxis, cateTicks);\n      var barPosition = [];\n\n      if (itemIsBar) {\n        var barBandSize = getBandSizeOfAxis(cateAxis, cateTicks, true); // 如果是bar，计算bar的位置\n\n        var maxBarSize = _isNil(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;\n        barPosition = getBarPosition({\n          barGap: barGap,\n          barCategoryGap: barCategoryGap,\n          bandSize: barBandSize !== bandSize ? barBandSize : bandSize,\n          sizeList: sizeList[cateAxisId],\n          maxBarSize: maxBarSize\n        });\n\n        if (barBandSize !== bandSize) {\n          barPosition = barPosition.map(function (pos) {\n            return _objectSpread(_objectSpread({}, pos), {}, {\n              position: _objectSpread(_objectSpread({}, pos.position), {}, {\n                offset: pos.position.offset - barBandSize / 2\n              })\n            });\n          });\n        }\n      }\n\n      var componsedFn = item && item.type && item.type.getComposedData;\n\n      if (componsedFn) {\n        var _objectSpread7;\n\n        formatedItems.push({\n          props: _objectSpread(_objectSpread({}, componsedFn(_objectSpread(_objectSpread({}, axisObj), {}, {\n            displayedData: displayedData,\n            props: props,\n            dataKey: dataKey,\n            item: item,\n            bandSize: bandSize,\n            barPosition: barPosition,\n            offset: offset,\n            stackedData: stackedData,\n            layout: layout,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex\n          }))), {}, (_objectSpread7 = {\n            key: item.key || \"item-\".concat(index)\n          }, _defineProperty(_objectSpread7, numericAxisName, axisObj[numericAxisName]), _defineProperty(_objectSpread7, cateAxisName, axisObj[cateAxisName]), _defineProperty(_objectSpread7, \"animationId\", updateId), _objectSpread7)),\n          childIndex: parseChildIndex(item, props.children),\n          item: item\n        });\n      }\n    });\n    return formatedItems;\n  };\n  /**\n   * The AxisMaps are expensive to render on large data sets\n   * so provide the ability to store them in state and only update them when necessary\n   * they are dependent upon the start and end index of\n   * the brush so it's important that this method is called _after_\n   * the state is updated with any new start/end indices\n   *\n   * @param {Object} props          The props object to be used for updating the axismaps\n   * dataStartIndex: The start index of the data series when a brush is applied\n   * dataEndIndex: The end index of the data series when a brush is applied\n   * updateId: The update id\n   * @param {Object} prevState      Prev state\n   * @return {Object} state New state to set\n   */\n\n\n  var updateStateOfAxisMapsOffsetAndStackGroups = function updateStateOfAxisMapsOffsetAndStackGroups(_ref7, prevState) {\n    var props = _ref7.props,\n        dataStartIndex = _ref7.dataStartIndex,\n        dataEndIndex = _ref7.dataEndIndex,\n        updateId = _ref7.updateId;\n\n    if (!validateWidthHeight({\n      props: props\n    })) {\n      return null;\n    }\n\n    var children = props.children,\n        layout = props.layout,\n        stackOffset = props.stackOffset,\n        data = props.data,\n        reverseStackOrder = props.reverseStackOrder;\n\n    var _getAxisNameByLayout2 = getAxisNameByLayout(layout),\n        numericAxisName = _getAxisNameByLayout2.numericAxisName,\n        cateAxisName = _getAxisNameByLayout2.cateAxisName;\n\n    var graphicalItems = findAllByType(children, GraphicalChild);\n    var stackGroups = getStackGroupsByAxisId(data, graphicalItems, \"\".concat(numericAxisName, \"Id\"), \"\".concat(cateAxisName, \"Id\"), stackOffset, reverseStackOrder);\n    var axisObj = axisComponents.reduce(function (result, entry) {\n      var name = \"\".concat(entry.axisType, \"Map\");\n      return _objectSpread(_objectSpread({}, result), {}, _defineProperty({}, name, getAxisMap(props, _objectSpread(_objectSpread({}, entry), {}, {\n        graphicalItems: graphicalItems,\n        stackGroups: entry.axisType === numericAxisName && stackGroups,\n        dataStartIndex: dataStartIndex,\n        dataEndIndex: dataEndIndex\n      }))));\n    }, {});\n    var offset = calculateOffset(_objectSpread(_objectSpread({}, axisObj), {}, {\n      props: props,\n      graphicalItems: graphicalItems\n    }), prevState === null || prevState === void 0 ? void 0 : prevState.legendBBox);\n    Object.keys(axisObj).forEach(function (key) {\n      axisObj[key] = formatAxisMap(props, axisObj[key], offset, key.replace('Map', ''), chartName);\n    });\n    var cateAxisMap = axisObj[\"\".concat(cateAxisName, \"Map\")];\n    var ticksObj = tooltipTicksGenerator(cateAxisMap);\n    var formatedGraphicalItems = getFormatItems(props, _objectSpread(_objectSpread({}, axisObj), {}, {\n      dataStartIndex: dataStartIndex,\n      dataEndIndex: dataEndIndex,\n      updateId: updateId,\n      graphicalItems: graphicalItems,\n      stackGroups: stackGroups,\n      offset: offset\n    }));\n    return _objectSpread(_objectSpread({\n      formatedGraphicalItems: formatedGraphicalItems,\n      graphicalItems: graphicalItems,\n      offset: offset,\n      stackGroups: stackGroups\n    }, ticksObj), axisObj);\n  };\n\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inherits(CategoricalChartWrapper, _Component);\n\n    var _super = _createSuper(CategoricalChartWrapper);\n\n    // todo join specific chart propTypes\n    function CategoricalChartWrapper(_props) {\n      var _this;\n\n      _classCallCheck(this, CategoricalChartWrapper);\n\n      _this = _super.call(this, _props);\n      _this.uniqueChartId = void 0;\n      _this.clipPathId = void 0;\n      _this.legendInstance = void 0;\n      _this.deferId = void 0;\n      _this.container = void 0;\n\n      _this.clearDeferId = function () {\n        if (!_isNil(_this.deferId) && deferClear) {\n          deferClear(_this.deferId);\n        }\n\n        _this.deferId = null;\n      };\n\n      _this.handleLegendBBoxUpdate = function (box) {\n        if (box && _this.legendInstance) {\n          var _this$state = _this.state,\n              dataStartIndex = _this$state.dataStartIndex,\n              dataEndIndex = _this$state.dataEndIndex,\n              updateId = _this$state.updateId;\n\n          _this.setState(_objectSpread({\n            legendBBox: box\n          }, updateStateOfAxisMapsOffsetAndStackGroups({\n            props: _this.props,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex,\n            updateId: updateId\n          }, _objectSpread(_objectSpread({}, _this.state), {}, {\n            legendBBox: box\n          }))));\n        }\n      };\n\n      _this.handleReceiveSyncEvent = function (cId, chartId, data) {\n        var syncId = _this.props.syncId;\n\n        if (syncId === cId && chartId !== _this.uniqueChartId) {\n          _this.clearDeferId();\n\n          _this.deferId = defer && defer(_this.applySyncEvent.bind(_assertThisInitialized(_this), data));\n        }\n      };\n\n      _this.handleBrushChange = function (_ref8) {\n        var startIndex = _ref8.startIndex,\n            endIndex = _ref8.endIndex;\n\n        // Only trigger changes if the extents of the brush have actually changed\n        if (startIndex !== _this.state.dataStartIndex || endIndex !== _this.state.dataEndIndex) {\n          var updateId = _this.state.updateId;\n\n          _this.setState(function () {\n            return _objectSpread({\n              dataStartIndex: startIndex,\n              dataEndIndex: endIndex\n            }, updateStateOfAxisMapsOffsetAndStackGroups({\n              props: _this.props,\n              dataStartIndex: startIndex,\n              dataEndIndex: endIndex,\n              updateId: updateId\n            }, _this.state));\n          });\n\n          _this.triggerSyncEvent({\n            dataStartIndex: startIndex,\n            dataEndIndex: endIndex\n          });\n        }\n      };\n\n      _this.handleMouseEnter = function (e) {\n        var onMouseEnter = _this.props.onMouseEnter;\n\n        var mouse = _this.getMouseInfo(e);\n\n        if (mouse) {\n          var nextState = _objectSpread(_objectSpread({}, mouse), {}, {\n            isTooltipActive: true\n          });\n\n          _this.setState(nextState);\n\n          _this.triggerSyncEvent(nextState);\n\n          if (_isFunction(onMouseEnter)) {\n            onMouseEnter(nextState, e);\n          }\n        }\n      };\n\n      _this.triggeredAfterMouseMove = function (e) {\n        var onMouseMove = _this.props.onMouseMove;\n\n        var mouse = _this.getMouseInfo(e);\n\n        var nextState = mouse ? _objectSpread(_objectSpread({}, mouse), {}, {\n          isTooltipActive: true\n        }) : {\n          isTooltipActive: false\n        };\n\n        _this.setState(nextState);\n\n        _this.triggerSyncEvent(nextState);\n\n        if (_isFunction(onMouseMove)) {\n          onMouseMove(nextState, e);\n        }\n      };\n\n      _this.handleItemMouseEnter = function (el) {\n        _this.setState(function () {\n          return {\n            isTooltipActive: true,\n            activeItem: el,\n            activePayload: el.tooltipPayload,\n            activeCoordinate: el.tooltipPosition || {\n              x: el.cx,\n              y: el.cy\n            }\n          };\n        });\n      };\n\n      _this.handleItemMouseLeave = function () {\n        _this.setState(function () {\n          return {\n            isTooltipActive: false\n          };\n        });\n      };\n\n      _this.handleMouseMove = function (e) {\n        if (e && _isFunction(e.persist)) {\n          e.persist();\n        }\n\n        _this.triggeredAfterMouseMove(e);\n      };\n\n      _this.handleMouseLeave = function (e) {\n        var onMouseLeave = _this.props.onMouseLeave;\n        var nextState = {\n          isTooltipActive: false\n        };\n\n        _this.setState(nextState);\n\n        _this.triggerSyncEvent(nextState);\n\n        if (_isFunction(onMouseLeave)) {\n          onMouseLeave(nextState, e);\n        }\n\n        _this.cancelThrottledTriggerAfterMouseMove();\n      };\n\n      _this.handleOuterEvent = function (e) {\n        var eventName = getReactEventByType(e);\n\n        var event = _get(_this.props, \"\".concat(eventName));\n\n        if (eventName && _isFunction(event)) {\n          var mouse;\n\n          if (/.*touch.*/i.test(eventName)) {\n            mouse = _this.getMouseInfo(e.changedTouches[0]);\n          } else {\n            mouse = _this.getMouseInfo(e);\n          }\n\n          var handler = event;\n          handler(mouse, e);\n        }\n      };\n\n      _this.handleClick = function (e) {\n        var onClick = _this.props.onClick;\n\n        var mouse = _this.getMouseInfo(e);\n\n        if (mouse) {\n          var nextState = _objectSpread(_objectSpread({}, mouse), {}, {\n            isTooltipActive: true\n          });\n\n          _this.setState(nextState);\n\n          _this.triggerSyncEvent(nextState);\n\n          if (_isFunction(onClick)) {\n            onClick(nextState, e);\n          }\n        }\n      };\n\n      _this.handleMouseDown = function (e) {\n        var onMouseDown = _this.props.onMouseDown;\n\n        if (_isFunction(onMouseDown)) {\n          var mouse = _this.getMouseInfo(e);\n\n          onMouseDown(mouse, e);\n        }\n      };\n\n      _this.handleMouseUp = function (e) {\n        var onMouseUp = _this.props.onMouseUp;\n\n        if (_isFunction(onMouseUp)) {\n          var mouse = _this.getMouseInfo(e);\n\n          onMouseUp(mouse, e);\n        }\n      };\n\n      _this.handleTouchMove = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseMove(e.changedTouches[0]);\n        }\n      };\n\n      _this.handleTouchStart = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseDown(e.changedTouches[0]);\n        }\n      };\n\n      _this.handleTouchEnd = function (e) {\n        if (e.changedTouches != null && e.changedTouches.length > 0) {\n          _this.handleMouseUp(e.changedTouches[0]);\n        }\n      };\n\n      _this.verticalCoordinatesGenerator = function (_ref9) {\n        var xAxis = _ref9.xAxis,\n            width = _ref9.width,\n            height = _ref9.height,\n            offset = _ref9.offset;\n        return getCoordinatesOfGrid(CartesianAxis.getTicks(_objectSpread(_objectSpread(_objectSpread({}, CartesianAxis.defaultProps), xAxis), {}, {\n          ticks: getTicksOfAxis(xAxis, true),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          }\n        })), offset.left, offset.left + offset.width);\n      };\n\n      _this.horizontalCoordinatesGenerator = function (_ref10) {\n        var yAxis = _ref10.yAxis,\n            width = _ref10.width,\n            height = _ref10.height,\n            offset = _ref10.offset;\n        return getCoordinatesOfGrid(CartesianAxis.getTicks(_objectSpread(_objectSpread(_objectSpread({}, CartesianAxis.defaultProps), yAxis), {}, {\n          ticks: getTicksOfAxis(yAxis, true),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          }\n        })), offset.top, offset.top + offset.height);\n      };\n\n      _this.axesTicksGenerator = function (axis) {\n        return getTicksOfAxis(axis, true);\n      };\n\n      _this.renderCursor = function (element) {\n        var _this$state2 = _this.state,\n            isTooltipActive = _this$state2.isTooltipActive,\n            activeCoordinate = _this$state2.activeCoordinate,\n            activePayload = _this$state2.activePayload,\n            offset = _this$state2.offset,\n            activeTooltipIndex = _this$state2.activeTooltipIndex;\n\n        if (!element || !element.props.cursor || !isTooltipActive || !activeCoordinate) {\n          return null;\n        }\n\n        var layout = _this.props.layout;\n        var restProps;\n        var cursorComp = Curve;\n\n        if (chartName === 'ScatterChart') {\n          restProps = activeCoordinate;\n          cursorComp = Cross;\n        } else if (chartName === 'BarChart') {\n          restProps = _this.getCursorRectangle();\n          cursorComp = Rectangle;\n        } else if (layout === 'radial') {\n          var _this$getCursorPoints = _this.getCursorPoints(),\n              cx = _this$getCursorPoints.cx,\n              cy = _this$getCursorPoints.cy,\n              radius = _this$getCursorPoints.radius,\n              startAngle = _this$getCursorPoints.startAngle,\n              endAngle = _this$getCursorPoints.endAngle;\n\n          restProps = {\n            cx: cx,\n            cy: cy,\n            startAngle: startAngle,\n            endAngle: endAngle,\n            innerRadius: radius,\n            outerRadius: radius\n          };\n          cursorComp = Sector;\n        } else {\n          restProps = {\n            points: _this.getCursorPoints()\n          };\n          cursorComp = Curve;\n        }\n\n        var key = element.key || '_recharts-cursor';\n\n        var cursorProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n          stroke: '#ccc',\n          pointerEvents: 'none'\n        }, offset), restProps), filterProps(element.props.cursor)), {}, {\n          payload: activePayload,\n          payloadIndex: activeTooltipIndex,\n          key: key,\n          className: 'recharts-tooltip-cursor'\n        });\n\n        return /*#__PURE__*/isValidElement(element.props.cursor) ? /*#__PURE__*/cloneElement(element.props.cursor, cursorProps) : /*#__PURE__*/createElement(cursorComp, cursorProps);\n      };\n\n      _this.renderPolarAxis = function (element, displayName, index) {\n        var axisType = _get(element, 'type.axisType');\n\n        var axisMap = _get(_this.state, \"\".concat(axisType, \"Map\"));\n\n        var axisOption = axisMap[element.props[\"\".concat(axisType, \"Id\")]];\n        return /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, axisOption), {}, {\n          className: axisType,\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          ticks: getTicksOfAxis(axisOption, true)\n        }));\n      };\n\n      _this.renderXAxis = function (element, displayName, index) {\n        var xAxisMap = _this.state.xAxisMap;\n        var axisObj = xAxisMap[element.props.xAxisId];\n        return _this.renderAxis(axisObj, element, displayName, index);\n      };\n\n      _this.renderYAxis = function (element, displayName, index) {\n        var yAxisMap = _this.state.yAxisMap;\n        var axisObj = yAxisMap[element.props.yAxisId];\n        return _this.renderAxis(axisObj, element, displayName, index);\n      };\n\n      _this.renderGrid = function (element) {\n        var _this$state3 = _this.state,\n            xAxisMap = _this$state3.xAxisMap,\n            yAxisMap = _this$state3.yAxisMap,\n            offset = _this$state3.offset;\n        var _this$props = _this.props,\n            width = _this$props.width,\n            height = _this$props.height;\n        var xAxis = getAnyElementOfObject(xAxisMap);\n\n        var yAxisWithFiniteDomain = _find(yAxisMap, function (axis) {\n          return _every(axis.domain, isFinit);\n        });\n\n        var yAxis = yAxisWithFiniteDomain || getAnyElementOfObject(yAxisMap);\n        var props = element.props || {};\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || 'grid',\n          x: isNumber(props.x) ? props.x : offset.left,\n          y: isNumber(props.y) ? props.y : offset.top,\n          width: isNumber(props.width) ? props.width : offset.width,\n          height: isNumber(props.height) ? props.height : offset.height,\n          xAxis: xAxis,\n          yAxis: yAxis,\n          offset: offset,\n          chartWidth: width,\n          chartHeight: height,\n          verticalCoordinatesGenerator: props.verticalCoordinatesGenerator || _this.verticalCoordinatesGenerator,\n          horizontalCoordinatesGenerator: props.horizontalCoordinatesGenerator || _this.horizontalCoordinatesGenerator\n        });\n      };\n\n      _this.renderPolarGrid = function (element) {\n        var radialLines = element.props.radialLines;\n        var _this$state4 = _this.state,\n            radiusAxisMap = _this$state4.radiusAxisMap,\n            angleAxisMap = _this$state4.angleAxisMap;\n        var radiusAxis = getAnyElementOfObject(radiusAxisMap);\n        var angleAxis = getAnyElementOfObject(angleAxisMap);\n        var cx = angleAxis.cx,\n            cy = angleAxis.cy,\n            innerRadius = angleAxis.innerRadius,\n            outerRadius = angleAxis.outerRadius;\n        return /*#__PURE__*/cloneElement(element, {\n          polarAngles: getTicksOfAxis(angleAxis, true).map(function (entry) {\n            return entry.coordinate;\n          }),\n          polarRadius: getTicksOfAxis(radiusAxis, true).map(function (entry) {\n            return entry.coordinate;\n          }),\n          cx: cx,\n          cy: cy,\n          innerRadius: innerRadius,\n          outerRadius: outerRadius,\n          key: element.key || 'polar-grid',\n          radialLines: radialLines\n        });\n      };\n\n      _this.renderLegend = function () {\n        var formatedGraphicalItems = _this.state.formatedGraphicalItems;\n        var _this$props2 = _this.props,\n            children = _this$props2.children,\n            width = _this$props2.width,\n            height = _this$props2.height;\n        var margin = _this.props.margin || {};\n        var legendWidth = width - (margin.left || 0) - (margin.right || 0);\n        var props = getLegendProps({\n          children: children,\n          formatedGraphicalItems: formatedGraphicalItems,\n          legendWidth: legendWidth,\n          legendContent: legendContent\n        });\n\n        if (!props) {\n          return null;\n        }\n\n        var item = props.item,\n            otherProps = _objectWithoutProperties(props, [\"item\"]);\n\n        return /*#__PURE__*/cloneElement(item, _objectSpread(_objectSpread({}, otherProps), {}, {\n          chartWidth: width,\n          chartHeight: height,\n          margin: margin,\n          ref: function ref(legend) {\n            _this.legendInstance = legend;\n          },\n          onBBoxUpdate: _this.handleLegendBBoxUpdate\n        }));\n      };\n\n      _this.renderTooltip = function () {\n        var children = _this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n\n        if (!tooltipItem) {\n          return null;\n        }\n\n        var _this$state5 = _this.state,\n            isTooltipActive = _this$state5.isTooltipActive,\n            activeCoordinate = _this$state5.activeCoordinate,\n            activePayload = _this$state5.activePayload,\n            activeLabel = _this$state5.activeLabel,\n            offset = _this$state5.offset;\n        return /*#__PURE__*/cloneElement(tooltipItem, {\n          viewBox: _objectSpread(_objectSpread({}, offset), {}, {\n            x: offset.left,\n            y: offset.top\n          }),\n          active: isTooltipActive,\n          label: activeLabel,\n          payload: isTooltipActive ? activePayload : [],\n          coordinate: activeCoordinate\n        });\n      };\n\n      _this.renderBrush = function (element) {\n        var _this$props3 = _this.props,\n            margin = _this$props3.margin,\n            data = _this$props3.data;\n        var _this$state6 = _this.state,\n            offset = _this$state6.offset,\n            dataStartIndex = _this$state6.dataStartIndex,\n            dataEndIndex = _this$state6.dataEndIndex,\n            updateId = _this$state6.updateId; // TODO: update brush when children update\n\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || '_recharts-brush',\n          onChange: combineEventHandlers(_this.handleBrushChange, null, element.props.onChange),\n          data: data,\n          x: isNumber(element.props.x) ? element.props.x : offset.left,\n          y: isNumber(element.props.y) ? element.props.y : offset.top + offset.height + offset.brushBottom - (margin.bottom || 0),\n          width: isNumber(element.props.width) ? element.props.width : offset.width,\n          startIndex: dataStartIndex,\n          endIndex: dataEndIndex,\n          updateId: \"brush-\".concat(updateId)\n        });\n      };\n\n      _this.renderReferenceElement = function (element, displayName, index) {\n        if (!element) {\n          return null;\n        }\n\n        var _assertThisInitialize = _assertThisInitialized(_this),\n            clipPathId = _assertThisInitialize.clipPathId;\n\n        var _this$state7 = _this.state,\n            xAxisMap = _this$state7.xAxisMap,\n            yAxisMap = _this$state7.yAxisMap,\n            offset = _this$state7.offset;\n        var _element$props = element.props,\n            xAxisId = _element$props.xAxisId,\n            yAxisId = _element$props.yAxisId;\n        return /*#__PURE__*/cloneElement(element, {\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          xAxis: xAxisMap[xAxisId],\n          yAxis: yAxisMap[yAxisId],\n          viewBox: {\n            x: offset.left,\n            y: offset.top,\n            width: offset.width,\n            height: offset.height\n          },\n          clipPathId: clipPathId\n        });\n      };\n\n      _this.renderActivePoints = function (_ref11) {\n        var item = _ref11.item,\n            activePoint = _ref11.activePoint,\n            basePoint = _ref11.basePoint,\n            childIndex = _ref11.childIndex,\n            isRange = _ref11.isRange;\n        var result = [];\n        var key = item.props.key;\n        var _item$item$props = item.item.props,\n            activeDot = _item$item$props.activeDot,\n            dataKey = _item$item$props.dataKey;\n\n        var dotProps = _objectSpread(_objectSpread({\n          index: childIndex,\n          dataKey: dataKey,\n          cx: activePoint.x,\n          cy: activePoint.y,\n          r: 4,\n          fill: getMainColorOfGraphicItem(item.item),\n          strokeWidth: 2,\n          stroke: '#fff',\n          payload: activePoint.payload,\n          value: activePoint.value,\n          key: \"\".concat(key, \"-activePoint-\").concat(childIndex)\n        }, filterProps(activeDot)), adaptEventHandlers(activeDot));\n\n        result.push(CategoricalChartWrapper.renderActiveDot(activeDot, dotProps));\n\n        if (basePoint) {\n          result.push(CategoricalChartWrapper.renderActiveDot(activeDot, _objectSpread(_objectSpread({}, dotProps), {}, {\n            cx: basePoint.x,\n            cy: basePoint.y,\n            key: \"\".concat(key, \"-basePoint-\").concat(childIndex)\n          })));\n        } else if (isRange) {\n          result.push(null);\n        }\n\n        return result;\n      };\n\n      _this.renderGraphicChild = function (element, displayName, index) {\n        var item = _this.filterFormatItem(element, displayName, index);\n\n        if (!item) {\n          return null;\n        }\n\n        var _this$state8 = _this.state,\n            isTooltipActive = _this$state8.isTooltipActive,\n            tooltipAxis = _this$state8.tooltipAxis,\n            activeTooltipIndex = _this$state8.activeTooltipIndex,\n            activeLabel = _this$state8.activeLabel;\n        var children = _this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n        var _item$props2 = item.props,\n            points = _item$props2.points,\n            isRange = _item$props2.isRange,\n            baseLine = _item$props2.baseLine;\n        var _item$item$props2 = item.item.props,\n            activeDot = _item$item$props2.activeDot,\n            hide = _item$item$props2.hide;\n        var hasActive = !hide && isTooltipActive && tooltipItem && activeDot && activeTooltipIndex >= 0;\n        var isTooltipTriggerByClick = tooltipItem && tooltipItem.props.trigger === 'click';\n        var itemEvents = isTooltipTriggerByClick ? {\n          onClick: combineEventHandlers(_this.handleItemMouseEnter, null, element.props.onCLick)\n        } : {\n          onMouseLeave: combineEventHandlers(_this.handleItemMouseLeave, null, element.props.onMouseLeave),\n          onMouseEnter: combineEventHandlers(_this.handleItemMouseEnter, null, element.props.onMouseEnter)\n        };\n        var graphicalItem = /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, item.props), itemEvents));\n\n        function findWithPayload(entry) {\n          // TODO needs to verify dataKey is Function\n          return typeof tooltipAxis.dataKey === 'function' ? tooltipAxis.dataKey(entry.payload) : null;\n        }\n\n        if (hasActive) {\n          var activePoint, basePoint;\n\n          if (tooltipAxis.dataKey && !tooltipAxis.allowDuplicatedCategory) {\n            // number transform to string\n            var specifiedKey = typeof tooltipAxis.dataKey === 'function' ? findWithPayload : 'payload.'.concat(tooltipAxis.dataKey.toString());\n            activePoint = findEntryInArray(points, specifiedKey, activeLabel);\n            basePoint = isRange && baseLine && findEntryInArray(baseLine, specifiedKey, activeLabel);\n          } else {\n            activePoint = points[activeTooltipIndex];\n            basePoint = isRange && baseLine && baseLine[activeTooltipIndex];\n          }\n\n          if (!_isNil(activePoint)) {\n            return [graphicalItem].concat(_toConsumableArray(_this.renderActivePoints({\n              item: item,\n              activePoint: activePoint,\n              basePoint: basePoint,\n              childIndex: activeTooltipIndex,\n              isRange: isRange\n            })));\n          }\n        }\n\n        if (isRange) {\n          return [graphicalItem, null, null];\n        }\n\n        return [graphicalItem, null];\n      };\n\n      _this.renderCustomized = function (element) {\n        return /*#__PURE__*/cloneElement(element, _objectSpread(_objectSpread({}, _this.props), _this.state));\n      };\n\n      _this.uniqueChartId = _isNil(_props.id) ? uniqueId('recharts') : _props.id;\n      _this.clipPathId = \"\".concat(_this.uniqueChartId, \"-clip\");\n\n      if (_props.throttleDelay) {\n        _this.triggeredAfterMouseMove = _throttle(_this.triggeredAfterMouseMove, _props.throttleDelay);\n      }\n\n      _this.state = {};\n      return _this;\n    }\n    /* eslint-disable  react/no-did-mount-set-state */\n\n\n    _createClass(CategoricalChartWrapper, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (!_isNil(this.props.syncId)) {\n          this.addListener();\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        // add syncId\n        if (_isNil(prevProps.syncId) && !_isNil(this.props.syncId)) {\n          this.addListener();\n        } // remove syncId\n\n\n        if (!_isNil(this.props.syncId) && _isNil(prevProps.syncId)) {\n          this.removeListener();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.clearDeferId();\n\n        if (!_isNil(this.props.syncId)) {\n          this.removeListener();\n        }\n\n        this.cancelThrottledTriggerAfterMouseMove();\n      }\n    }, {\n      key: \"cancelThrottledTriggerAfterMouseMove\",\n      value: function cancelThrottledTriggerAfterMouseMove() {\n        if (typeof this.triggeredAfterMouseMove.cancel === 'function') {\n          this.triggeredAfterMouseMove.cancel();\n        }\n      }\n      /**\n       * Get the information of mouse in chart, return null when the mouse is not in the chart\n       * @param  {Object} event    The event object\n       * @return {Object}          Mouse data\n       */\n\n    }, {\n      key: \"getMouseInfo\",\n      value: function getMouseInfo(event) {\n        if (!this.container) {\n          return null;\n        }\n\n        var containerOffset = getOffset(this.container);\n        var e = calculateChartCoordinate(event, containerOffset);\n        var rangeObj = this.inRange(e.chartX, e.chartY);\n\n        if (!rangeObj) {\n          return null;\n        }\n\n        var _this$state9 = this.state,\n            xAxisMap = _this$state9.xAxisMap,\n            yAxisMap = _this$state9.yAxisMap;\n\n        if (eventType !== 'axis' && xAxisMap && yAxisMap) {\n          var xScale = getAnyElementOfObject(xAxisMap).scale;\n          var yScale = getAnyElementOfObject(yAxisMap).scale;\n          var xValue = xScale && xScale.invert ? xScale.invert(e.chartX) : null;\n          var yValue = yScale && yScale.invert ? yScale.invert(e.chartY) : null;\n          return _objectSpread(_objectSpread({}, e), {}, {\n            xValue: xValue,\n            yValue: yValue\n          });\n        }\n\n        var toolTipData = getTooltipData(this.state, this.props.data, this.props.layout, rangeObj);\n\n        if (toolTipData) {\n          return _objectSpread(_objectSpread({}, e), toolTipData);\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getCursorRectangle\",\n      value: function getCursorRectangle() {\n        var layout = this.props.layout;\n        var _this$state10 = this.state,\n            activeCoordinate = _this$state10.activeCoordinate,\n            offset = _this$state10.offset,\n            tooltipAxisBandSize = _this$state10.tooltipAxisBandSize;\n        var halfSize = tooltipAxisBandSize / 2;\n        return {\n          stroke: 'none',\n          fill: '#ccc',\n          x: layout === 'horizontal' ? activeCoordinate.x - halfSize : offset.left + 0.5,\n          y: layout === 'horizontal' ? offset.top + 0.5 : activeCoordinate.y - halfSize,\n          width: layout === 'horizontal' ? tooltipAxisBandSize : offset.width - 1,\n          height: layout === 'horizontal' ? offset.height - 1 : tooltipAxisBandSize\n        };\n      }\n    }, {\n      key: \"getCursorPoints\",\n      value: function getCursorPoints() {\n        var layout = this.props.layout;\n        var _this$state11 = this.state,\n            activeCoordinate = _this$state11.activeCoordinate,\n            offset = _this$state11.offset;\n        var x1, y1, x2, y2;\n\n        if (layout === 'horizontal') {\n          x1 = activeCoordinate.x;\n          x2 = x1;\n          y1 = offset.top;\n          y2 = offset.top + offset.height;\n        } else if (layout === 'vertical') {\n          y1 = activeCoordinate.y;\n          y2 = y1;\n          x1 = offset.left;\n          x2 = offset.left + offset.width;\n        } else if (!_isNil(activeCoordinate.cx) || !_isNil(activeCoordinate.cy)) {\n          if (layout === 'centric') {\n            var cx = activeCoordinate.cx,\n                cy = activeCoordinate.cy,\n                innerRadius = activeCoordinate.innerRadius,\n                outerRadius = activeCoordinate.outerRadius,\n                angle = activeCoordinate.angle;\n            var innerPoint = polarToCartesian(cx, cy, innerRadius, angle);\n            var outerPoint = polarToCartesian(cx, cy, outerRadius, angle);\n            x1 = innerPoint.x;\n            y1 = innerPoint.y;\n            x2 = outerPoint.x;\n            y2 = outerPoint.y;\n          } else {\n            var _cx = activeCoordinate.cx,\n                _cy = activeCoordinate.cy,\n                radius = activeCoordinate.radius,\n                startAngle = activeCoordinate.startAngle,\n                endAngle = activeCoordinate.endAngle;\n            var startPoint = polarToCartesian(_cx, _cy, radius, startAngle);\n            var endPoint = polarToCartesian(_cx, _cy, radius, endAngle);\n            return {\n              points: [startPoint, endPoint],\n              cx: _cx,\n              cy: _cy,\n              radius: radius,\n              startAngle: startAngle,\n              endAngle: endAngle\n            };\n          }\n        }\n\n        return [{\n          x: x1,\n          y: y1\n        }, {\n          x: x2,\n          y: y2\n        }];\n      }\n    }, {\n      key: \"inRange\",\n      value: function inRange(x, y) {\n        var layout = this.props.layout;\n\n        if (layout === 'horizontal' || layout === 'vertical') {\n          var offset = this.state.offset;\n          var isInRange = x >= offset.left && x <= offset.left + offset.width && y >= offset.top && y <= offset.top + offset.height;\n          return isInRange ? {\n            x: x,\n            y: y\n          } : null;\n        }\n\n        var _this$state12 = this.state,\n            angleAxisMap = _this$state12.angleAxisMap,\n            radiusAxisMap = _this$state12.radiusAxisMap;\n\n        if (angleAxisMap && radiusAxisMap) {\n          var angleAxis = getAnyElementOfObject(angleAxisMap);\n          return inRangeOfSector({\n            x: x,\n            y: y\n          }, angleAxis);\n        }\n\n        return null;\n      }\n    }, {\n      key: \"parseEventsOfWrapper\",\n      value: function parseEventsOfWrapper() {\n        var children = this.props.children;\n        var tooltipItem = findChildByType(children, Tooltip.displayName);\n        var tooltipEvents = {};\n\n        if (tooltipItem && eventType === 'axis') {\n          if (tooltipItem.props.trigger === 'click') {\n            tooltipEvents = {\n              onClick: this.handleClick\n            };\n          } else {\n            tooltipEvents = {\n              onMouseEnter: this.handleMouseEnter,\n              onMouseMove: this.handleMouseMove,\n              onMouseLeave: this.handleMouseLeave,\n              onTouchMove: this.handleTouchMove,\n              onTouchStart: this.handleTouchStart,\n              onTouchEnd: this.handleTouchEnd\n            };\n          }\n        }\n\n        var outerEvents = adaptEventHandlers(this.props, this.handleOuterEvent);\n        return _objectSpread(_objectSpread({}, outerEvents), tooltipEvents);\n      }\n      /* eslint-disable  no-underscore-dangle */\n\n    }, {\n      key: \"addListener\",\n      value: function addListener() {\n        eventCenter.on(SYNC_EVENT, this.handleReceiveSyncEvent);\n\n        if (eventCenter.setMaxListeners && eventCenter._maxListeners) {\n          eventCenter.setMaxListeners(eventCenter._maxListeners + 1);\n        }\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener() {\n        eventCenter.removeListener(SYNC_EVENT, this.handleReceiveSyncEvent);\n\n        if (eventCenter.setMaxListeners && eventCenter._maxListeners) {\n          eventCenter.setMaxListeners(eventCenter._maxListeners - 1);\n        }\n      }\n    }, {\n      key: \"triggerSyncEvent\",\n      value: function triggerSyncEvent(data) {\n        var syncId = this.props.syncId;\n\n        if (!_isNil(syncId)) {\n          eventCenter.emit(SYNC_EVENT, syncId, this.uniqueChartId, data);\n        }\n      }\n    }, {\n      key: \"applySyncEvent\",\n      value: function applySyncEvent(data) {\n        var layout = this.props.layout;\n        var updateId = this.state.updateId;\n        var dataStartIndex = data.dataStartIndex,\n            dataEndIndex = data.dataEndIndex;\n\n        if (!_isNil(data.dataStartIndex) || !_isNil(data.dataEndIndex)) {\n          this.setState(_objectSpread({\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex\n          }, updateStateOfAxisMapsOffsetAndStackGroups({\n            props: this.props,\n            dataStartIndex: dataStartIndex,\n            dataEndIndex: dataEndIndex,\n            updateId: updateId\n          }, this.state)));\n        } else if (!_isNil(data.activeTooltipIndex)) {\n          var chartX = data.chartX,\n              chartY = data.chartY,\n              activeTooltipIndex = data.activeTooltipIndex;\n          var _this$state13 = this.state,\n              offset = _this$state13.offset,\n              tooltipTicks = _this$state13.tooltipTicks;\n\n          if (!offset) {\n            return;\n          }\n\n          var viewBox = _objectSpread(_objectSpread({}, offset), {}, {\n            x: offset.left,\n            y: offset.top\n          }); // When a categotical chart is combined with another chart, the value of chartX\n          // and chartY may beyond the boundaries.\n\n\n          var validateChartX = Math.min(chartX, viewBox.x + viewBox.width);\n          var validateChartY = Math.min(chartY, viewBox.y + viewBox.height);\n          var activeLabel = tooltipTicks[activeTooltipIndex] && tooltipTicks[activeTooltipIndex].value;\n          var activePayload = getTooltipContent(this.state, this.props.data, activeTooltipIndex);\n          var activeCoordinate = tooltipTicks[activeTooltipIndex] ? {\n            x: layout === 'horizontal' ? tooltipTicks[activeTooltipIndex].coordinate : validateChartX,\n            y: layout === 'horizontal' ? validateChartY : tooltipTicks[activeTooltipIndex].coordinate\n          } : originCoordinate;\n          this.setState(_objectSpread(_objectSpread({}, data), {}, {\n            activeLabel: activeLabel,\n            activeCoordinate: activeCoordinate,\n            activePayload: activePayload\n          }));\n        } else {\n          this.setState(data);\n        }\n      }\n    }, {\n      key: \"filterFormatItem\",\n      value: function filterFormatItem(item, displayName, childIndex) {\n        var formatedGraphicalItems = this.state.formatedGraphicalItems;\n\n        for (var i = 0, len = formatedGraphicalItems.length; i < len; i++) {\n          var entry = formatedGraphicalItems[i];\n\n          if (entry.item === item || entry.props.key === item.key || displayName === getDisplayName(entry.item.type) && childIndex === entry.childIndex) {\n            return entry;\n          }\n        }\n\n        return null;\n      }\n    }, {\n      key: \"renderAxis\",\n\n      /**\n       * Draw axis\n       * @param {Object} axisOptions The options of axis\n       * @param {Object} element      The axis element\n       * @param {String} displayName  The display name of axis\n       * @param {Number} index        The index of element\n       * @return {ReactElement}       The instance of x-axes\n       */\n      value: function renderAxis(axisOptions, element, displayName, index) {\n        var _this$props4 = this.props,\n            width = _this$props4.width,\n            height = _this$props4.height;\n        return /*#__PURE__*/React.createElement(CartesianAxis, _extends({}, axisOptions, {\n          className: \"recharts-\".concat(axisOptions.axisType, \" \").concat(axisOptions.axisType),\n          key: element.key || \"\".concat(displayName, \"-\").concat(index),\n          viewBox: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          },\n          ticksGenerator: this.axesTicksGenerator\n        }));\n      }\n      /**\n       * Draw grid\n       * @param  {ReactElement} element the grid item\n       * @return {ReactElement} The instance of grid\n       */\n\n    }, {\n      key: \"renderClipPath\",\n      value: function renderClipPath() {\n        var clipPathId = this.clipPathId;\n        var _this$state$offset = this.state.offset,\n            left = _this$state$offset.left,\n            top = _this$state$offset.top,\n            height = _this$state$offset.height,\n            width = _this$state$offset.width;\n        return /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n          id: clipPathId\n        }, /*#__PURE__*/React.createElement(\"rect\", {\n          x: left,\n          y: top,\n          height: height,\n          width: width\n        })));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        if (!validateWidthHeight(this)) {\n          return null;\n        }\n\n        var _this$props5 = this.props,\n            children = _this$props5.children,\n            className = _this$props5.className,\n            width = _this$props5.width,\n            height = _this$props5.height,\n            style = _this$props5.style,\n            compact = _this$props5.compact,\n            others = _objectWithoutProperties(_this$props5, [\"children\", \"className\", \"width\", \"height\", \"style\", \"compact\"]);\n\n        var attrs = filterProps(others);\n        var map = {\n          CartesianGrid: {\n            handler: this.renderGrid,\n            once: true\n          },\n          ReferenceArea: {\n            handler: this.renderReferenceElement\n          },\n          ReferenceLine: {\n            handler: this.renderReferenceElement\n          },\n          ReferenceDot: {\n            handler: this.renderReferenceElement\n          },\n          XAxis: {\n            handler: this.renderXAxis\n          },\n          YAxis: {\n            handler: this.renderYAxis\n          },\n          Brush: {\n            handler: this.renderBrush,\n            once: true\n          },\n          Bar: {\n            handler: this.renderGraphicChild\n          },\n          Line: {\n            handler: this.renderGraphicChild\n          },\n          Area: {\n            handler: this.renderGraphicChild\n          },\n          Radar: {\n            handler: this.renderGraphicChild\n          },\n          RadialBar: {\n            handler: this.renderGraphicChild\n          },\n          Scatter: {\n            handler: this.renderGraphicChild\n          },\n          Pie: {\n            handler: this.renderGraphicChild\n          },\n          Funnel: {\n            handler: this.renderGraphicChild\n          },\n          Tooltip: {\n            handler: this.renderCursor,\n            once: true\n          },\n          PolarGrid: {\n            handler: this.renderPolarGrid,\n            once: true\n          },\n          PolarAngleAxis: {\n            handler: this.renderPolarAxis\n          },\n          PolarRadiusAxis: {\n            handler: this.renderPolarAxis\n          },\n          Customized: {\n            handler: this.renderCustomized\n          }\n        }; // The \"compact\" mode is mainly used as the panorama within Brush\n\n        if (compact) {\n          return /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n            width: width,\n            height: height\n          }), this.renderClipPath(), renderByOrder(children, map));\n        }\n\n        var events = this.parseEventsOfWrapper();\n        return /*#__PURE__*/React.createElement(\"div\", _extends({\n          className: classNames('recharts-wrapper', className),\n          style: _objectSpread({\n            position: 'relative',\n            cursor: 'default',\n            width: width,\n            height: height\n          }, style)\n        }, events, {\n          ref: function ref(node) {\n            _this2.container = node;\n          }\n        }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n          width: width,\n          height: height\n        }), this.renderClipPath(), renderByOrder(children, map)), this.renderLegend(), this.renderTooltip());\n      }\n    }]);\n\n    return CategoricalChartWrapper;\n  }(Component), _class.displayName = chartName, _class.defaultProps = _objectSpread({\n    layout: 'horizontal',\n    stackOffset: 'none',\n    barCategoryGap: '10%',\n    barGap: 4,\n    margin: {\n      top: 5,\n      right: 5,\n      bottom: 5,\n      left: 5\n    },\n    reverseStackOrder: false\n  }, defaultProps), _class.getDerivedStateFromProps = function (nextProps, prevState) {\n    var data = nextProps.data,\n        children = nextProps.children,\n        width = nextProps.width,\n        height = nextProps.height,\n        layout = nextProps.layout,\n        stackOffset = nextProps.stackOffset,\n        margin = nextProps.margin;\n\n    if (_isNil(prevState.updateId)) {\n      var defaultState = createDefaultState(nextProps);\n      return _objectSpread(_objectSpread(_objectSpread({}, defaultState), {}, {\n        updateId: 0\n      }, updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread(_objectSpread({\n        props: nextProps\n      }, defaultState), {}, {\n        updateId: 0\n      }), prevState)), {}, {\n        prevData: data,\n        prevWidth: width,\n        prevHeight: height,\n        prevLayout: layout,\n        prevStackOffset: stackOffset,\n        prevMargin: margin,\n        prevChildren: children\n      });\n    }\n\n    if (data !== prevState.prevData || width !== prevState.prevWidth || height !== prevState.prevHeight || layout !== prevState.prevLayout || stackOffset !== prevState.prevStackOffset || !shallowEqual(margin, prevState.prevMargin)) {\n      var _defaultState = createDefaultState(nextProps); // Fixes https://github.com/recharts/recharts/issues/2143\n\n\n      var keepFromPrevState = {\n        // (chartX, chartY) are (0,0) in default state, but we want to keep the last mouse position to avoid\n        // any flickering\n        chartX: prevState.chartX,\n        chartY: prevState.chartY,\n        // The tooltip should stay active when it was active in the previous render. If this is not\n        // the case, the tooltip disappears and immediately re-appears, causing a flickering effect\n        isTooltipActive: prevState.isTooltipActive\n      };\n\n      var updatesToState = _objectSpread(_objectSpread({}, getTooltipData(prevState, data, layout)), {}, {\n        // Update the current tooltip data (in case it changes without mouse interaction)\n        updateId: prevState.updateId + 1\n      });\n\n      var newState = _objectSpread(_objectSpread(_objectSpread({}, _defaultState), keepFromPrevState), updatesToState);\n\n      return _objectSpread(_objectSpread(_objectSpread({}, newState), updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread({\n        props: nextProps\n      }, newState), prevState)), {}, {\n        prevData: data,\n        prevWidth: width,\n        prevHeight: height,\n        prevLayout: layout,\n        prevStackOffset: stackOffset,\n        prevMargin: margin,\n        prevChildren: children\n      });\n    }\n\n    if (!isChildrenEqual(children, prevState.prevChildren)) {\n      // update configuration in chilren\n      var hasGlobalData = !_isNil(data);\n      var newUpdateId = hasGlobalData ? prevState.updateId : prevState.updateId + 1;\n      return _objectSpread(_objectSpread({\n        updateId: newUpdateId\n      }, updateStateOfAxisMapsOffsetAndStackGroups(_objectSpread(_objectSpread({\n        props: nextProps\n      }, prevState), {}, {\n        updateId: newUpdateId\n      }), prevState)), {}, {\n        prevChildren: children\n      });\n    }\n\n    return null;\n  }, _class.renderActiveDot = function (option, props) {\n    var dot;\n\n    if ( /*#__PURE__*/isValidElement(option)) {\n      dot = /*#__PURE__*/cloneElement(option, props);\n    } else if (_isFunction(option)) {\n      dot = option(props);\n    } else {\n      dot = /*#__PURE__*/React.createElement(Dot, props);\n    }\n\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: \"recharts-active-dot\",\n      key: props.key\n    }, dot);\n  }, _temp;\n};"]},"metadata":{},"sourceType":"module"}