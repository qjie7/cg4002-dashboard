{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/qianjie/Desktop/cg4002-dashboard/frontend/src/pages/Playground.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport { Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from '@material-ui/core/Button';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport io from 'socket.io-client';\nimport styled from 'styled-components';\nimport { Modal } from '../components/Modal/Modal';\nimport FormDialog from '../components/FormDialog/FormDialog';\nimport DancerCard from '../components/DancerCard/DancerCard';\nconst useStyles = makeStyles(theme => ({\n  margin: {\n    margin: theme.spacing(1),\n    paddingRight: 33\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff'\n  },\n  heading: {\n    fontSize: '4.5em',\n    letterSpacing: '-1px',\n    backgroundColor: '#503e9d',\n    top: '0px',\n    color: 'white'\n  }\n}));\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 50px;\n  bottom: 50px;\n`;\n_c = Container;\nconst socket = io('http://localhost:3000', {\n  transports: ['websocket', 'polling']\n});\n\nfunction Playground() {\n  _s();\n\n  const classes = useStyles();\n  const [danceMove, setDanceMove] = useState('Dab');\n  const [position, setPosition] = useState([1, 2, 3]);\n  const [accuracy, setAccuracy] = useState(0);\n  const [accuracyAvg, setAccuracyAvg] = useState(0);\n  const [sync, setSync] = useState(0);\n  const [syncAvg, setSyncAvg] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [connection, setConnection] = useState(false);\n\n  const handleConnection = () => {\n    if (connection) {\n      const accuracySum = accuracyList.reduce((a, b) => a + b, 0);\n      const accuracyAvg = accuracySum / accuracyList.length || 0;\n      setAccuracyAvg(accuracyAvg);\n      const syncSum = syncList.reduce((a, b) => a + b, 0);\n      const syncAvg = syncSum / syncList.length || 0;\n      setSyncAvg(syncAvg); // console.log(accuracyAvg)\n    }\n\n    connection ? setConnection(false) : setConnection(true);\n    connection ? setShowModal(true) : setShowModal(false);\n  };\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const [open2, setOpen2] = React.useState(false);\n\n  const handleClickOpen2 = () => {\n    setOpen2(true);\n  };\n\n  const handleClose2 = () => {\n    setOpen2(false);\n  };\n\n  const [open3, setOpen3] = React.useState(false);\n\n  const handleClickOpen3 = () => {\n    setOpen3(true);\n  };\n\n  const handleClose3 = () => {\n    setOpen3(false);\n  };\n\n  function handleLeaderNameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value);\n    localStorage.setItem('leaderName', e.target.value);\n  }\n\n  function handleMember1NameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value);\n    localStorage.setItem('member1Name', e.target.value);\n  }\n\n  function handleMember2NameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value);\n    localStorage.setItem('member2Name', e.target.value);\n  }\n\n  const [groupName, setGroupName] = useState('Group Name');\n  const [leaderName, setLeaderName] = useState('Leader Name');\n  const [member1Name, setMember1Name] = useState('Member 1 Name');\n  const [member2Name, setMember2Name] = useState('Member 2 Name');\n  useEffect(() => {\n    setGroupName(localStorage.getItem('groupName'));\n    setLeaderName(localStorage.getItem('leaderName'));\n    setMember1Name(localStorage.getItem('member1Name'));\n    setMember2Name(localStorage.getItem('member2Name'));\n  });\n  const [score, setScore] = useState(0);\n  const [testLog, setTestLog] = useState({\n    danceMove: 'Dab',\n    position1: 1,\n    position2: 2,\n    position3: 3\n  });\n  const [correctness, setCorrectness] = useState(false);\n  const [accuracyList, setAccuracyList] = useState([]);\n  const [syncList, setSyncList] = useState([]); // function handleChange() {\n  //   // axios\n  //   //   .post('/api/connection', { checked })\n  //   //   .then((response) => {\n  //   //     console.log(response.data)\n  //   //   })\n  //   //   .catch((error) => {\n  //   //     console.log(error)\n  //   //   })\n  //   setChecked((prevChecked) => !checked)\n  //   // if (checked) {\n  //   //   socket.connect()\n  //   //   console.log('connect')\n  //   // } else {\n  //   //   socket.close()\n  //   //   console.log('disconnect')\n  //   // }\n  //   // console.log(checked)\n  // }\n\n  useEffect(() => {\n    if (connection) {\n      // socket.connect()\n      // if (connection && checked) {\n      socket.on('new_data', newData => {\n        setDanceMove(newData.danceMove);\n        setPosition(newData.position);\n        setAccuracy(newData.accuracy);\n        setAccuracyList(oldList => [...oldList, newData.accuracy]);\n        setSync(newData.sync);\n        setSyncList(oldList => [...oldList, newData.sync]);\n      });\n      socket.on('test_log', newData => {\n        setTestLog(newData);\n      }); // socket.on('test_log', (newData) => {\n      //   setTestLog(newData)\n      // })\n      // socket.on('new_data', (newData) => {\n      //   setDanceMove(newData.danceMove)\n      //   setPosition(newData.position)\n      // })\n      // socket.on('new_data', (newData) => {\n      //   setDanceMove(newData.danceMove)\n      //   setPosition(newData.position)\n      // })\n    } else {\n      // if (!checked) {\n      //   socket.disconnect()\n      // } else {\n      //   socket.off('new_data')\n      // }\n      // socket.off('new_data')\n      socket.off('new_data');\n      socket.off('test_log'); // socket.disconnect('new_data')\n    }\n  }, [connection]); // console.log(accuracyList)\n  // }, [connection, checked])\n  // useEffect(() => {\n  //   if (!checked && !connection) {\n  //     socket.off('new_data')\n  //     // socket.on('test_log', (newData) => {\n  //     //   setTestLog(newData)\n  //     // })\n  //     // socket.on('new_data', (newData) => {\n  //     //   setDanceMove(newData.danceMove)\n  //     //   setPosition(newData.position)\n  //     // })\n  //     // socket.on('new_data', (newData) => {\n  //     //   setDanceMove(newData.danceMove)\n  //     //   setPosition(newData.position)\n  //     // })\n  //   } else if (checked && connection) {\n  //     socket.on('new_data', (newData) => {\n  //       setDanceMove(newData.danceMove)\n  //       setPosition(newData.position)\n  //     })\n  //   } else if (checked && !connection) {\n  //     socket.off('new_data')\n  //   } else if (!checked) {\n  //     // socket.off('new_data')\n  //     //socket.off('new_data')\n  //     socket.disconnect('new_data')\n  //   }\n  // }, [connection])\n\n  useEffect(() => {\n    if ( // position1 === testLog.position1 &&\n    // position2 === testLog.position2 &&\n    // position3 === testLog.position3 &&\n    danceMove === testLog.danceMove) {\n      setCorrectness(true);\n\n      if (score < 10) {\n        setScore(prevScore => prevScore + 1);\n      } // if (!connection) {\n      //   setScore(0)\n      // }\n\n\n      console.log(score);\n    } else {\n      setCorrectness(false);\n    }\n  }, [danceMove]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FormDialog, {\n      handleClickOpen: handleClickOpen,\n      handleClose: handleClose,\n      open: open,\n      setOpen: setOpen,\n      handleNameChange: handleMember1NameChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormDialog, {\n      handleClickOpen: handleClickOpen2,\n      handleClose: handleClose2,\n      open: open2,\n      setOpen: setOpen2,\n      handleNameChange: handleLeaderNameChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormDialog, {\n      handleClickOpen: handleClickOpen3,\n      handleClose: handleClose3,\n      open: open3,\n      setOpen: setOpen3,\n      handleNameChange: handleMember2NameChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      style: {\n        marginTop: '-10px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          align: \"center\",\n          className: classes.heading,\n          children: groupName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(DancerCard, {\n          name: member1Name,\n          position: position[0],\n          userImage: \"6CgkUjUl4og\",\n          danceMove: danceMove,\n          handleClickOpen: handleClickOpen,\n          accuracy: accuracy,\n          sync: sync\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(DancerCard, {\n          name: leaderName,\n          position: position[1],\n          userImage: \"sibVwORYqs0\",\n          danceMove: danceMove,\n          role: \"Leader\",\n          handleClickOpen: handleClickOpen2,\n          accuracy: accuracy,\n          sync: sync\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(DancerCard, {\n          name: member2Name,\n          position: position[2],\n          userImage: \"d2MSDujJl2g\",\n          danceMove: danceMove,\n          role: \"Member 2\",\n          handleClickOpen: handleClickOpen3,\n          accuracy: accuracy,\n          sync: sync\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          onClick: handleConnection,\n          className: classes.margin,\n          children: connection ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"END\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"START\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Modal, {\n            showModal: showModal,\n            setShowModal: setShowModal,\n            score: score,\n            setScore: setScore,\n            setAccuracyList: setAccuracyList,\n            accuracyList: accuracyList,\n            accuracyAvg: accuracyAvg,\n            setSyncList: setSyncList,\n            syncList: syncList,\n            syncAvg: syncAvg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n          className: classes.backdrop,\n          open: connection ? !socket.connected : false,\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n            color: \"inherit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Playground, \"rIYquIktnw0M3Besi+ZNb2c5Btg=\", false, function () {\n  return [useStyles];\n});\n\n_c2 = Playground;\nexport default Playground;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Playground\");","map":{"version":3,"sources":["/Users/qianjie/Desktop/cg4002-dashboard/frontend/src/pages/Playground.js"],"names":["React","useEffect","useState","Grid","Typography","makeStyles","CircularProgress","Button","Backdrop","io","styled","Modal","FormDialog","DancerCard","useStyles","theme","margin","spacing","paddingRight","backdrop","zIndex","drawer","color","heading","fontSize","letterSpacing","backgroundColor","top","Container","div","socket","transports","Playground","classes","danceMove","setDanceMove","position","setPosition","accuracy","setAccuracy","accuracyAvg","setAccuracyAvg","sync","setSync","syncAvg","setSyncAvg","showModal","setShowModal","connection","setConnection","handleConnection","accuracySum","accuracyList","reduce","a","b","length","syncSum","syncList","open","setOpen","handleClickOpen","handleClose","open2","setOpen2","handleClickOpen2","handleClose2","open3","setOpen3","handleClickOpen3","handleClose3","handleLeaderNameChange","e","console","log","target","value","localStorage","setItem","handleMember1NameChange","handleMember2NameChange","groupName","setGroupName","leaderName","setLeaderName","member1Name","setMember1Name","member2Name","setMember2Name","getItem","score","setScore","testLog","setTestLog","position1","position2","position3","correctness","setCorrectness","setAccuracyList","setSyncList","on","newData","oldList","off","prevScore","marginTop","connected"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from 'react'\nimport { Grid, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Button from '@material-ui/core/Button'\nimport Backdrop from '@material-ui/core/Backdrop'\n\nimport io from 'socket.io-client'\nimport styled from 'styled-components'\n\nimport { Modal } from '../components/Modal/Modal'\nimport FormDialog from '../components/FormDialog/FormDialog'\nimport DancerCard from '../components/DancerCard/DancerCard'\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(1),\n    paddingRight: 33,\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  heading: {\n    fontSize: '4.5em',\n    letterSpacing: '-1px',\n    backgroundColor: '#503e9d',\n    top: '0px',\n    color: 'white',\n  },\n}))\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 50px;\n  bottom: 50px;\n`\n\nconst socket = io('http://localhost:3000', {\n  transports: ['websocket', 'polling'],\n})\n\nfunction Playground() {\n  const classes = useStyles()\n  const [danceMove, setDanceMove] = useState('Dab')\n  const [position, setPosition] = useState([1, 2, 3])\n  const [accuracy, setAccuracy] = useState(0)\n  const [accuracyAvg, setAccuracyAvg] = useState(0)\n  const [sync, setSync] = useState(0)\n  const [syncAvg, setSyncAvg] = useState(0)\n  const [showModal, setShowModal] = useState(false)\n  const [connection, setConnection] = useState(false)\n\n  const handleConnection = () => {\n    if (connection) {\n      const accuracySum = accuracyList.reduce((a, b) => a + b, 0)\n      const accuracyAvg = accuracySum / accuracyList.length || 0\n      setAccuracyAvg(accuracyAvg)\n\n      const syncSum = syncList.reduce((a, b) => a + b, 0)\n      const syncAvg = syncSum / syncList.length || 0\n      setSyncAvg(syncAvg)\n      // console.log(accuracyAvg)\n    }\n    connection ? setConnection(false) : setConnection(true)\n    connection ? setShowModal(true) : setShowModal(false)\n  }\n\n  const [open, setOpen] = React.useState(false)\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  const [open2, setOpen2] = React.useState(false)\n  const handleClickOpen2 = () => {\n    setOpen2(true)\n  }\n  const handleClose2 = () => {\n    setOpen2(false)\n  }\n\n  const [open3, setOpen3] = React.useState(false)\n  const handleClickOpen3 = () => {\n    setOpen3(true)\n  }\n  const handleClose3 = () => {\n    setOpen3(false)\n  }\n\n  function handleLeaderNameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value)\n    localStorage.setItem('leaderName', e.target.value)\n  }\n\n  function handleMember1NameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value)\n    localStorage.setItem('member1Name', e.target.value)\n  }\n\n  function handleMember2NameChange(e) {\n    // setLeader(e.target.value)\n    console.log(e.target.value)\n    localStorage.setItem('member2Name', e.target.value)\n  }\n\n  const [groupName, setGroupName] = useState('Group Name')\n  const [leaderName, setLeaderName] = useState('Leader Name')\n  const [member1Name, setMember1Name] = useState('Member 1 Name')\n  const [member2Name, setMember2Name] = useState('Member 2 Name')\n\n  useEffect(() => {\n    setGroupName(localStorage.getItem('groupName'))\n    setLeaderName(localStorage.getItem('leaderName'))\n    setMember1Name(localStorage.getItem('member1Name'))\n    setMember2Name(localStorage.getItem('member2Name'))\n  })\n\n  const [score, setScore] = useState(0)\n  const [testLog, setTestLog] = useState({\n    danceMove: 'Dab',\n    position1: 1,\n    position2: 2,\n    position3: 3,\n  })\n  const [correctness, setCorrectness] = useState(false)\n\n  const [accuracyList, setAccuracyList] = useState([])\n  const [syncList, setSyncList] = useState([])\n\n  // function handleChange() {\n  //   // axios\n  //   //   .post('/api/connection', { checked })\n  //   //   .then((response) => {\n  //   //     console.log(response.data)\n  //   //   })\n  //   //   .catch((error) => {\n  //   //     console.log(error)\n  //   //   })\n  //   setChecked((prevChecked) => !checked)\n  //   // if (checked) {\n  //   //   socket.connect()\n  //   //   console.log('connect')\n  //   // } else {\n  //   //   socket.close()\n  //   //   console.log('disconnect')\n  //   // }\n  //   // console.log(checked)\n  // }\n\n  useEffect(() => {\n    if (connection) {\n      // socket.connect()\n      // if (connection && checked) {\n      socket.on('new_data', (newData) => {\n        setDanceMove(newData.danceMove)\n        setPosition(newData.position)\n        setAccuracy(newData.accuracy)\n        setAccuracyList((oldList) => [...oldList, newData.accuracy])\n        setSync(newData.sync)\n        setSyncList((oldList) => [...oldList, newData.sync])\n      })\n      socket.on('test_log', (newData) => {\n        setTestLog(newData)\n      })\n\n      // socket.on('test_log', (newData) => {\n      //   setTestLog(newData)\n      // })\n\n      // socket.on('new_data', (newData) => {\n      //   setDanceMove(newData.danceMove)\n      //   setPosition(newData.position)\n      // })\n      // socket.on('new_data', (newData) => {\n      //   setDanceMove(newData.danceMove)\n      //   setPosition(newData.position)\n      // })\n    } else {\n      // if (!checked) {\n      //   socket.disconnect()\n      // } else {\n      //   socket.off('new_data')\n      // }\n      // socket.off('new_data')\n      socket.off('new_data')\n      socket.off('test_log')\n\n      // socket.disconnect('new_data')\n    }\n  }, [connection])\n  // console.log(accuracyList)\n  // }, [connection, checked])\n\n  // useEffect(() => {\n  //   if (!checked && !connection) {\n  //     socket.off('new_data')\n\n  //     // socket.on('test_log', (newData) => {\n  //     //   setTestLog(newData)\n  //     // })\n\n  //     // socket.on('new_data', (newData) => {\n  //     //   setDanceMove(newData.danceMove)\n  //     //   setPosition(newData.position)\n  //     // })\n  //     // socket.on('new_data', (newData) => {\n  //     //   setDanceMove(newData.danceMove)\n  //     //   setPosition(newData.position)\n  //     // })\n  //   } else if (checked && connection) {\n  //     socket.on('new_data', (newData) => {\n  //       setDanceMove(newData.danceMove)\n  //       setPosition(newData.position)\n  //     })\n  //   } else if (checked && !connection) {\n  //     socket.off('new_data')\n  //   } else if (!checked) {\n  //     // socket.off('new_data')\n  //     //socket.off('new_data')\n  //     socket.disconnect('new_data')\n  //   }\n  // }, [connection])\n\n  useEffect(() => {\n    if (\n      // position1 === testLog.position1 &&\n      // position2 === testLog.position2 &&\n      // position3 === testLog.position3 &&\n      danceMove === testLog.danceMove\n    ) {\n      setCorrectness(true)\n      if (score < 10) {\n        setScore((prevScore) => prevScore + 1)\n      }\n      // if (!connection) {\n      //   setScore(0)\n      // }\n      console.log(score)\n    } else {\n      setCorrectness(false)\n    }\n  }, [danceMove])\n\n  return (\n    <>\n      <FormDialog\n        handleClickOpen={handleClickOpen}\n        handleClose={handleClose}\n        open={open}\n        setOpen={setOpen}\n        handleNameChange={handleMember1NameChange}\n      />\n\n      <FormDialog\n        handleClickOpen={handleClickOpen2}\n        handleClose={handleClose2}\n        open={open2}\n        setOpen={setOpen2}\n        handleNameChange={handleLeaderNameChange}\n      />\n\n      <FormDialog\n        handleClickOpen={handleClickOpen3}\n        handleClose={handleClose3}\n        open={open3}\n        setOpen={setOpen3}\n        handleNameChange={handleMember2NameChange}\n      />\n      <Grid container justify='center' style={{ marginTop: '-10px' }}>\n        <Grid item xs={12}>\n          <Typography variant='h3' align='center' className={classes.heading}>\n            {groupName}\n          </Typography>\n        </Grid>\n      </Grid>\n\n      <Grid container justify='center'>\n        {/* <Grid item onClick={handleClickOpen}> */}\n        <Grid item>\n          <DancerCard\n            name={member1Name}\n            position={position[0]}\n            userImage='6CgkUjUl4og'\n            danceMove={danceMove}\n            handleClickOpen={handleClickOpen}\n            accuracy={accuracy}\n            sync={sync}\n          />\n        </Grid>\n\n        {/* <Grid item onClick={handleClickOpen2}> */}\n        <Grid item>\n          <DancerCard\n            name={leaderName}\n            position={position[1]}\n            userImage='sibVwORYqs0'\n            danceMove={danceMove}\n            role='Leader'\n            handleClickOpen={handleClickOpen2}\n            accuracy={accuracy}\n            sync={sync}\n          />\n        </Grid>\n\n        {/* <Grid item onClick={handleClickOpen3}> */}\n        <Grid item>\n          <DancerCard\n            name={member2Name}\n            position={position[2]}\n            userImage='d2MSDujJl2g'\n            danceMove={danceMove}\n            role='Member 2'\n            handleClickOpen={handleClickOpen3}\n            accuracy={accuracy}\n            sync={sync}\n          />\n        </Grid>\n      </Grid>\n\n      <Grid container justify='center'>\n        <Grid item>\n          {/* <Scoreboard /> */}\n          <Button\n            variant='contained'\n            color='secondary'\n            onClick={handleConnection}\n            className={classes.margin}\n          >\n            {connection ? <p>END</p> : <p>START</p>}\n          </Button>\n          {/* <Switch type='submit' onChange={handleChange} checked={checked} /> */}\n\n          <Container>\n            <Modal\n              showModal={showModal}\n              setShowModal={setShowModal}\n              score={score}\n              setScore={setScore}\n              setAccuracyList={setAccuracyList}\n              accuracyList={accuracyList}\n              accuracyAvg={accuracyAvg}\n              setSyncList={setSyncList}\n              syncList={syncList}\n              syncAvg={syncAvg}\n            />\n          </Container>\n          <Backdrop\n            className={classes.backdrop}\n            open={connection ? !socket.connected : false}\n          >\n            <CircularProgress color='inherit' />\n          </Backdrop>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default Playground\n"]},"metadata":{},"sourceType":"module"}